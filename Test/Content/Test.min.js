try{Object.defineProperty(Error.prototype,"message",{enumerable:!0})}catch(e){}var IntelliFactory={Runtime:{Class:function(n,t){function i(){}i.prototype=n;for(var r in t)i[r]=t[r];return i},Define:function(n,t){function i(n,t){var u,f,e;for(u in t)if(f=typeof n[u],e=typeof t[u],f=="object"&&e=="object")i(n[u],t[u]);else if(f=="undefined"||r)n[u]=t[u];else throw new Error("Name conflict: "+u);}var r=!!this.overwrite;i(n,t)},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===undefined&&delete n[r];return n},Field:function(n){var t,i=!1;return function(){return i||(i=!0,t=n()),t}},GetOptional:function(n){return n===undefined?{$:0}:{$:1,$0:n}},New:function(n,t){var i=new n;for(var r in t)r in i||(i[r]=t[r]);return i},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},OnInit:function(n){"init"in this||(this.init=[]);this.init.push(n)},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Inherit:function(n,t){var i,r;if(typeof t=="function"){i=n.prototype;n.prototype=new t;for(r in i)n.prototype[r]=i[r]}},Safe:function(n){return n===undefined?{}:n},SetOptional:function(n,t,i){i.$==0?delete n[t]:n[t]=i.$0},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"init"in this&&(n(this.init),this.init=[]);"load"in this&&(n(this.load),this.load=[])},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");}}};Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1;$.Define($$,{Arrays:{contains:function(_2,_3){var _4,_5,_6;_4=true;_5=0;_6=_3.length;while(_4?_5<_6:false){a.Equals(_3[_5],_2)?_4=false:_5=_5+1;}return!_4;},mapFold:function(_7,_8,_9){var _,ba,bb,bc,bd,be;_=b(_9.length);ba=_8;for(bb=0;bb<=_9.length-1;bb++){bc=(_7(ba))(c.get(_9,bb));bd=bc[1];be=bc[0];c.set(_,bb,be);ba=bd;}return[_,ba];},mapFoldBack:function(be,bf,bg){var bh,bi,bj,bk,bl,bm,bn,bo;bh=b(bf.length);bi=bg;bj=bf.length;for(bk=1;bk<=bj;bk++){bl=bj-bk;bm=(be(c.get(bf,bl)))(bi);bn=bm[1];bo=bm[0];c.set(bh,bl,bo);bi=bn;}return[bh,bi];},sortInPlaceByDescending:function(bp,bq){return bq.sort(function(br,bs){return-d.Compare(bp(br),bp(bs));});},splitInto:function(bt,bu){var bv,bw,bx,by,bz,bA,bB,bC;bt<=0?d.FailWith("Count must be positive"):null;bv=c.length(bu);if(bv===0){bw=[];}else{bx=d.Min(bt,bv);by=b(bx);bz=bv/bx>>0;bA=0;for(bB=0;bB<=bv%bx-1;bB++){c.set(by,bB,c.sub(bu,bA,bz+1));bA=bA+bz+1;}for(bC=bv%bx;bC<=bx-1;bC++){c.set(by,bC,c.sub(bu,bA,bz));bA=bA+bz;}bw=by;}return bw;},tryFindBack:function(bD,bE){var bF,bG;bF={$:0};bG=bE.length-1;while(bG>0?bF.$==0:false){bD(c.get(bE,bG))?bF={$:1,$0:c.get(bE,bG)}:null;bG=bG-1;}return bF;},tryFindIndexBack:function(bH,bI){var bJ,bK;bJ={$:0};bK=bI.length-1;while(bK>0?bJ.$==0:false){bH(c.get(bI,bK))?bJ={$:1,$0:bK}:null;bK=bK-1;}return bJ;}},List:{map3:function(bL,bM,bN,bO){var bP;bP=c.map2(function(bQ){return function(bR){return bQ(bR);};},c.map2(bL,c.ofSeq(bM),c.ofSeq(bN)),c.ofSeq(bO));return e.ofArray(bP);},skip:function(bS,bT){var bU,bV,bW,bX;bU=bT;for(bV=1;bV<=bS;bV++){if(bU.$==0){bW=d.FailWith("Input list too short.");}else{bX=bU.$1;bW=bU=bX;}}return bU;},skipWhile:function(bY,bZ){var b0;b0=bZ;while(!(b0.$==0)?bY(e.head(b0)):false){b0=e.tail(b0);}return b0;}},Seq:{chunkBySize:function(b1,b2){var b3;b1<=0?d.FailWith("Chunk size must be positive"):null;b3=function(){var b5,b6,b8;b5=f.Get(b2);b6=function(){return b5.Dispose();};b8=function(b9){var b_,b$,ca;if(b5.MoveNext()){b$=[b5.get_Current()];while(c.length(b$)<b1?b5.MoveNext():false){ca=b$.push(b5.get_Current());}b9.c=b$;b_=true;}else{b_=false;}return b_;};return g.New(null,null,b8,b6);};return h.Of(b3);},compareWith:function(cb,cc,cd){var ce,cf,cg,ch,ci,cj,ck;ce=f.Get(cc);try{cg=f.Get(cd);try{ci=0;cj=true;while(cj?ci===0:false){ck=[ce.MoveNext(),cg.MoveNext()];ck[0]?ck[1]?ci=(cb(ce.get_Current()))(cg.get_Current()):ci=1:ck[1]?ci=-1:cj=false;}ch=ci;}finally{cg.Dispose!=undefined?cg.Dispose():null;}cf=ch;}finally{ce.Dispose!=undefined?ce.Dispose():null;}return cf;},contains:function(cl,cm){var cn,co,cp;cn=f.Get(cm);try{cp=false;while(!cp?cn.MoveNext():false){cp=a.Equals(cn.get_Current(),cl);}co=cp;}finally{cn.Dispose!=undefined?cn.Dispose():null;}return co;},countBy:function(cq,cr){var cs;cs=function(){var cu,cv,cw,cx,cy,cz,cA,cB,cD,cE;cu={};cv=f.Get(cr);try{cx=[];while(cv.MoveNext()){cy=cq(cv.get_Current());cz=a.Hash(cy);if(cu.hasOwnProperty(cz)){cA=void(cu[cz]=cu[cz]+1);}else{cx.push(cy);cA=void(cu[cz]=1);}}cB=function(cC){return[cC,cu[a.Hash(cC)]];};cD=cx.slice(0);cE=c.map(cB,cD);cw=cE;}finally{cv.Dispose!=undefined?cv.Dispose():null;}return cw;};return i.delay(cs);},distinct:function(cF){return j.distinctBy(function(cG){return cG;},cF);},distinctBy:function(cH,cI){var cJ;cJ=function(){var cL,cM,cN,cV,cX;cL=f.Get(cI);cM=b.prototype.constructor.apply(b,[]);cN=function(cO){var cP,cQ,cR,cS,cT,cU;cP=cH(cO);cQ=a.Hash(cP);cR=cM[cQ];if(a.Equals(cR,undefined)){cM[cQ]=[cP];cS=true;}else{if(k.contains(cP,cR)){cT=false;}else{cU=cR.push(cP);cT=true;}cS=cT;}return cS;};cV=function(){return cL.Dispose();};cX=function(cY){var cZ,c0,c1,c2;if(cL.MoveNext()){c0=cL.get_Current();c1=cN(c0);while(!c1?cL.MoveNext():false){c0=cL.get_Current();c1=cN(c0);}if(c1){cY.c=c0;c2=true;}else{c2=false;}cZ=c2;}else{cZ=false;}return cZ;};return g.New(null,null,cX,cV);};return h.Of(cJ);},except:function(c3,c4){var c5;c5=function(){var c7,c8,c9,de,df,dg,dh,di,dk;c7=f.Get(c4);c8=b.prototype.constructor.apply(b,[]);c9=function(c_){var c$,da,db,dc,dd;c$=a.Hash(c_);da=c8[c$];if(a.Equals(da,undefined)){c8[c$]=[c_];db=true;}else{if(k.contains(c_,da)){dc=false;}else{dd=da.push(c_);dc=true;}db=dc;}return db;};de=f.Get(c3);try{while(de.MoveNext()){dg=de.get_Current();dh=c9(dg);}}finally{de.Dispose!=undefined?de.Dispose():null;}di=function(){return c7.Dispose();};dk=function(dl){var dm,dn,_do,dp;if(c7.MoveNext()){dn=c7.get_Current();_do=c9(dn);while(!_do?c7.MoveNext():false){dn=c7.get_Current();_do=c9(dn);}if(_do){dl.c=dn;dp=true;}else{dp=false;}dm=dp;}else{dm=false;}return dm;};return g.New(null,null,dk,di);};return h.Of(c5);},groupBy:function(dq,dr){return i.delay(function(){var dt,du,dv,dw,dx,dy,dz,dA;dt={};du={};dv=[];dw=f.Get(dr);try{while(dw.MoveNext()){dy=dw.get_Current();dz=dq(dy);dA=a.Hash(dz);!dt.hasOwnProperty(dA)?dv.push(dz):null;du[dA]=dz;dt.hasOwnProperty(dA)?dt[dA].push(dy):void(dt[dA]=[dy]);}dx=c.map(function(dB){return[dB,dt[a.Hash(dB)]];},dv);}finally{dw.Dispose!=undefined?dw.Dispose():null;}return dx;});},insufficient:function(){return d.FailWith("The input sequence has an insufficient number of elements.");},last:function(dC){var dD,dE,dF,dG;dD=f.Get(dC);try{dF=dD.MoveNext();if(!dF){dG=j.insufficient();}else{while(dD.MoveNext()){}dG=dD.get_Current();}dE=dG;}finally{dD.Dispose!=undefined?dD.Dispose():null;}return dE;},nonNegative:function(){return d.FailWith("The input must be non-negative.");},pairwise:function(dH){var dI,dK;dI=function(dJ){return[c.get(dJ,0),c.get(dJ,1)];};dK=j.windowed(2,dH);return i.map(dI,dK);},truncate:function(dL,dM){return i.delay(function(){return i.enumUsing(f.Get(dM),function(dO){var dP;dP=[0];return i.enumWhile(function(){return dO.MoveNext()?dP[0]<dL:false;},i.delay(function(){l.incr(dP);return[dO.get_Current()];}));});});},tryHead:function(dS){var dT,dU;dT=f.Get(dS);try{dU=dT.MoveNext()?{$:1,$0:dT.get_Current()}:{$:0};}finally{dT.Dispose!=undefined?dT.Dispose():null;}return dU;},tryItem:function(dV,dW){var dX,dY,dZ,d0,d1;if(dV<0){dX={$:0};}else{dY=0;dZ=f.Get(dW);try{d1=true;while(d1?dY<=dV:false){dZ.MoveNext()?dY=dY+1:d1=false;}d0=d1?{$:1,$0:dZ.get_Current()}:{$:0};}finally{dZ.Dispose!=undefined?dZ.Dispose():null;}dX=d0;}return dX;},tryLast:function(d2){var d3,d4,d5;d3=f.Get(d2);try{if(d3.MoveNext()){while(d3.MoveNext()){}d5={$:1,$0:d3.get_Current()};}else{d5={$:0};}d4=d5;}finally{d3.Dispose!=undefined?d3.Dispose():null;}return d4;},unfold:function(d6,d7){var d8;d8=function(){var d_;d_=function(d$){var ea,eb,ec,ed;ea=d6(d$.s);if(ea.$==0){eb=false;}else{ec=ea.$0[0];ed=ea.$0[1];d$.c=ec;d$.s=ed;eb=true;}return eb;};return g.New(d7,null,d_,function(){});};return h.Of(d8);},windowed:function(ef,eg){ef<=0?d.FailWith("The input must be positive."):null;return i.delay(function(){return i.enumUsing(f.Get(eg),function(ei){var ej;ej=[];return i.append(i.enumWhile(function(){return ej.length<ef?ei.MoveNext():false;},i.delay(function(){ej.push(ei.get_Current());return i.empty();})),i.delay(function(){return ej.length===ef?i.append([ej.slice(0)],i.delay(function(){return i.enumWhile(function(){return ei.MoveNext();},i.delay(function(){ej.shift();ej.push(ei.get_Current());return[ej.slice(0)];}));})):i.empty();}));});});}},WebSharper:{Activator:{Activate:$.Field(function(){var eq,er;if(m.hasDocument()){er=n.getElementById("websharper-data");eq=er?o(n).ready(function(){var et,eu,ev,eB;et=er.getAttribute("content");eu=p.Activate(q.parse(et));ev=function(ew){var ex,ey,ez,eA;ex=ew[0];ey=ew[1];ez=ey.get_Body();eA=n.getElementById(ex);return ez.ReplaceInDom(eA);};eB=s.GetFields(eu);return c.iter(ev,eB);}):null;}else{eq=null;}return eq;}),hasDocument:function(){var $0=this,$this=this;return typeof $$.document!=="undefined";}},AggregateException:$.Class({},{New:function(eC){return $.New(this,t.New1("One or more errors occurred.",eC));},New1:function(eD){return $.New(this,u.New1(eD));}}),ArgumentException:$.Class({},{New:function(){return $.New(this,v.New1("Value does not fall within the expected range."));},New1:function(eF){return $.New(this,u.New1(eF));}}),Arrays:{average:function(eG){return w(c.sum(eG))/w(eG.length);},averageBy:function(eH,eI){return w(c.sumBy(eH,eI))/w(eI.length);},blit:function(eJ,eK,eL,eM,eN){var eO;c.checkRange(eJ,eK,eN);c.checkRange(eL,eM,eN);for(eO=0;eO<=eN-1;eO++){c.set(eL,eM+eO,c.get(eJ,eK+eO));}return;},checkBounds:function(eP,eQ){return(eQ<0?true:eQ>=eP.length)?d.FailWith("Index was outside the bounds of the array."):null;},checkBounds2D:function(eR,eS,eT){return(((eS<0?true:eT<0)?true:eS>=eR.length)?true:eT>=(eR.length?eR[0].length:0))?d.Raise(x.New()):null;},checkLength:function(eU,eV){return eU.length!==eV.length?d.FailWith("Arrays differ in length."):null;},checkRange:function(eW,eX,eY){return((eY<0?true:eX<0)?true:eW.length<eX+eY)?d.FailWith("Index was outside the bounds of the array."):null;},choose:function(eZ,e0){var e1,e2,e3,e4,e5;e1=[];for(e2=0;e2<=e0.length-1;e2++){e3=eZ(c.get(e0,e2));if(e3.$==0){e4=null;}else{e5=e3.$0;e4=e1.push(e5);}}return e1;},chunkBySize:function(e6,e7){var e8;e8=j.chunkBySize(e6,e7);return i.toArray(e8);},collect:function(e9,e_){return b.prototype.concat.apply([],c.map(e9,e_));},compareWith:function(e$,fa,fb){return j.compareWith(e$,fa,fb);},concat:function(fc){return b.prototype.concat.apply([],c.ofSeq(fc));},contains:function(fd,fe){return j.contains(fd,fe);},countBy:function(ff,fg){var fh;fh=j.countBy(ff,fg);return i.toArray(fh);},create:function(fi,fj){var fk,fl;fk=b(fi);for(fl=0;fl<=fi-1;fl++){c.set(fk,fl,fj);}return fk;},create2D:function(fm){var fn,fp,fq;fn=function(fo){return c.ofSeq(fo);};fp=i.map(fn,fm);fq=c.ofSeq(fp);fq.dims=2;return fq;},distinct:function(fr){var fs;fs=j.distinct(fr);return i.toArray(fs);},distinctBy:function(ft,fu){var fv;fv=j.distinctBy(ft,fu);return i.toArray(fv);},exactlyOne:function(fw){return c.length(fw)===1?c.get(fw,0):d.FailWith("The input does not have precisely one element.");},except:function(fx,fy){var fz;fz=j.except(fx,fy);return i.toArray(fz);},exists2:function(fA,fB,fC){c.checkLength(fB,fC);return i.exists2(fA,fB,fC);},fill:function(fD,fE,fF,fG){var fH;c.checkRange(fD,fE,fF);for(fH=fE;fH<=fE+fF-1;fH++){c.set(fD,fH,fG);}return;},filter:function(fI,fJ){var fK,fL;fK=[];for(fL=0;fL<=fJ.length-1;fL++){fI(c.get(fJ,fL))?fK.push(c.get(fJ,fL)):null;}return fK;},find:function(fM,fN){var fO,fP,fQ;fO=c.tryFind(fM,fN);if(fO.$==0){fP=d.FailWith("KeyNotFoundException");}else{fQ=fO.$0;fP=fQ;}return fP;},findBack:function(fR,fS){var fT,fU,fV;fT=k.tryFindBack(fR,fS);if(fT.$==0){fU=d.FailWith("KeyNotFoundException");}else{fV=fT.$0;fU=fV;}return fU;},findINdex:function(fW,fX){var fY,fZ,f0;fY=c.tryFindIndex(fW,fX);if(fY.$==0){fZ=d.FailWith("KeyNotFoundException");}else{f0=fY.$0;fZ=f0;}return fZ;},findIndexBack:function(f1,f2){var f3,f4,f5;f3=k.tryFindIndexBack(f1,f2);if(f3.$==0){f4=d.FailWith("KeyNotFoundException");}else{f5=f3.$0;f4=f5;}return f4;},fold:function(f6,f7,f8){var f9,f_;f9=f7;for(f_=0;f_<=f8.length-1;f_++){f9=(f6(f9))(c.get(f8,f_));}return f9;},fold2:function(f$,ga,gb,gc){var gd,ge;c.checkLength(gb,gc);gd=ga;for(ge=0;ge<=gb.length-1;ge++){gd=((f$(gd))(c.get(gb,ge)))(c.get(gc,ge));}return gd;},foldBack:function(gf,gg,gh){var gi,gj,gk;gi=gh;gj=gg.length;for(gk=1;gk<=gj;gk++){gi=(gf(c.get(gg,gj-gk)))(gi);}return gi;},foldBack2:function(gl,gm,gn,go){var gp,gq,gr;c.checkLength(gm,gn);gp=gm.length;gq=go;for(gr=1;gr<=gp;gr++){gq=((gl(c.get(gm,gp-gr)))(c.get(gn,gp-gr)))(gq);}return gq;},forall2:function(gs,gt,gu){c.checkLength(gt,gu);return i.forall2(gs,gt,gu);},get:function(gv,gw){c.checkBounds(gv,gw);return gv[gw];},get2D:function(gx,gy,gz){c.checkBounds2D(gx,gy,gz);return gx[gy][gz];},groupBy:function(gA,gB){var gC,gG,gH;gC=function(gD){var gE,gF;gE=gD[0];gF=gD[1];return[gE,i.toArray(gF)];};gG=j.groupBy(gA,gB);gH=i.toArray(gG);return c.map(gC,gH);},head:function(gI){return e.head(e.ofArray(gI));},indexed:function(gJ){return c.mapi(function(gK){return function(gL){return[gK,gL];};},gJ);},init:function(gM,gN){var gO,gP;gM<0?d.FailWith("Negative size given."):null;gO=b(gM);for(gP=0;gP<=gM-1;gP++){c.set(gO,gP,gN(gP));}return gO;},iter:function(gQ,gR){var gS;for(gS=0;gS<=gR.length-1;gS++){gQ(c.get(gR,gS));}return;},iter2:function(gT,gU,gV){var gW;c.checkLength(gU,gV);for(gW=0;gW<=gU.length-1;gW++){(gT(c.get(gU,gW)))(c.get(gV,gW));}return;},iteri:function(gX,gY){var gZ;for(gZ=0;gZ<=gY.length-1;gZ++){(gX(gZ))(c.get(gY,gZ));}return;},iteri2:function(g0,g1,g2){var g3;c.checkLength(g1,g2);for(g3=0;g3<=g1.length-1;g3++){((g0(g3))(c.get(g1,g3)))(c.get(g2,g3));}return;},last:function(g4){return j.last(g4);},length:function(g5){var g6;g6=g5.dims;return g6===2?g5.length*g5.length:g5.length;},map:function(g7,g8){var g9,g_;g9=b(g8.length);for(g_=0;g_<=g8.length-1;g_++){c.set(g9,g_,g7(c.get(g8,g_)));}return g9;},map2:function(g$,ha,hb){var hc,hd;c.checkLength(ha,hb);hc=b(hb.length);for(hd=0;hd<=hb.length-1;hd++){c.set(hc,hd,(g$(c.get(ha,hd)))(c.get(hb,hd)));}return hc;},map3:function(he,hf,hg,hh){var hi;hi=y.map3(he,e.ofArray(hf),e.ofArray(hg),e.ofArray(hh));return c.ofSeq(hi);},mapi:function(hj,hk){var hl,hm;hl=b(hk.length);for(hm=0;hm<=hk.length-1;hm++){c.set(hl,hm,(hj(hm))(c.get(hk,hm)));}return hl;},mapi2:function(hn,ho,hp){var hq,hr;c.checkLength(ho,hp);hq=b(ho.length);for(hr=0;hr<=ho.length-1;hr++){c.set(hq,hr,((hn(hr))(c.get(ho,hr)))(c.get(hp,hr)));}return hq;},max:function(hs){return c.reduce(function(ht){return function(hu){return d.Max(ht,hu);};},hs);},maxBy:function(hv,hw){return c.reduce(function(hx){return function(hy){return a.Compare(hv(hx),hv(hy))===1?hx:hy;};},hw);},min:function(hz){return c.reduce(function(hA){return function(hB){return d.Min(hA,hB);};},hz);},minBy:function(hC,hD){return c.reduce(function(hE){return function(hF){return a.Compare(hC(hE),hC(hF))===-1?hE:hF;};},hD);},nonEmpty:function(hG){return hG.length===0?d.FailWith("The input array was empty."):null;},ofSeq:function(hH){var hI,hJ,hK;hI=[];hJ=f.Get(hH);try{while(hJ.MoveNext()){hI.push(hJ.get_Current());}hK=hI;}finally{hJ.Dispose!=undefined?hJ.Dispose():null;}return hK;},pairwise:function(hL){var hM;hM=j.pairwise(hL);return i.toArray(hM);},partition:function(hN,hO){var hP,hQ,hR;hP=[];hQ=[];for(hR=0;hR<=hO.length-1;hR++){hN(c.get(hO,hR))?hP.push(c.get(hO,hR)):hQ.push(c.get(hO,hR));}return[hP,hQ];},permute:function(hS,hT){var hU,hV;hU=b(hT.length);for(hV=0;hV<=hT.length-1;hV++){c.set(hU,hS(hV),c.get(hT,hV));}return hU;},pick:function(hW,hX){var hY,hZ,h0;hY=c.tryPick(hW,hX);if(hY.$==0){hZ=d.FailWith("KeyNotFoundException");}else{h0=hY.$0;hZ=h0;}return hZ;},reduce:function(h1,h2){var h3,h4;c.nonEmpty(h2);h3=c.get(h2,0);for(h4=1;h4<=h2.length-1;h4++){h3=(h1(h3))(c.get(h2,h4));}return h3;},reduceBack:function(h5,h6){var h7,h8,h9;c.nonEmpty(h6);h7=h6.length;h8=c.get(h6,h7-1);for(h9=2;h9<=h7;h9++){h8=(h5(c.get(h6,h7-h9)))(h8);}return h8;},replicate:function(h_,h$){return c.create(h_,h$);},reverse:function(ia,ib,ic){var id;id=c.sub(ia,ib,ic).slice().reverse();return c.blit(id,0,ia,ib,c.length(id));},scan:function(ie,_if,ig){var ih,ii;ih=b(1+ig.length);c.set(ih,0,_if);for(ii=0;ii<=ig.length-1;ii++){c.set(ih,ii+1,(ie(c.get(ih,ii)))(c.get(ig,ii)));}return ih;},scanBack:function(ij,ik,il){var im,_in,io;im=ik.length;_in=b(1+im);c.set(_in,im,il);for(io=0;io<=im-1;io++){c.set(_in,im-io-1,(ij(c.get(ik,im-io-1)))(c.get(_in,im-io)));}return _in;},set:function(ip,iq,ir){c.checkBounds(ip,iq);ip[iq]=ir;return;},set2D:function(is,it,iu,iv){c.checkBounds2D(is,it,iu);is[it][iu]=iv;return;},setSub:function(iw,ix,iy,iz){var iA;for(iA=0;iA<=iy-1;iA++){c.set(iw,ix+iA,c.get(iz,iA));}return;},setSub2D:function(iB,iC,iD,iE,iF,iG){var iH,iI;for(iH=0;iH<=iE-1;iH++){for(iI=0;iI<=iF-1;iI++){c.set2D(iB,iC+iH,iD+iI,c.get2D(iG,iH,iI));}}return;},skip:function(iJ,iK){return iJ<0?j.nonNegative():iJ>c.length(iK)?j.insufficient():iK.slice(iJ);},skipWhile:function(iL,iM){var iN,iO;iN=c.length(iM);iO=0;while(iO<iN?iL(c.get(iM,iO)):false){iO=iO+1;}return iM.slice(iO);},sort:function(iP){return c.sortBy(function(iQ){return iQ;},iP);},sortBy:function(iR,iS){return iS.slice().sort(function(iT,iU){return d.Compare(iR(iT),iR(iU));});},sortByDescending:function(iV,iW){return iW.slice().sort(function(iX,iY){return-d.Compare(iV(iX),iV(iY));});},sortDescending:function(iZ){return c.sortByDescending(function(i0){return i0;},iZ);},sortInPlace:function(i1){return c.sortInPlaceBy(function(i2){return i2;},i1);},sortInPlaceBy:function(i3,i4){return i4.sort(function(i5,i6){return d.Compare(i3(i5),i3(i6));});},sortInPlaceWith:function(i7,i8){return i8.sort(function(i9,i_){return(i7(i9))(i_);});},sortWith:function(i$,ja){return ja.slice().sort(function(jb,jc){return(i$(jb))(jc);});},splitAt:function(jd,je){return[c.take(jd,je),c.skip(jd,je)];},sub:function(jf,jg,jh){c.checkRange(jf,jg,jh);return jf.slice(jg,jg+jh);},sub2D:function(ji,jj,jk,jl,jm){var jn,jo,jp,jq,jr;jn=jl<0?0:jl;jo=jm<0?0:jm;jp=c.zeroCreate2D(jn,jo);for(jq=0;jq<=jn-1;jq++){for(jr=0;jr<=jo-1;jr++){c.set2D(jp,jq,jr,c.get2D(ji,jj+jq,jk+jr));}}return jp;},sum:function($arr){var $0=this,$this=this;var sum=0;for(var i=0;i<$arr.length;i++)sum+=$arr[i];return sum;},sumBy:function($f,$arr){var $0=this,$this=this;var sum=0;for(var i=0;i<$arr.length;i++)sum+=$f($arr[i]);return sum;},tail:function(js){return c.skip(1,js);},take:function(jt,ju){return jt<0?j.nonNegative():jt>c.length(ju)?j.insufficient():ju.slice(0,jt);},takeWhile:function(jv,jw){var jx,jy;jx=c.length(jw);jy=0;while(jy<jx?jv(c.get(jw,jy)):false){jy=jy+1;}return jw.slice(0,jy);},truncate:function(jz,jA){return jA.slice(jz);},tryFind:function(jB,jC){var jD,jE;jD={$:0};jE=0;while(jE<jC.length?jD.$==0:false){jB(c.get(jC,jE))?jD={$:1,$0:c.get(jC,jE)}:null;jE=jE+1;}return jD;},tryFindIndex:function(jF,jG){var jH,jI;jH={$:0};jI=0;while(jI<jG.length?jH.$==0:false){jF(c.get(jG,jI))?jH={$:1,$0:jI}:null;jI=jI+1;}return jH;},tryHead:function(jJ){return c.length(jJ)===0?{$:0}:{$:1,$0:jJ[0]};},tryItem:function(jK,jL){return(c.length(jL)<=jK?true:jK<0)?{$:0}:{$:1,$0:jL[jK]};},tryLast:function(jM){var jN;jN=c.length(jM);return jN===0?{$:0}:{$:1,$0:jM[jN-1]};},tryPick:function(jO,jP){var jQ,jR,jS;jQ={$:0};jR=0;while(jR<jP.length?jQ.$==0:false){jS=jO(c.get(jP,jR));jS.$==1?jQ=jS:null;jR=jR+1;}return jQ;},unfold:function(jT,jU){var jV;jV=j.unfold(jT,jU);return i.toArray(jV);},unzip:function(jW){var jX,jY,jZ,j0,j1,j2;jX=[];jY=[];for(jZ=0;jZ<=jW.length-1;jZ++){j0=c.get(jW,jZ);j1=j0[1];j2=j0[0];jX.push(j2);jY.push(j1);}return[jX,jY];},unzip3:function(j3){var j4,j5,j6,j7,j8,j9,j_,j$;j4=[];j5=[];j6=[];for(j7=0;j7<=j3.length-1;j7++){j8=c.get(j3,j7);j9=j8[2];j_=j8[1];j$=j8[0];j4.push(j$);j5.push(j_);j6.push(j9);}return[j4,j5,j6];},windowed:function(ka,kb){var kc;kc=j.windowed(ka,kb);return i.toArray(kc);},zeroCreate2D:function(kd,ke){var kf;kf=c.init(kd,function(){return b(ke);});kf.dims=2;return kf;},zip:function(kh,ki){var kj,kk;c.checkLength(kh,ki);kj=b(kh.length);for(kk=0;kk<=kh.length-1;kk++){c.set(kj,kk,[c.get(kh,kk),c.get(ki,kk)]);}return kj;},zip3:function(kl,km,kn){var ko,kp;c.checkLength(kl,km);c.checkLength(km,kn);ko=b(kl.length);for(kp=0;kp<=kl.length-1;kp++){c.set(ko,kp,[c.get(kl,kp),c.get(km,kp),c.get(kn,kp)]);}return ko;}},Arrays2D:{copy:function(kq){return z.init(kq.length,kq.length?kq[0].length:0,function(kr){return function(ks){return c.get2D(kq,kr,ks);};});},init:function(kt,ku,kv){var kw,kx,ky;kw=c.zeroCreate2D(kt,ku);for(kx=0;kx<=kt-1;kx++){for(ky=0;ky<=ku-1;ky++){c.set2D(kw,kx,ky,(kv(kx))(ky));}}return kw;},iter:function(kz,kA){var kB,kC,kD,kE;kB=kA.length;kC=kA.length?kA[0].length:0;for(kD=0;kD<=kB-1;kD++){for(kE=0;kE<=kC-1;kE++){kz(c.get2D(kA,kD,kE));}}return;},iteri:function(kF,kG){var kH,kI,kJ,kK;kH=kG.length;kI=kG.length?kG[0].length:0;for(kJ=0;kJ<=kH-1;kJ++){for(kK=0;kK<=kI-1;kK++){((kF(kJ))(kK))(c.get2D(kG,kJ,kK));}}return;},map:function(kL,kM){return z.init(kM.length,kM.length?kM[0].length:0,function(kN){return function(kO){return kL(c.get2D(kM,kN,kO));};});},mapi:function(kP,kQ){return z.init(kQ.length,kQ.length?kQ[0].length:0,function(kR){return function(kS){return((kP(kR))(kS))(c.get2D(kQ,kR,kS));};});}},AsyncProxy:$.Class({},{get_CancellationToken:function(){return A.GetCT();},get_DefaultCancellationToken:function(){return(A.defCTS())[0];}}),CancellationTokenSource:$.Class({Cancel:function(){var kT,kU,kY,kZ;if(!this.c){this.c=true;kU=function(kV){var kW,kX;try{kV(null);kW={$:0};}catch(kX){kW={$:1,$0:kX};}return kW;};kY=this.r;kZ=c.choose(kU,kY);kT=c.length(kZ)>0?d.Raise(t.New(kZ)):null;}else{kT=null;}return kT;},Cancel1:function(k0){var k1,k2,k3,k5;if(!k0){k1=this.Cancel();}else{if(!this.c){this.c=true;k3=function(k4){return k4(null);};k5=this.r;k2=c.iter(k3,k5);}else{k2=null;}k1=k2;}return k1;},CancelAfter:function(k6){var k7,k8,k_,la=this;if(!this.c){k8=this.pending;B.iter(function(k9){return C(k9);},k8);k_=D(function(){return la.Cancel();},k6);k7=void(this.pending={$:1,$0:k_});}else{k7=null;}return k7;},get_IsCancellationRequested:function(){return this.c;}},{CreateLinkedTokenSource:function(lb,lc){return E.CreateLinkedTokenSource1([lb,lc]);},CreateLinkedTokenSource1:function(ld){var le,lf;le=E.New();lf=function(lg){var lh;lh=A.Register(lg,function(){return function(){return le.Cancel();}();});return;};return c.iter(lf,ld);},New:function(){var lk;lk=$.New(this,{});lk.c=false;lk.pending={$:0};lk.r=[];return lk;}}),Char:$.Class({},{GetNumericValue:function(ll){return(ll>=48?ll<=57:false)?w(ll)-w(48):-1;},IsControl:function(lm){return(lm>=0?lm<=31:false)?true:lm>=128?lm<=159:false;},IsDigit:function(ln){return ln>=48?ln<=57:false;},IsLetter:function(lo){return(lo>=65?lo<=90:false)?true:lo>=97?lo<=122:false;},IsLetterOrDigit:function(lp){return F.IsLetter(lp)?true:F.IsDigit(lp);},IsLower:function(lq){return lq>=97?lq<=122:false;},IsUpper:function(lr){return lr>=65?lr<=90:false;},IsWhiteSpace:function($c){var $0=this,$this=this;return $$.String.fromCharCode($c).match(/\s/)!==null;},Parse:function(ls){return ls.length===1?ls.charCodeAt(0):d.FailWith("String must be exactly one character long.");}}),Concurrency:{AwaitEvent:function(lt,lu){var lv;lv=function(lw){var lx,ly,lz,lA,lB,lC;lx=function(){return G.subscribeTo(lt,function(lE){var lF;H.Force(ly).Dispose();H.Force(lA).Dispose();lF=function(){return lw.k.call(null,{$:0,$0:lE});};return A.scheduler().Fork(lF);});};ly=H.Create(lx);lz=function(){return A.Register(lw.ct,function(){var lJ,lK,lL;if(lu.$==1){lK=lu.$0;lJ=lK(null);}else{H.Force(ly).Dispose();lL=function(){return lw.k.call(null,{$:2,$0:I.New()});};lJ=A.scheduler().Fork(lL);}return lJ;});};lA=H.Create(lz);lB=H.Force(ly);lC=H.Force(lA);return null;};return A.checkCancel(lv);},Bind:function(lN,lO){var lP;lP=function(lQ){return lN({k:function(lR){var lS,lT,lU,lY;if(lR.$==0){lT=lR.$0;lU=function(){var lW,lX;try{lW=(lO(lT))(lQ);}catch(lX){lW=lQ.k.call(null,{$:1,$0:lX});}return lW;};lS=A.scheduler().Fork(lU);}else{lY=function(){return lQ.k.call(null,lR);};lS=A.scheduler().Fork(lY);}return lS;},ct:lQ.ct});};return A.checkCancel(lP);},Catch:function(l0){var l1;l1=function(l2){var l3,l8;try{l3=l0({k:function(l4){var l5,l6,l7;if(l4.$==0){l6=l4.$0;l5=l2.k.call(null,{$:0,$0:{$:0,$0:l6}});}else{if(l4.$==1){l7=l4.$0;l5=l2.k.call(null,{$:0,$0:{$:1,$0:l7}});}else{l5=l2.k.call(null,l4);}}return l5;},ct:l2.ct});}catch(l8){l3=l2.k.call(null,{$:0,$0:{$:1,$0:l8}});}return l3;};return A.checkCancel(l1);},Combine:function(l9,l_){return A.Bind(l9,function(){return l_;});},Delay:function(ma){var mb;mb=function(mc){var md,me;try{md=(ma(null))(mc);}catch(me){md=mc.k.call(null,{$:1,$0:me});}return md;};return A.checkCancel(mb);},For:function(mf,mg){return A.Using(f.Get(mf),function(mh){return A.While(function(){return mh.MoveNext();},A.Delay(function(){return mg(mh.get_Current());}));});},FromContinuations:function(mk){var ml;ml=function(mm){var mn,mo;mn=[false];mo=function(mp){var mq;if(mn[0]){mq=d.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");}else{mn[0]=true;mq=A.scheduler().Fork(mp);}return mq;};return mk([function(mr){return mo(function(){return mm.k.call(null,{$:0,$0:mr});});},function(mt){return mo(function(){return mm.k.call(null,{$:1,$0:mt});});},function(mv){return mo(function(){return mm.k.call(null,{$:2,$0:mv});});}]);};return A.checkCancel(ml);},GetCT:$.Field(function(){var mx;mx=function(my){return my.k.call(null,{$:0,$0:my.ct});};return A.checkCancel(mx);}),Ignore:function(mz){return A.Bind(mz,function(){return A.Return(null);});},OnCancel:function(mB){var mC;mC=function(mD){return mD.k.call(null,{$:0,$0:A.Register(mD.ct,mB)});};return A.checkCancel(mC);},Parallel:function(mE){var mF,mG,mH;mF=c.ofSeq(mE);if(c.length(mF)===0){mG=A.Return([]);}else{mH=function(mI){var mJ,mK,mL,mM;mJ=mF.length;mK=[mJ];mL=c.create(mJ,undefined);mM=function(mN){return function(mO){var mP,mQ,mR,mS,mT,mU,mV,mW,mX;mP=[mK[0],mO];if(mP[0]===0){mQ=null;}else{if(mP[0]===1){if(mP[1].$==0){mS=mP[1].$0;c.set(mL,mN,mS);mK[0]=0;mR=mI.k.call(null,{$:0,$0:mL});}else{mP[0];mT=mP[1];mK[0]=0;mR=mI.k.call(null,mT);}mQ=mR;}else{if(mP[1].$==0){mV=mP[1].$0;mW=mP[0];c.set(mL,mN,mV);mU=void(mK[0]=mW-1);}else{mP[0];mX=mP[1];mK[0]=0;mU=mI.k.call(null,mX);}mQ=mU;}}return mQ;};};return c.iteri(function(mY){return function(mZ){var m0;m0=function(){return mZ({k:mM(mY),ct:mI.ct});};return A.scheduler().Fork(m0);};},mF);};mG=A.checkCancel(mH);}return mG;},Register:function(m2,m3){var m4;m4=m2.r.push(m3)-1;return{Dispose:function(){return c.set(m2.r,m4,function(){});}};},Return:function(m7){var m8;m8=function(m9){return m9.k.call(null,{$:0,$0:m7});};return A.checkCancel(m8);},Scheduler:$.Class({Fork:function(m_){var m$,na,nc=this;this.robin.push(m_);if(this.idle){this.idle=false;na=D(function(){return nc.tick();},0);m$=void na;}else{m$=null;}return m$;},tick:function(){var nd,ne,nf,ng,nh,ni,nk=this;nd=J.now();ne=true;while(ne){nf=this.robin.length;if(nf===0){this.idle=true;ng=ne=false;}else{(this.robin.shift())(null);if(J.now()-nd>40){ni=D(function(){return nk.tick();},0);nh=ne=false;}else{nh=null;}ng=nh;}}return;}},{New:function(){var nl;nl=$.New(this,{});nl.idle=true;nl.robin=[];return nl;}}),Sleep:function(nm){var nn;nn=function(no){var np,nq,nr,ns,nt,nu;np=function(){return D(function(){var nx;H.Force(ns).Dispose();nx=function(){return no.k.call(null,{$:0,$0:null});};return A.scheduler().Fork(nx);},nm);};nq=H.Create(np);nr=function(){return A.Register(no.ct,function(){var nB;C(H.Force(nq));nB=function(){return no.k.call(null,{$:2,$0:I.New()});};return A.scheduler().Fork(nB);});};ns=H.Create(nr);nt=H.Force(nq);nu=H.Force(ns);return null;};return A.checkCancel(nn);},Start:function(nD,nE){return A.StartWithContinuations(nD,function(){},function(nG){var nH;nH=[nG];return K?K.log.apply(K,["WebSharper: Uncaught asynchronous exception"].concat(nH)):undefined;},function(){},nE);},StartChild:function(nJ,nK){var nL;nL=function(nM){var nN,nO,nP,nQ,nR,nS,nT,nW,n2,n8;nN=[true];nO=[{$:0}];nP=[];if(nK.$==1){nS=nK.$0;nT=D(function(){var nV;nN[0]=false;nV={$:1,$0:L.New()};while(nP.length>0){(nP.shift())(nV);}return;},nS);nR={$:1,$0:nT};}else{nR={$:0};}nQ=nR;nW=function(){return nJ({k:function(nY){var nZ,n0,n1;if(nN[0]){nO[0]={$:1,$0:nY};if(nQ.$==1){n1=nQ.$0;n0=C(n1);}else{n0=null;}while(nP.length>0){(nP.shift())(nY);}}else{nZ=null;}return nZ;},ct:nM.ct});};A.scheduler().Fork(nW);n2=function(n3){var n4,n5,n6,n7;if(nN[0]){n5=nO[0];if(n5.$==0){n6=nP.push(n3.k);}else{n7=n5.$0;n6=n3.k.call(null,n7);}n4=n6;}else{n4=n3.k.call(null,{$:1,$0:L.New()});}return n4;};n8=A.checkCancel(n2);return nM.k.call(null,{$:0,$0:n8});};return A.checkCancel(nL);},StartWithContinuations:function(n9,n_,n$,oa,ob){var oc,od;oc=d.DefaultArg(ob,(A.defCTS())[0]);od=function(){return n9({k:function(of){var og,oh,oi,oj;if(of.$==1){oh=of.$0;og=n$(oh);}else{if(of.$==2){oi=of.$0;og=oa(oi);}else{oj=of.$0;og=n_(oj);}}return og;},ct:oc});};return A.scheduler().Fork(od);},TryCancelled:function(ok,ol){var om;om=function(on){return ok({k:function(oo){var op,oq;if(oo.$==2){oq=oo.$0;ol(oq);op=on.k.call(null,oo);}else{op=on.k.call(null,oo);}return op;},ct:on.ct});};return A.checkCancel(om);},TryFinally:function(or,os){var ot;ot=function(ou){return or({k:function(ov){var ow,ox;try{os(null);ow=ou.k.call(null,ov);}catch(ox){ow=ou.k.call(null,{$:1,$0:ox});}return ow;},ct:ou.ct});};return A.checkCancel(ot);},TryWith:function(oy,oz){var oA;oA=function(oB){return oy({k:function(oC){var oD,oE,oF,oG,oH;if(oC.$==0){oE=oC.$0;oD=oB.k.call(null,{$:0,$0:oE});}else{if(oC.$==1){oF=oC.$0;try{oG=(oz(oF))(oB);}catch(oH){oG=oB.k.call(null,oC);}oD=oG;}else{oD=oB.k.call(null,oC);}}return oD;},ct:oB.ct});};return A.checkCancel(oA);},Using:function(oI,oJ){return A.TryFinally(oJ(oI),function(){return oI.Dispose();});},While:function(oL,oM){return oL(null)?A.Bind(oM,function(){return A.While(oL,oM);}):A.Return(null);},checkCancel:function(oO){return function(oP){return oP.ct.c?oP.k.call(null,{$:2,$0:I.New()}):oO(oP);};},defCTS:$.Field(function(){return[E.New()];}),scheduler:$.Field(function(){return M.New();})},Control:{createEvent:function(oQ,oR,oS){return{AddHandler:oQ,RemoveHandler:oR,Subscribe:function(oT){var oU;oU=oS(function(){return function(oW){return oT.OnNext.call(null,oW);};});oQ(oU);return{Dispose:function(){return oR(oU);}};}};}},DateTimeHelpers:{AddMonths:function(oY,oZ){var o0;o0=new J(oY);return(new J(o0.getFullYear(),o0.getMonth()+oZ,o0.getDate(),o0.getHours(),o0.getMinutes(),o0.getSeconds(),o0.getMilliseconds())).getTime();},AddYears:function(o1,o2){var o3;o3=new J(o1);return(new J(o3.getFullYear()+o2,o3.getMonth(),o3.getDate(),o3.getHours(),o3.getMinutes(),o3.getSeconds(),o3.getMilliseconds())).getTime();},DatePortion:function(o4){var o5;o5=new J(o4);return(new J(o5.getFullYear(),o5.getMonth(),o5.getDate())).getTime();},LongDate:function($d){var $0=this,$this=this;return(new $$.Date($d)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});},LongTime:function($d){var $0=this,$this=this;return(new $$.Date($d)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});},Parse:function(o6){var o7;o7=J.parse(o6);return $$.isNaN(o7)?d.FailWith("Failed to parse date string."):o7;},ShortTime:function($d){var $0=this,$this=this;return(new $$.Date($d)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});},TimePortion:function(o8){var o9;o9=new J(o8);return(((24*0+o9.getHours())*60+o9.getMinutes())*60+o9.getSeconds())*1000+o9.getMilliseconds();}},Enumerable:{Of:function(o_){return{GetEnumerator:o_};}},Enumerator:{Get:function(o$){return o$ instanceof $$.Array?g.New(0,null,function(pa){var pb,pc;pb=pa.s;if(pb<c.length(o$)){pa.c=c.get(o$,pb);pa.s=pb+1;pc=true;}else{pc=false;}return pc;},function(){}):a.Equals(typeof o$,"string")?g.New(0,null,function(pe){var pf,pg;pf=pe.s;if(pf<o$.length){pe.c=o$.charCodeAt(pf);pe.s=pf+1;pg=true;}else{pg=false;}return pg;},function(){}):o$.GetEnumerator();},T:$.Class({Dispose:function(){return this.d.call(null,this);},MoveNext:function(){return this.n.call(null,this);},get_Current:function(){return this.c;}},{New:function(pi,pj,pk,pl){var pm;pm=$.New(this,{});pm.s=pi;pm.c=pj;pm.n=pk;pm.d=pl;return pm;}})},Exception:$.Class({},{New:function(){return $.New(this,u.New1("Exception of type 'System.Exception' was thrown."));},New1:function($message){var $0=this,$this=this;return new $$.Error($message);}}),Guid:$.Class({},{NewGuid:function(){var $0=this,$this=this;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=$$.Math.random()*16|0,v=c=="x"?r:r&0x3|0x8;return v.toString(16);});}}),HtmlContentExtensions:{"IControlBody.SingleNode.Static":function(pn){return O.New(pn);},SingleNode:$.Class({ReplaceInDom:function(po){var pp;pp=this.node.parentNode.replaceChild(this.node,po);return;}},{New:function(pq){var pr;pr=$.New(this,{});pr.node=pq;return pr;}})},IndexOutOfRangeException:$.Class({},{New:function(){return $.New(this,x.New1("Index was outside the bounds of the array."));},New1:function(ps){return $.New(this,u.New1(ps));}}),InvalidOperationException:$.Class({},{New:function(){return $.New(this,P.New1("Operation is not valid due to the current state of the object."));},New1:function(pt){return $.New(this,u.New1(pt));}}),JavaScript:{JSModule:{Delete:function($x,$field){var $0=this,$this=this;return delete $x[$field];},ForEach:function($x,$iter){var $0=this,$this=this;for(var k in $x){if($iter(k))break;}},GetFieldNames:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push(k);return r;},GetFieldValues:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push($o[k]);return r;},GetFields:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push([k,$o[k]]);return r;},Log:function($x){var $0=this,$this=this;if($$.console)$$.console.log($x);},LogMore:function($args){var $0=this,$this=this;if($$.console)$$.console.log.apply($$.console,$args);}},Pervasives:{NewFromList:function(pu){var pv,pw,px,py,pz,pA;pv={};pw=f.Get(pu);try{while(pw.MoveNext()){py=pw.get_Current();pz=py[1];pA=py[0];pv[pA]=pz;}}finally{pw.Dispose!=undefined?pw.Dispose():null;}return pv;}}},Json:{Activate:function(pB){var pC,pD,pE;pC=pB.$TYPES;for(pD=0;pD<=c.length(pC)-1;pD++){c.set(pC,pD,p.lookup(c.get(pC,pD)));}pE=function(pF){var pG,pH,pI,pJ,pK,pL,pM,pN;if(a.Equals(pF,null)){pG=pF;}else{pH=typeof pF;if(pH==="object"){if(pF instanceof $$.Array){pJ=p.shallowMap(pE,pF);}else{pK=p.shallowMap(pE,pF.$V);pL=pF.$T;if(a.Equals(typeof pL,"undefined")){pM=pK;}else{pN=new(c.get(pC,pL))();s.ForEach(pK,function(pO){pN[pO]=pK[pO];return false;});pM=pN;}pJ=pM;}pI=pJ;}else{pI=pF;}pG=pI;}return pG;};return pE(pB.$DATA);},lookup:function(pP){var pQ,pR,pS,pT,pU,pV;pQ=c.length(pP);pR=$$;pS=0;while(pS<pQ){pT=c.get(pP,pS);pU=pR[pT];if(!a.Equals(typeof pU,undefined)){pR=pU;pV=pS=pS+1;}else{pV=d.FailWith("Invalid server reply. Failed to find type: "+pT);}}return pR;},shallowMap:function(pW,pX){var pY,pZ,p0,p1;if(pX instanceof $$.Array){pY=c.map(pW,pX);}else{pZ=typeof pX;if(pZ==="object"){p1={};s.ForEach(pX,function(p2){p1[p2]=pW(pX[p2]);return false;});p0=p1;}else{p0=pX;}pY=p0;}return pY;}},Lazy:{Create:function(p3){var p4,p5;p4={value:undefined,created:false,eval:p3};p5=function(){var p7;if(p4.created){p7=p4.value;}else{p4.created=true;p4.value=p3(null);p7=p4.value;}return p7;};p4.eval=p5;return p4;},CreateFromValue:function(p8){return{value:p8,created:true,eval:function(){return p8;},eval:function(){return p8;}};},Force:function(p$){return p$.eval.call(null,null);}},List:{T:$.Class({GetEnumerator:function(){return g.New(this,null,function(qa){var qb,qc,qd,qe;qb=qa.s;if(qb.$==0){qc=false;}else{qd=qb.$1;qe=qb.$0;qa.c=qe;qa.s=qd;qc=true;}return qc;},function(){});},GetSlice:function(qg,qh){var qi,qj,qk,ql,qm,qn,qo,qp,qq,qr,qs,qt,qu;qi=[qg,qh];if(qi[0].$==1){if(qi[1].$==1){ql=qi[0].$0;qm=qi[1].$0;qn=qm-ql+1;qo=y.skip(ql,this);qp=i.take(qn,qo);qk=e.ofSeq(qp);}else{qq=qi[0].$0;qk=y.skip(qq,this);}qj=qk;}else{if(qi[1].$==1){qs=qi[1].$0;qt=qs+1;qu=i.take(qt,this);qr=e.ofSeq(qu);}else{qr=this;}qj=qr;}return qj;},get_Item:function(qv){return i.nth(qv,this);},get_Length:function(){return i.length(this);}}),append:function(qw,qx){return e.ofSeq(i.append(qw,qx));},choose:function(qy,qz){return e.ofSeq(i.choose(qy,qz));},chunkBySize:function(qA,qB){var qC,qE,qF;qC=function(qD){return e.ofArray(qD);};qE=j.chunkBySize(qA,qB);qF=i.toList(qE);return e.map(qC,qF);},collect:function(qG,qH){return e.ofSeq(i.collect(qG,qH));},compareWith:function(qI,qJ,qK){return j.compareWith(qI,qJ,qK);},concat:function(qL){return e.ofSeq(i.concat(qL));},contains:function(qM,qN){return j.contains(qM,qN);},countBy:function(qO,qP){var qQ;qQ=j.countBy(qO,qP);return i.toList(qQ);},distinct:function(qR){var qS;qS=j.distinct(qR);return i.toList(qS);},distinctBy:function(qT,qU){var qV;qV=j.distinctBy(qT,qU);return i.toList(qV);},exactlyOne:function(qW){var qX,qY,qZ;if(qW.$==1){if(qW.$1.$==0){qZ=qW.$0;qY=qZ;}else{qY=d.FailWith("The input does not have precisely one element.");}qX=qY;}else{qX=d.FailWith("The input does not have precisely one element.");}return qX;},except:function(q0,q1){var q2;q2=j.except(q0,q1);return i.toList(q2);},exists2:function(q3,q4,q5){return c.exists2(q3,c.ofSeq(q4),c.ofSeq(q5));},filter:function(q6,q7){return e.ofSeq(i.filter(q6,q7));},findBack:function(q8,q9){var q_,q$,ra;q_=e.tryFindBack(q8,q9);if(q_.$==0){q$=d.FailWith("KeyNotFoundException");}else{ra=q_.$0;q$=ra;}return q$;},findIndexBack:function(rb,rc){var rd,re,rf;rd=k.tryFindIndexBack(rb,c.ofSeq(rc));if(rd.$==0){re=d.FailWith("KeyNotFoundException");}else{rf=rd.$0;re=rf;}return re;},fold2:function(rg,rh,ri,rj){return c.fold2(rg,rh,c.ofSeq(ri),c.ofSeq(rj));},foldBack:function(rk,rl,rm){return c.foldBack(rk,c.ofSeq(rl),rm);},foldBack2:function(rn,ro,rp,rq){return c.foldBack2(rn,c.ofSeq(ro),c.ofSeq(rp),rq);},forall2:function(rr,rs,rt){return c.forall2(rr,c.ofSeq(rs),c.ofSeq(rt));},groupBy:function(ru,rv){var rw,rA,rB;rw=function(rx){var ry,rz;ry=rx[0];rz=rx[1];return[ry,i.toList(rz)];};rA=j.groupBy(ru,rv);rB=i.toList(rA);return e.map(rw,rB);},head:function(rC){var rD,rE;if(rC.$==1){rE=rC.$0;rD=rE;}else{rD=d.FailWith("The input list was empty.");}return rD;},indexed:function(rF){return e.mapi(function(rG){return function(rH){return[rG,rH];};},rF);},init:function(rI,rJ){return e.ofArray(c.init(rI,rJ));},iter2:function(rK,rL,rM){return c.iter2(rK,c.ofSeq(rL),c.ofSeq(rM));},iteri2:function(rN,rO,rP){return c.iteri2(rN,c.ofSeq(rO),c.ofSeq(rP));},last:function(rQ){return j.last(rQ);},map:function(rR,rS){return e.ofSeq(i.map(rR,rS));},map2:function(rT,rU,rV){return e.ofArray(c.map2(rT,c.ofSeq(rU),c.ofSeq(rV)));},mapFold:function(rW,rX,rY){var rZ,r0,r1;rZ=k.mapFold(rW,rX,c.ofSeq(rY));r0=rZ[0];r1=rZ[1];return[e.ofArray(r0),r1];},mapFoldBack:function(r2,r3,r4){var r5,r6,r7;r5=k.mapFoldBack(r2,c.ofSeq(r3),r4);r6=r5[0];r7=r5[1];return[e.ofArray(r6),r7];},mapi:function(r8,r9){return e.ofSeq(i.mapi(r8,r9));},mapi2:function(r_,r$,sa){return e.ofArray(c.mapi2(r_,c.ofSeq(r$),c.ofSeq(sa)));},max:function(sb){return i.reduce(function(sc){return function(sd){return d.Max(sc,sd);};},sb);},maxBy:function(se,sf){return i.reduce(function(sg){return function(sh){return a.Compare(se(sg),se(sh))===1?sg:sh;};},sf);},min:function(si){return i.reduce(function(sj){return function(sk){return d.Min(sj,sk);};},si);},minBy:function(sl,sm){return i.reduce(function(sn){return function(so){return a.Compare(sl(sn),sl(so))===-1?sn:so;};},sm);},ofArray:function(sp){var sq,sr;sq=$.New(Q,{$:0});for(sr=0;sr<=c.length(sp)-1;sr++){sq=$.New(Q,{$:1,$0:c.get(sp,c.length(sp)-sr-1),$1:sq});}return sq;},ofSeq:function(ss){var st,su,sv,sw,sx;st=$.New(Q,{$:0});su=st;sv=f.Get(ss);try{while(sv.MoveNext()){su.$=1;sx=$.New(Q,{$:0});su.$0=sv.get_Current();su.$1=sx;su=sx;}su.$=0;sw=st;}finally{sv.Dispose!=undefined?sv.Dispose():null;}return sw;},pairwise:function(sy){var sz;sz=j.pairwise(sy);return i.toList(sz);},partition:function(sA,sB){var sC,sD,sE;sC=c.partition(sA,c.ofSeq(sB));sD=sC[1];sE=sC[0];return[e.ofArray(sE),e.ofArray(sD)];},permute:function(sF,sG){return e.ofArray(c.permute(sF,c.ofSeq(sG)));},reduceBack:function(sH,sI){return c.reduceBack(sH,c.ofSeq(sI));},replicate:function(sJ,sK){return e.ofArray(c.create(sJ,sK));},rev:function(sL){var sM;sM=c.ofSeq(sL);sM.reverse();return e.ofArray(sM);},scan:function(sN,sO,sP){return e.ofSeq(i.scan(sN,sO,sP));},scanBack:function(sQ,sR,sS){return e.ofArray(c.scanBack(sQ,c.ofSeq(sR),sS));},singleton:function(sT){return e.ofArray([sT]);},sort:function(sU){var sV;sV=c.ofSeq(sU);c.sortInPlace(sV);return e.ofArray(sV);},sortBy:function(sW,sX){return e.sortWith(function(sY){return function(sZ){return d.Compare(sW(sY),sW(sZ));};},sX);},sortByDescending:function(s0,s1){return e.sortWith(function(s2){return function(s3){return-d.Compare(s0(s2),s0(s3));};},s1);},sortDescending:function(s4){var s5;s5=c.ofSeq(s4);k.sortInPlaceByDescending(function(s6){return s6;},s5);return e.ofArray(s5);},sortWith:function(s7,s8){var s9;s9=c.ofSeq(s8);c.sortInPlaceWith(s7,s9);return e.ofArray(s9);},splitAt:function(s_,s$){return[e.ofSeq(i.take(s_,s$)),y.skip(s_,s$)];},splitInto:function(ta,tb){var tc,te,tf;tc=function(td){return e.ofArray(td);};te=k.splitInto(ta,c.ofSeq(tb));tf=e.ofArray(te);return e.map(tc,tf);},tail:function(tg){var th,ti;if(tg.$==1){ti=tg.$1;th=ti;}else{th=d.FailWith("The input list was empty.");}return th;},tryFindBack:function(tj,tk){return k.tryFindBack(tj,c.ofSeq(tk));},tryHead:function(tl){var tm,tn;if(tl.$==0){tm={$:0};}else{tn=tl.$0;tm={$:1,$0:tn};}return tm;},tryItem:function(to,tp){return j.tryItem(to,tp);},tryLast:function(tq){return j.tryLast(tq);},unfold:function(tr,ts){var tt;tt=j.unfold(tr,ts);return i.toList(tt);},unzip:function(tu){var tv,tw,tx,ty,tz,tA,tB;tv=[];tw=[];tx=f.Get(tu);try{while(tx.MoveNext()){tz=tx.get_Current();tA=tz[1];tB=tz[0];tv.push(tB);tw.push(tA);}}finally{tx.Dispose!=undefined?tx.Dispose():null;}return[e.ofArray(tv.slice(0)),e.ofArray(tw.slice(0))];},unzip3:function(tC){var tD,tE,tF,tG,tH,tI,tJ,tK,tL;tD=[];tE=[];tF=[];tG=f.Get(tC);try{while(tG.MoveNext()){tI=tG.get_Current();tJ=tI[2];tK=tI[1];tL=tI[0];tD.push(tL);tE.push(tK);tF.push(tJ);}}finally{tG.Dispose!=undefined?tG.Dispose():null;}return[e.ofArray(tD.slice(0)),e.ofArray(tE.slice(0)),e.ofArray(tF.slice(0))];},windowed:function(tM,tN){var tO,tQ,tR;tO=function(tP){return e.ofArray(tP);};tQ=j.windowed(tM,tN);tR=i.map(tO,tQ);return i.toList(tR);},zip:function(tS,tT){return e.ofArray(c.zip(c.ofSeq(tS),c.ofSeq(tT)));},zip3:function(tU,tV,tW){return e.ofArray(c.zip3(c.ofSeq(tU),c.ofSeq(tV),c.ofSeq(tW)));}},MatchFailureException:$.Class({},{New:function(tX,tY,tZ){return $.New(this,u.New1(tX+" at "+$$.String(tY)+":"+$$.String(tZ)));}}),Nullable:{get:function(t0){return t0==null?d.FailWith("Nullable object must have a value."):t0;},getOrValue:function(t1,t2){return t1==null?t2:t1;}},OperationCanceledException:$.Class({},{New:function(){return $.New(this,I.New1("The operation was canceled."));},New1:function(t3){return $.New(this,u.New1(t3));}}),Operators:{Compare:function(t4,t5){return a.Compare(t4,t5);},DefaultArg:function(t6,t7){var t8,t9;if(t6.$==0){t8=t7;}else{t9=t6.$0;t8=t9;}return t8;},FailWith:function(t_){return d.Raise(u.New1(t_));},KeyValue:function(t$){return[t$.K,t$.V];},Max:function(ua,ub){return a.Compare(ua,ub)===1?ua:ub;},Min:function(uc,ud){return a.Compare(uc,ud)===-1?uc:ud;},Pown:function(ue,uf){var ug;ug=function(uh){var ui,uj,uk;if(uh===1){ui=ue;}else{if(uh%2===0){uk=ug(uh/2>>0);uj=uk*uk;}else{uj=ue*ug(uh-1);}ui=uj;}return ui;};return ug(uf);},Raise:function($e){var $0=this,$this=this;throw $e;},Sign:function(ul){return ul===0?0:ul<0?-1:1;},Truncate:function(um){return um<0?S.ceil(um):S.floor(um);},Using:function(un,uo){var up;try{up=uo(un);}finally{un.Dispose();}return up;},range:function(uq,ur){var us;us=1+ur-uq;return us<=0?i.empty():i.init(us,function(ut){return ut+uq;});},step:function(uu,uv,uw){var ux,uy,uA,uC;ux=d.Sign(uv);uy=function(uz){return ux*(uw-uz)>=0;};uA=i.initInfinite(function(uB){return uu+uB*uv;});uC=i.takeWhile(uy,uA);return uC;}},Option:{bind:function(uD,uE){var uF,uG;if(uE.$==0){uF={$:0};}else{uG=uE.$0;uF=uD(uG);}return uF;},exists:function(uH,uI){var uJ,uK;if(uI.$==0){uJ=false;}else{uK=uI.$0;uJ=uH(uK);}return uJ;},filter:function(uL,uM){var uN,uO;if(uM.$==1){uO=uM.$0;uN=uL(uO)?{$:1,$0:uO}:{$:0};}else{uN={$:0};}return uN;},fold:function(uP,uQ,uR){var uS,uT;if(uR.$==0){uS=uQ;}else{uT=uR.$0;uS=(uP(uQ))(uT);}return uS;},foldBack:function(uU,uV,uW){var uX,uY;if(uV.$==0){uX=uW;}else{uY=uV.$0;uX=(uU(uY))(uW);}return uX;},forall:function(uZ,u0){var u1,u2;if(u0.$==0){u1=true;}else{u2=u0.$0;u1=uZ(u2);}return u1;},iter:function(u3,u4){var u5,u6;if(u4.$==0){u5=null;}else{u6=u4.$0;u5=u3(u6);}return u5;},map:function(u7,u8){var u9,u_;if(u8.$==0){u9={$:0};}else{u_=u8.$0;u9={$:1,$0:u7(u_)};}return u9;},ofObj:function(u$){return u$==null?{$:0}:{$:1,$0:u$};},toArray:function(va){var vb,vc;if(va.$==0){vb=[];}else{vc=va.$0;vb=[vc];}return vb;},toList:function(vd){var ve,vf;if(vd.$==0){ve=$.New(Q,{$:0});}else{vf=vd.$0;ve=e.ofArray([vf]);}return ve;},toObj:function(vg){var vh,vi;if(vg.$==0){}else{vi=vg.$0;vh=vi;}return vh;}},PrintfHelpers:{padNumLeft:function(vj,vk){var vl;vl=c.get(vj,0);return((vl===" "?true:vl==="+")?true:vl==="-")?vl+T.PadLeftWith(vj.substr(1),vk-1,48):T.PadLeftWith(vj,vk,48);},plusForPos:function(vm,vn){return 0<=vm?"+"+vn:vn;},prettyPrint:function(vo){var vp,vz,vA,vB,vC,vD,vF;vp=function(vq){var vr,vs,vt,vx,vy;vr=$$.String(vq);if(vr==="[object Object]"){vt=function(vu){var vv,vw;vv=vu[0];vw=vu[1];return vv+" = "+U.prettyPrint(vw);};vx=s.GetFields(vq);vy=c.map(vt,vx);vs="{"+T.concat("; ",vy)+"}";}else{vs=vr;}return vs;};vz=typeof vo;if(vz=="string"){vA="\""+vo+"\"";}else{if(vz=="object"){if(vo instanceof $$.Array){vD=function(vE){return U.prettyPrint(vE);};vF=c.map(vD,vo);vC="[|"+T.concat("; ",vF)+"|]";}else{vC=vp(vo);}vB=vC;}else{vB=$$.String(vo);}vA=vB;}return vA;},printArray:function(vG,vH){var vI;vI=c.map(vG,vH);return"[|"+T.concat("; ",vI)+"|]";},printArray2D:function(vJ,vK){var vL;vL=i.delay(function(){var vN;vN=vK.length?vK[0].length:0;return i.map(function(vO){var vP;vP=i.delay(function(){return i.map(function(vR){return vJ(c.get2D(vK,vO,vR));},d.range(0,vN-1));});return T.concat("; ",vP);},d.range(0,vK.length-1));});return"[["+T.concat("][",vL)+"]]";},printList:function(vS,vT){var vU;vU=i.map(vS,vT);return"["+T.concat("; ",vU)+"]";},spaceForPos:function(vV,vW){return 0<=vV?" "+vW:vW;},toSafe:function(vX){return vX==null?"":vX;}},Queue:{Clear:function(vY){return vY.splice(0,c.length(vY));},Contains:function(vZ,v0){return i.exists(function(v1){return a.Equals(v0,v1);},vZ);},CopyTo:function(v2,v3,v4){return c.blit(v2,0,v3,v4,c.length(v2));}},Random:$.Class({Next:function(){return S.floor(S.random()*2147483648);},Next1:function(v5){return v5<0?d.FailWith("'maxValue' must be greater than zero."):S.floor(S.random()*v5);},Next2:function(v6,v7){var v8,v9;if(v6>v7){v8=d.FailWith("'minValue' cannot be greater than maxValue.");}else{v9=v7-v6;v8=v6+S.floor(S.random()*v9);}return v8;},NextBytes:function(v_){var v$;for(v$=0;v$<=c.length(v_)-1;v$++){c.set(v_,v$,S.floor(S.random()*256));}return;}},{New:function(){return $.New(this,{});}}),Ref:{decr:function($x){var $0=this,$this=this;return void($x[0]--);},incr:function($x){var $0=this,$this=this;return void($x[0]++);}},Remoting:{AjaxProvider:$.Field(function(){return W.New();}),AjaxRemotingProvider:$.Class({},{Async:function(wa,wb){var wc,wd;wc=V.makeHeaders(wa);wd=V.makePayload(wb);return A.Delay(function(){var wf;wf=X.get_CancellationToken();return A.Bind(wf,function(wg){return A.FromContinuations(function(wh){var wi,wj,wk,wl,wm,wq,wt,ww;wi=wh[0];wj=wh[1];wk=wh[2];wl=[true];wm=A.Register(wg,function(){return function(){var wp;if(wl[0]){wl[0]=false;wp=wk(I.New());}else{wp=null;}return wp;}();});wq=function(wr){var ws;if(wl[0]){wl[0]=false;wm.Dispose();ws=wi(p.Activate(q.parse(wr)));}else{ws=null;}return ws;};wt=function(wu){var wv;if(wl[0]){wl[0]=false;wm.Dispose();wv=wj(wu);}else{wv=null;}return wv;};ww=V.EndPoint();return V.AjaxProvider().Async(ww,wc,wd,wq,wt);});});});},Send:function(wx,wy){return A.Start(A.Ignore(Y.Async(wx,wy)),{$:0});},Sync:function(wz,wA){var wB,wC,wD,wE;wB=V.EndPoint();wC=V.makeHeaders(wz);wD=V.makePayload(wA);wE=V.AjaxProvider().Sync(wB,wC,wD);return p.Activate(q.parse(wE));}}),EndPoint:$.Field(function(){return"?";}),UseHttps:function(){var wF,wG,wH,wI;try{if(!T.StartsWith(Z.location.href,"https://")){wH=T.Replace(Z.location.href,"http://","https://");V.EndPoint=function(){return wH;};wG=true;}else{wG=false;}wF=wG;}catch(wI){wF=false;}return wF;},XhrProvider:$.Class({Async:function(wJ,wK,wL,wM,wN){return V.ajax(true,wJ,wK,wL,wM,wN,function(){return V.ajax(true,wJ,wK,wL,wM,wN,undefined);});},Sync:function(wP,wQ,wR){var wS;wS=[undefined];V.ajax(false,wP,wQ,wR,function(wT){wS[0]=wT;},function(wU){return d.Raise(wU);},function(){return V.ajax(false,wP,wQ,wR,function(wW){wS[0]=wW;},function(wX){return d.Raise(wX);},undefined);});return wS[0];}},{New:function(){return $.New(this,{});}}),ajax:function($async,$url,$headers,$data,$ok,$err,$csrf){var $0=this,$this=this;var xhr=new $$.XMLHttpRequest();var csrf=$$.document.cookie.replace(new $$.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");xhr.open("POST",$url,$async);if($async==true){xhr.withCredentials=true;}for(var h in $headers){xhr.setRequestHeader(h,$headers[h]);}if(csrf){xhr.setRequestHeader("x-csrftoken",csrf);}function k(){if(xhr.status==200){$ok(xhr.responseText);}else if($csrf&&xhr.status==403&&xhr.responseText=="CSRF"){$csrf();}else{var msg="Response status is not 200: ";$err(new $$.Error(msg+xhr.status));}}if("onload"in xhr){xhr.onload=xhr.onerror=xhr.onabort=k;}else{xhr.onreadystatechange=function(){if(xhr.readyState==4){k();}};}xhr.send($data);},makeHeaders:function(wY){var wZ;wZ={};wZ["content-type"]="application/json";wZ["x-websharper-rpc"]=wY;return wZ;},makePayload:function(w0){return q.stringify(w0);}},Seq:{append:function(w1,w2){return h.Of(function(){var w4,w5;w4=f.Get(w1);w5=[true];return g.New(w4,null,function(w6){var w7,w8,w9,w_;if(w6.s.MoveNext()){w6.c=w6.s.get_Current();w7=true;}else{w8=w6.s;!a.Equals(w8,null)?w8.Dispose():null;w6.s=null;if(w5[0]){w5[0]=false;w6.s=f.Get(w2);if(w6.s.MoveNext()){w6.c=w6.s.get_Current();w_=true;}else{w6.s.Dispose();w6.s=null;w_=false;}w9=w_;}else{w9=false;}w7=w9;}return w7;},function(w$){var xa;xa=w$.s;return!a.Equals(xa,null)?xa.Dispose():null;});});},average:function(xb){var xc,xh,xi;xc=i.fold(function(xd){var xe,xf;xe=xd[0];xf=xd[1];return function(xg){return[xe+1,xf+xg];};},[0,0],xb);xh=xc[1];xi=xc[0];return xh/xi;},averageBy:function(xj,xk){var xl,xq,xr;xl=i.fold(function(xm){var xn,xo;xn=xm[0];xo=xm[1];return function(xp){return[xn+1,xo+xj(xp)];};},[0,0],xk);xq=xl[1];xr=xl[0];return xq/xr;},cache:function(xs){var xt,xu,xv;xt=[];xu=[f.Get(xs)];xv=function(){var xx;xx=function(xy){var xz,xA,xB,xC;if(xy.s+1<xt.length){xy.s=xy.s+1;xy.c=xt[xy.s];xz=true;}else{xA=xu[0];if(a.Equals(xA,null)){xB=false;}else{if(xA.MoveNext()){xy.s=xy.s+1;xy.c=xA.get_Current();xt.push(xy.get_Current());xC=true;}else{xA.Dispose();xu[0]=null;xC=false;}xB=xC;}xz=xB;}return xz;};return g.New(0,null,xx,function(){});};return h.Of(xv);},choose:function(xE,xF){var xG;xG=function(xH){var xI,xJ,xK;xI=xE(xH);if(xI.$==0){xJ=$.New(Q,{$:0});}else{xK=xI.$0;xJ=e.ofArray([xK]);}return xJ;};return i.collect(xG,xF);},collect:function(xL,xM){return i.concat(i.map(xL,xM));},concat:function(xN){return h.Of(function(){var xP,xQ;xP=f.Get(xN);xQ=function(xR){var xS,xT,xU,xV;xS=xR.s;if(a.Equals(xS,null)){if(xP.MoveNext()){xR.s=f.Get(xP.get_Current());xU=xQ(xR);}else{xP.Dispose();xU=false;}xT=xU;}else{if(xS.MoveNext()){xR.c=xS.get_Current();xV=true;}else{xR.Dispose();xR.s=null;xV=xQ(xR);}xT=xV;}return xT;};return g.New(null,null,xQ,function(xW){var xX;xX=xW.s;!a.Equals(xX,null)?xX.Dispose():null;return!a.Equals(xP,null)?xP.Dispose():null;});});},delay:function(xY){return h.Of(function(){return f.Get(xY(null));});},empty:function(){return[];},enumFinally:function(x0,x1){var x2;x2=function(){var x4,x5,x6,x7,x9;try{x5=f.Get(x0);}catch(x6){x1(null);x5=d.Raise(x6);}x4=x5;x7=function(){x4.Dispose();return x1(null);};x9=function(x_){var x$;if(x4.MoveNext()){x_.c=x4.get_Current();x$=true;}else{x$=false;}return x$;};return g.New(null,null,x9,x7);};return h.Of(x2);},enumUsing:function(ya,yb){var yc;yc=function(){var ye,yf,yg,yh,yj;try{yf=f.Get(yb(ya));}catch(yg){ya.Dispose();yf=d.Raise(yg);}ye=yf;yh=function(){ye.Dispose();return ya.Dispose();};yj=function(yk){var yl;if(ye.MoveNext()){yk.c=ye.get_Current();yl=true;}else{yl=false;}return yl;};return g.New(null,null,yj,yh);};return h.Of(yc);},enumWhile:function(ym,yn){return h.Of(function(){var yp;yp=function(yq){var yr,ys,yt,yu;yr=yq.s;if(a.Equals(yr,null)){if(ym(null)){yq.s=f.Get(yn);yt=yp(yq);}else{yt=false;}ys=yt;}else{if(yr.MoveNext()){yq.c=yr.get_Current();yu=true;}else{yr.Dispose();yq.s=null;yu=yp(yq);}ys=yu;}return ys;};return g.New(null,null,yp,function(yv){var yw;yw=yv.s;return!a.Equals(yw,null)?yw.Dispose():null;});});},exists:function(yx,yy){var yz,yA,yB;yz=f.Get(yy);try{yB=false;while(!yB?yz.MoveNext():false){yB=yx(yz.get_Current());}yA=yB;}finally{yz.Dispose!=undefined?yz.Dispose():null;}return yA;},exists2:function(yC,yD,yE){var yF,yG,yH,yI,yJ;yF=f.Get(yD);try{yH=f.Get(yE);try{yJ=false;while((!yJ?yF.MoveNext():false)?yH.MoveNext():false){yJ=(yC(yF.get_Current()))(yH.get_Current());}yI=yJ;}finally{yH.Dispose!=undefined?yH.Dispose():null;}yG=yI;}finally{yF.Dispose!=undefined?yF.Dispose():null;}return yG;},filter:function(yK,yL){var yM;yM=function(){var yO,yP,yR;yO=f.Get(yL);yP=function(){return yO.Dispose();};yR=function(yS){var yT,yU,yV,yW;yT=yO.MoveNext();yU=yO.get_Current();yV=false;while(yT){if(yK(yU)){yS.c=yU;yV=true;yW=yT=false;}else{yW=yO.MoveNext()?yU=yO.get_Current():yT=false;}}return yV;};return g.New(null,null,yR,yP);};return h.Of(yM);},find:function(yX,yY){var yZ,y0,y1;yZ=i.tryFind(yX,yY);if(yZ.$==0){y0=d.FailWith("KeyNotFoundException");}else{y1=yZ.$0;y0=y1;}return y0;},findBack:function(y2,y3){var y4,y5,y6;y4=k.tryFindBack(y2,c.ofSeq(y3));if(y4.$==0){y5=d.FailWith("KeyNotFoundException");}else{y6=y4.$0;y5=y6;}return y5;},findIndex:function(y7,y8){var y9,y_,y$;y9=i.tryFindIndex(y7,y8);if(y9.$==0){y_=d.FailWith("KeyNotFoundException");}else{y$=y9.$0;y_=y$;}return y_;},findIndexBack:function(za,zb){var zc,zd,ze;zc=k.tryFindIndexBack(za,c.ofSeq(zb));if(zc.$==0){zd=d.FailWith("KeyNotFoundException");}else{ze=zc.$0;zd=ze;}return zd;},fold:function(zf,zg,zh){var zi,zj,zk;zi=zg;zj=f.Get(zh);try{while(zj.MoveNext()){zi=(zf(zi))(zj.get_Current());}zk=zi;}finally{zj.Dispose!=undefined?zj.Dispose():null;}return zk;},fold2:function(zl,zm,zn,zo){return c.fold2(zl,zm,c.ofSeq(zn),c.ofSeq(zo));},foldBack:function(zp,zq,zr){return c.foldBack(zp,c.ofSeq(zq),zr);},foldBack2:function(zs,zt,zu,zv){return c.foldBack2(zs,c.ofSeq(zt),c.ofSeq(zu),zv);},forall:function(zw,zx){return!i.exists(function(zy){return!zw(zy);},zx);},forall2:function(zz,zA,zB){return!i.exists2(function(zC){return function(zD){return!(zz(zC))(zD);};},zA,zB);},head:function(zE){var zF,zG;zF=f.Get(zE);try{zG=zF.MoveNext()?zF.get_Current():j.insufficient();}finally{zF.Dispose!=undefined?zF.Dispose():null;}return zG;},indexed:function(zH){return i.mapi(function(zI){return function(zJ){return[zI,zJ];};},zH);},init:function(zK,zL){return i.take(zK,i.initInfinite(zL));},initInfinite:function(zM){var zN;zN=function(){var zP;zP=function(zQ){zQ.c=zM(zQ.s);zQ.s=zQ.s+1;return true;};return g.New(0,null,zP,function(){});};return h.Of(zN);},isEmpty:function(zS){var zT,zU;zT=f.Get(zS);try{zU=!zT.MoveNext();}finally{zT.Dispose!=undefined?zT.Dispose():null;}return zU;},iter:function(zV,zW){return i.iteri(function(){return function(zY){return zV(zY);};},zW);},iter2:function(zZ,z0,z1){var z2,z3,z4,z5;z2=f.Get(z0);try{z4=f.Get(z1);try{while(z2.MoveNext()?z4.MoveNext():false){(zZ(z2.get_Current()))(z4.get_Current());}}finally{z4.Dispose!=undefined?z4.Dispose():null;}z3=z5;}finally{z2.Dispose!=undefined?z2.Dispose():null;}return z3;},iteri:function(z6,z7){var z8,z9,z_;z8=0;z9=f.Get(z7);try{while(z9.MoveNext()){(z6(z8))(z9.get_Current());z8=z8+1;}}finally{z9.Dispose!=undefined?z9.Dispose():null;}return z_;},iteri2:function(z$,Aa,Ab){return c.iteri2(z$,c.ofSeq(Aa),c.ofSeq(Ab));},length:function(Ac){var Ad,Ae,Af;Ad=0;Ae=f.Get(Ac);try{while(Ae.MoveNext()){Ad=Ad+1;}Af=Ad;}finally{Ae.Dispose!=undefined?Ae.Dispose():null;}return Af;},map:function(Ag,Ah){var Ai;Ai=function(){var Ak,Al,An;Ak=f.Get(Ah);Al=function(){return Ak.Dispose();};An=function(Ao){var Ap;if(Ak.MoveNext()){Ao.c=Ag(Ak.get_Current());Ap=true;}else{Ap=false;}return Ap;};return g.New(null,null,An,Al);};return h.Of(Ai);},map2:function(Aq,Ar,As){var At;At=function(){var Av,Aw,Ax,Az;Av=f.Get(Ar);Aw=f.Get(As);Ax=function(){Av.Dispose();return Aw.Dispose();};Az=function(AA){var AB;if(Av.MoveNext()?Aw.MoveNext():false){AA.c=(Aq(Av.get_Current()))(Aw.get_Current());AB=true;}else{AB=false;}return AB;};return g.New(null,null,Az,Ax);};return h.Of(At);},map3:function(AC,AD,AE,AF){var AG;AG=function(){var AI,AJ,AK,AL,AN;AI=f.Get(AD);AJ=f.Get(AE);AK=f.Get(AF);AL=function(){AI.Dispose();AJ.Dispose();return AK.Dispose();};AN=function(AO){var AP;if((AI.MoveNext()?AJ.MoveNext():false)?AK.MoveNext():false){AO.c=((AC(AI.get_Current()))(AJ.get_Current()))(AK.get_Current());AP=true;}else{AP=false;}return AP;};return g.New(null,null,AN,AL);};return h.Of(AG);},mapFold:function(AQ,AR,AS){var AT,AU,AV;AT=k.mapFold(AQ,AR,i.toArray(AS));AU=AT[0];AV=AT[1];return[AU,AV];},mapFoldBack:function(AW,AX,AY){var AZ,A0,A1;AZ=k.mapFoldBack(AW,i.toArray(AX),AY);A0=AZ[0];A1=AZ[1];return[A0,A1];},mapi:function(A2,A3){return i.map2(A2,i.initInfinite(function(A4){return A4;}),A3);},mapi2:function(A5,A6,A7){return i.map3(A5,i.initInfinite(function(A8){return A8;}),A6,A7);},max:function(A9){return i.reduce(function(A_){return function(A$){return a.Compare(A_,A$)>=0?A_:A$;};},A9);},maxBy:function(Ba,Bb){return i.reduce(function(Bc){return function(Bd){return a.Compare(Ba(Bc),Ba(Bd))>=0?Bc:Bd;};},Bb);},min:function(Be){return i.reduce(function(Bf){return function(Bg){return a.Compare(Bf,Bg)<=0?Bf:Bg;};},Be);},minBy:function(Bh,Bi){return i.reduce(function(Bj){return function(Bk){return a.Compare(Bh(Bj),Bh(Bk))<=0?Bj:Bk;};},Bi);},nth:function(Bl,Bm){var Bn,Bo,Bp;Bl<0?d.FailWith("negative index requested"):null;Bn=-1;Bo=f.Get(Bm);try{while(Bn<Bl){!Bo.MoveNext()?j.insufficient():null;Bn=Bn+1;}Bp=Bo.get_Current();}finally{Bo.Dispose!=undefined?Bo.Dispose():null;}return Bp;},permute:function(Bq,Br){return i.delay(function(){return c.permute(Bq,c.ofSeq(Br));});},pick:function(Bt,Bu){var Bv,Bw,Bx;Bv=i.tryPick(Bt,Bu);if(Bv.$==0){Bw=d.FailWith("KeyNotFoundException");}else{Bx=Bv.$0;Bw=Bx;}return Bw;},readOnly:function(By){return h.Of(function(){return f.Get(By);});},reduce:function(BA,BB){var BC,BD,BE;BC=f.Get(BB);try{!BC.MoveNext()?d.FailWith("The input sequence was empty"):null;BE=BC.get_Current();while(BC.MoveNext()){BE=(BA(BE))(BC.get_Current());}BD=BE;}finally{BC.Dispose!=undefined?BC.Dispose():null;}return BD;},reduceBack:function(BF,BG){return c.reduceBack(BF,c.ofSeq(BG));},replicate:function(BH,BI){BH<0?j.nonNegative():null;return i.delay(function(){return i.map(function(){return BI;},d.range(0,BH-1));});},rev:function(BL){return i.delay(function(){var BN;BN=i.toArray(BL).slice().reverse();return BN;});},scan:function(BO,BP,BQ){var BR;BR=function(){var BT,BU,BW;BT=f.Get(BQ);BU=function(){return BT.Dispose();};BW=function(BX){var BY,BZ;if(BX.s){if(BT.MoveNext()){BX.c=(BO(BX.get_Current()))(BT.get_Current());BZ=true;}else{BZ=false;}BY=BZ;}else{BX.c=BP;BX.s=true;BY=true;}return BY;};return g.New(false,null,BW,BU);};return h.Of(BR);},scanBack:function(B0,B1,B2){return i.delay(function(){return c.scanBack(B0,c.ofSeq(B1),B2);});},skip:function(B4,B5){return h.Of(function(){var B7;B7=f.Get(B5);return g.New(true,null,function(B8){var B9,B_,B$;if(B8.s){for(B_=1;B_<=B4;B_++){!B7.MoveNext()?j.insufficient():null;}B9=void(B8.s=false);}else{B9=null;}if(B7.MoveNext()){B8.c=B7.get_Current();B$=true;}else{B$=false;}return B$;},function(){return B7.Dispose();});});},skipWhile:function(Cb,Cc){return h.Of(function(){var Ce;Ce=f.Get(Cc);return g.New(true,null,function(Cf){var Cg,Ch,Ci,Cj,Ck,Cl;if(Cf.s){Ch=true;Ci=false;while(Ch){if(Ce.MoveNext()){Cj=!Cb(Ce.get_Current())?Ch=false:null;}else{Ch=false;Cj=Ci=true;}}Cf.s=false;if(Ci){Ck=false;}else{Cf.c=Ce.get_Current();Ck=true;}Cg=Ck;}else{if(Ce.MoveNext()){Cf.c=Ce.get_Current();Cl=true;}else{Cl=false;}Cg=Cl;}return Cg;},function(){return Ce.Dispose();});});},sort:function(Cn){return i.sortBy(function(Co){return Co;},Cn);},sortBy:function(Cp,Cq){return i.delay(function(){var Cs;Cs=c.ofSeq(Cq);c.sortInPlaceBy(Cp,Cs);return Cs;});},sortByDescending:function(Ct,Cu){return i.delay(function(){var Cw;Cw=c.ofSeq(Cu);k.sortInPlaceByDescending(Ct,Cw);return Cw;});},sortDescending:function(Cx){return i.sortByDescending(function(Cy){return Cy;},Cx);},sortWith:function(Cz,CA){return i.delay(function(){var CC;CC=c.ofSeq(CA);c.sortInPlaceWith(Cz,CC);return CC;});},splitInto:function(CD,CE){CD<=0?d.FailWith("Count must be positive"):null;return i.delay(function(){var CG;CG=k.splitInto(CD,c.ofSeq(CE));return CG;});},sum:function(CH){return i.fold(function(CI){return function(CJ){return CI+CJ;};},0,CH);},sumBy:function(CK,CL){return i.fold(function(CM){return function(CN){return CM+CK(CN);};},0,CL);},tail:function(CO){return i.skip(1,CO);},take:function(CP,CQ){CP<0?j.nonNegative():null;return h.Of(function(){var CS;CS=[f.Get(CQ)];return g.New(0,null,function(CT){var CU,CV,CW,CX,CY;CT.s=CT.s+1;if(CT.s>CP){CU=false;}else{CV=CS[0];if(a.Equals(CV,null)){CW=j.insufficient();}else{if(CV.MoveNext()){CT.c=CV.get_Current();if(CT.s===CP){CV.Dispose();CY=void(CS[0]=null);}else{CY=null;}CX=true;}else{CV.Dispose();CS[0]=null;CX=j.insufficient();}CW=CX;}CU=CW;}return CU;},function(){var C0;C0=CS[0];return!a.Equals(C0,null)?C0.Dispose():null;});});},takeWhile:function(C1,C2){return i.delay(function(){return i.enumUsing(f.Get(C2),function(C4){return i.enumWhile(function(){return C4.MoveNext()?C1(C4.get_Current()):false;},i.delay(function(){return[C4.get_Current()];}));});});},toArray:function(C7){var C8,C9,C_,C$;C8=[];C9=f.Get(C7);try{while(C9.MoveNext()){C$=C9.get_Current();C8.push(C$);}}finally{C9.Dispose!=undefined?C9.Dispose():null;}return C8.slice(0);},toList:function(Da){return e.ofSeq(Da);},tryFind:function(Db,Dc){var Dd,De,Df,Dg;Dd=f.Get(Dc);try{Df={$:0};while(Df.$==0?Dd.MoveNext():false){Dg=Dd.get_Current();Db(Dg)?Df={$:1,$0:Dg}:null;}De=Df;}finally{Dd.Dispose!=undefined?Dd.Dispose():null;}return De;},tryFindIndex:function(Dh,Di){var Dj,Dk,Dl,Dm,Dn;Dj=f.Get(Di);try{Dl=true;Dm=0;while(Dl?Dj.MoveNext():false){Dn=Dj.get_Current();Dh(Dn)?Dl=false:Dm=Dm+1;}Dk=Dl?{$:0}:{$:1,$0:Dm};}finally{Dj.Dispose!=undefined?Dj.Dispose():null;}return Dk;},tryPick:function(Do,Dp){var Dq,Dr,Ds;Dq=f.Get(Dp);try{Ds={$:0};while(a.Equals(Ds,{$:0})?Dq.MoveNext():false){Ds=Do(Dq.get_Current());}Dr=Ds;}finally{Dq.Dispose!=undefined?Dq.Dispose():null;}return Dr;},zip:function(Dt,Du){return i.map2(function(Dv){return function(Dw){return[Dv,Dw];};},Dt,Du);},zip3:function(Dx,Dy,Dz){return i.map2(function(DA){return function(DB){var DC,DD;DC=DB[0];DD=DB[1];return[DA,DC,DD];};},Dx,i.zip(Dy,Dz));}},Slice:{array:function(DE,DF,DG){var DH,DI,DJ,DK,DL,DM,DN,DO;DH=[DF,DG];if(DH[0].$==0){if(DH[1].$==1){DK=DH[1].$0;DJ=DE.slice(0,DK+1);}else{DJ=[];}DI=DJ;}else{if(DH[1].$==0){DM=DH[0].$0;DL=DE.slice(DM);}else{DN=DH[1].$0;DO=DH[0].$0;DL=DE.slice(DO,DN+1);}DI=DL;}return DI;},array2D:function(DP,DQ,DR,DS,DT){var DU,DV,DW,DX,DY,DZ,D0,D1,D2,D3,D4,D5,D6,D7;if(DQ.$==1){DW=DQ.$0;DV=DW;}else{DV=0;}DU=DV;if(DS.$==1){DZ=DS.$0;DY=DZ;}else{DY=0;}DX=DY;if(DR.$==1){D2=DR.$0;D1=D2;}else{D1=DP.length-1;}D0=D1;if(DT.$==1){D5=DT.$0;D4=D5;}else{D4=(DP.length?DP[0].length:0)-1;}D3=D4;D6=D0-DU+1;D7=D3-DX+1;return c.sub2D(DP,DU,DX,D6,D7);},array2Dfix1:function(D8,D9,D_,D$){var Ea,Eb,Ec,Ed,Ee,Ef,Eg,Eh,Ei;if(D_.$==1){Ec=D_.$0;Eb=Ec;}else{Eb=0;}Ea=Eb;if(D$.$==1){Ef=D$.$0;Ee=Ef;}else{Ee=(D8.length?D8[0].length:0)-1;}Ed=Ee;Eg=Ed-Ea+1;Eh=b(Eg);for(Ei=0;Ei<=Eg-1;Ei++){c.set(Eh,Ei,c.get2D(D8,D9,Ea+Ei));}return Eh;},array2Dfix2:function(Ej,Ek,El,Em){var En,Eo,Ep,Eq,Er,Es,Et,Eu,Ev;if(Ek.$==1){Ep=Ek.$0;Eo=Ep;}else{Eo=0;}En=Eo;if(El.$==1){Es=El.$0;Er=Es;}else{Er=Ej.length-1;}Eq=Er;Et=Eq-En+1;Eu=b(Et);for(Ev=0;Ev<=Et-1;Ev++){c.set(Eu,Ev,c.get2D(Ej,En+Ev,Em));}return Eu;},setArray:function(Ew,Ex,Ey,Ez){var EA,EB,EC,ED,EE,EF;if(Ex.$==1){EC=Ex.$0;EB=EC;}else{EB=0;}EA=EB;if(Ey.$==1){EF=Ey.$0;EE=EF;}else{EE=Ew.length-1;}ED=EE;return c.setSub(Ew,EA,ED-EA+1,Ez);},setArray2D:function(EG,EH,EI,EJ,EK,EL){var EM,EN,EO,EP,EQ,ER,ES,ET,EU,EV,EW,EX;if(EH.$==1){EO=EH.$0;EN=EO;}else{EN=0;}EM=EN;if(EJ.$==1){ER=EJ.$0;EQ=ER;}else{EQ=0;}EP=EQ;if(EI.$==1){EU=EI.$0;ET=EU;}else{ET=EG.length-1;}ES=ET;if(EK.$==1){EX=EK.$0;EW=EX;}else{EW=(EG.length?EG[0].length:0)-1;}EV=EW;return c.setSub2D(EG,EM,EP,ES-EM+1,EV-EP+1,EL);},setArray2Dfix1:function(EY,EZ,E0,E1,E2){var E3,E4,E5,E6,E7,E8,E9,E_;if(E0.$==1){E5=E0.$0;E4=E5;}else{E4=0;}E3=E4;if(E1.$==1){E8=E1.$0;E7=E8;}else{E7=(EY.length?EY[0].length:0)-1;}E6=E7;E9=E6-E3+1;for(E_=0;E_<=E9-1;E_++){c.set2D(EY,EZ,E3+E_,c.get(E2,E_));}return;},setArray2Dfix2:function(E$,Fa,Fb,Fc,Fd){var Fe,Ff,Fg,Fh,Fi,Fj,Fk,Fl;if(Fa.$==1){Fg=Fa.$0;Ff=Fg;}else{Ff=0;}Fe=Ff;if(Fb.$==1){Fj=Fb.$0;Fi=Fj;}else{Fi=E$.length-1;}Fh=Fi;Fk=Fh-Fe+1;for(Fl=0;Fl<=Fk-1;Fl++){c.set2D(E$,Fe+Fl,Fc,c.get(Fd,Fl));}return;},string:function(Fm,Fn,Fo){var Fp,Fq,Fr,Fs,Ft,Fu,Fv,Fw;Fp=[Fn,Fo];if(Fp[0].$==0){if(Fp[1].$==1){Fs=Fp[1].$0;Fr=Fm.slice(0,Fs+1);}else{Fr="";}Fq=Fr;}else{if(Fp[1].$==0){Fu=Fp[0].$0;Ft=Fm.slice(Fu);}else{Fv=Fp[1].$0;Fw=Fp[0].$0;Ft=Fm.slice(Fw,Fv+1);}Fq=Ft;}return Fq;}},Stack:{Clear:function(Fx){return Fx.splice(0,c.length(Fx));},Contains:function(Fy,Fz){return i.exists(function(FA){return a.Equals(Fz,FA);},Fy);},CopyTo:function(FB,FC,FD){return c.blit(FC,0,FC,FD,c.length(FB));}},Strings:{Compare:function(FE,FF){return d.Compare(FE,FF);},CopyTo:function(FG,FH,FI,FJ,FK){return c.blit(T.ToCharArray(FG),FH,FI,FJ,FK);},EndsWith:function($x,$s){var $0=this,$this=this;return $x.substring($x.length-$s.length)==$s;},Filter:function(FL,FM){var FN,FP;FN=function(FO){return FL(FO)?{$:1,$0:_0.fromCharCode(FO)}:{$:0};};FP=i.choose(FN,FM);return c.ofSeq(FP).join("");},IndexOf:function($s,$c,$i){var $0=this,$this=this;return $s.indexOf($$.String.fromCharCode($c),$i);},Insert:function($x,$index,$s){var $0=this,$this=this;return $x.substring(0,$index-1)+$s+$x.substring($index);},IsNullOrEmpty:function($x){var $0=this,$this=this;return $x==null||$x=="";},IsNullOrWhiteSpace:function($x){var $0=this,$this=this;return $x==null||(/^\s*$/).test($x);},Join:function($sep,$values){var $0=this,$this=this;return $values.join($sep);},LastIndexOf:function($s,$c,$i){var $0=this,$this=this;return $s.lastIndexOf($$.String.fromCharCode($c),$i);},PadLeft:function(FQ,FR){return T.PadLeftWith(FQ,FR,32);},PadLeftWith:function($s,$n,$c){var $0=this,$this=this;return $n>$s.length?$$.Array($n-$s.length+1).join($$.String.fromCharCode($c))+$s:$s;},PadRight:function(FS,FT){return T.PadRightWith(FS,FT,32);},PadRightWith:function($s,$n,$c){var $0=this,$this=this;return $n>$s.length?$s+$$.Array($n-$s.length+1).join($$.String.fromCharCode($c)):$s;},RegexEscape:function($s){var $0=this,$this=this;return $s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");},Remove:function($x,$ix,$ct){var $0=this,$this=this;return $x.substring(0,$ix)+$x.substring($ix+$ct);},Replace:function(FU,FV,FW){var FX;FX=function(FY){var FZ,F0,F1,F2;FZ=FY.indexOf(FV);if(FZ!==-1){F1=T.ReplaceOnce(FY,FV,FW);F2=FZ+FW.length;F0=T.Substring(F1,0,FZ+FW.length)+FX(F1.substring(F2));}else{F0=FY;}return F0;};return FX(FU);},ReplaceChar:function(F3,F4,F5){return T.Replace(F3,_0.fromCharCode(F4),_0.fromCharCode(F5));},ReplaceOnce:function($string,$search,$replace){var $0=this,$this=this;return $string.replace($search,$replace);},Split:function(F6,F7,F8){var F9;F9=T.SplitWith(F6,F7);return F8===1?c.filter(function(F_){return F_!=="";},F9):F9;},SplitChars:function(F$,Ga,Gb){var Gc;Gc="["+T.RegexEscape(_0.fromCharCode.apply(undefined,Ga))+"]";return T.Split(F$,new _1(Gc),Gb);},SplitStrings:function(Gd,Ge,Gf){var Gg;Gg=T.concat("|",c.map(function(Gh){return T.RegexEscape(Gh);},Ge));return T.Split(Gd,new _1(Gg),Gf);},SplitWith:function($str,$pat){var $0=this,$this=this;return $str.split($pat);},StartsWith:function($t,$s){var $0=this,$this=this;return $t.substring(0,$s.length)==$s;},Substring:function($s,$ix,$ct){var $0=this,$this=this;return $s.substr($ix,$ct);},ToCharArray:function(Gi){return c.init(Gi.length,function(Gj){return Gi.charCodeAt(Gj);});},ToCharArrayRange:function(Gk,Gl,Gm){return c.init(Gm,function(Gn){return Gk.charCodeAt(Gl+Gn);});},Trim:function($s){var $0=this,$this=this;return $s.replace(/^\s+/,"").replace(/\s+$/,"");},TrimEnd:function($s){var $0=this,$this=this;return $s.replace(/\s+$/,"");},TrimStart:function($s){var $0=this,$this=this;return $s.replace(/^\s+/,"");},collect:function(Go,Gp){return c.init(Gp.length,function(Gq){return Go(Gp.charCodeAt(Gq));}).join("");},concat:function(Gr,Gs){return i.toArray(Gs).join(Gr);},exists:function(Gt,Gu){return i.exists(Gt,T.protect(Gu));},forall:function(Gv,Gw){return i.forall(Gv,T.protect(Gw));},init:function(Gx,Gy){return c.init(Gx,Gy).join("");},iter:function(Gz,GA){return i.iter(Gz,T.protect(GA));},iteri:function(GB,GC){return i.iteri(GB,T.protect(GC));},length:function(GD){return T.protect(GD).length;},map:function(GE,GF){return T.collect(function(GG){return _0.fromCharCode(GE(GG));},T.protect(GF));},mapi:function(GH,GI){return i.toArray(i.mapi(function(GJ){return function(GK){return _0.fromCharCode((GH(GJ))(GK));};},GI)).join("");},protect:function(GL){return GL===null?"":GL;},replicate:function(GM,GN){return T.init(GM,function(){return GN;});}},TimeoutException:$.Class({},{New:function(){return $.New(this,L.New1("The operation has timed out."));},New1:function(GP){return $.New(this,u.New1(GP));}}),Unchecked:{Compare:function(GQ,GR){var GS,G2,G3,G4,G5;GS=function(GT){return function(GU){var GV;GV=[0];s.ForEach(GT,function(GW){var GX,GY;if(!GT.hasOwnProperty(GW)){GX=false;}else{if(!GU.hasOwnProperty(GW)){GV[0]=1;GY=true;}else{GV[0]=a.Compare(GT[GW],GU[GW]);GY=GV[0]!==0;}GX=GY;}return GX;});GV[0]===0?s.ForEach(GU,function(GZ){var G0,G1;if(!GU.hasOwnProperty(GZ)){G0=false;}else{if(!GT.hasOwnProperty(GZ)){GV[0]=-1;G1=true;}else{G1=false;}G0=G1;}return G0;}):null;return GV[0];};};if(GQ===GR){G2=0;}else{G3=typeof GQ;if(G3==="function"){G4=d.FailWith("Cannot compare function values.");}else{if(G3==="boolean"){G4=GQ<GR?-1:1;}else{if(G3==="number"){G4=GQ<GR?-1:1;}else{if(G3==="string"){G4=GQ<GR?-1:1;}else{if(G3==="object"){G4=GQ===null?-1:GR===null?1:"CompareTo"in GQ?GQ.CompareTo(GR):(GQ instanceof b?GR instanceof b:false)?a.compareArrays(GQ,GR):(GQ instanceof J?GR instanceof J:false)?a.compareDates(GQ,GR):(GS(GQ))(GR);}else{G5=typeof GR;G4=G5==="undefined"?0:-1;}}}}}G2=G4;}return G2;},Equals:function(G6,G7){var G8,Hc,Hd;G8=function(G9){return function(G_){var G$;G$=[true];s.ForEach(G9,function(Ha){G$[0]=!G9.hasOwnProperty(Ha)?true:G_.hasOwnProperty(Ha)?a.Equals(G9[Ha],G_[Ha]):false;return!G$[0];});G$[0]?s.ForEach(G_,function(Hb){G$[0]=!G_.hasOwnProperty(Hb)?true:G9.hasOwnProperty(Hb);return!G$[0];}):null;return G$[0];};};if(G6===G7){Hc=true;}else{Hd=typeof G6;Hc=Hd==="object"?(((G6===null?true:G6===undefined)?true:G7===null)?true:G7===undefined)?false:"Equals"in G6?G6.Equals(G7):(G6 instanceof b?G7 instanceof b:false)?a.arrayEquals(G6,G7):(G6 instanceof J?G7 instanceof J:false)?a.dateEquals(G6,G7):(G8(G6))(G7):false;}return Hc;},Hash:function(He){var Hf;Hf=typeof He;return Hf==="function"?0:Hf==="boolean"?He?1:0:Hf==="number"?He:Hf==="string"?a.hashString(He):Hf==="object"?He==null?0:He instanceof b?a.hashArray(He):a.hashObject(He):0;},arrayEquals:function(Hg,Hh){var Hi,Hj,Hk;if(c.length(Hg)===c.length(Hh)){Hj=true;Hk=0;while(Hj?Hk<c.length(Hg):false){!a.Equals(c.get(Hg,Hk),c.get(Hh,Hk))?Hj=false:null;Hk=Hk+1;}Hi=Hj;}else{Hi=false;}return Hi;},compareArrays:function(Hl,Hm){var Hn,Ho,Hp,Hq;if(c.length(Hl)<c.length(Hm)){Hn=-1;}else{if(c.length(Hl)>c.length(Hm)){Ho=1;}else{Hp=0;Hq=0;while(Hp===0?Hq<c.length(Hl):false){Hp=a.Compare(c.get(Hl,Hq),c.get(Hm,Hq));Hq=Hq+1;}Ho=Hp;}Hn=Ho;}return Hn;},compareDates:function(Hr,Hs){return d.Compare(Hr.getTime(),Hs.getTime());},dateEquals:function(Ht,Hu){return Ht.getTime()===Hu.getTime();},hashArray:function(Hv){var Hw,Hx;Hw=-34948909;for(Hx=0;Hx<=c.length(Hv)-1;Hx++){Hw=a.hashMix(Hw,a.Hash(c.get(Hv,Hx)));}return Hw;},hashMix:function(Hy,Hz){return(Hy<<5)+Hy+Hz;},hashObject:function(HA){var HB,HC,HF;if("GetHashCode"in HA){HB=HA.GetHashCode();}else{HC=function(HD,HE){return a.hashMix(HD,HE);};HF=[0];s.ForEach(HA,function(HG){HF[0]=HC(HC(HF[0],a.hashString(HG)),a.Hash(HA[HG]));return false;});HB=HF[0];}return HB;},hashString:function(HH){var HI,HJ,HK;if(HH===null){HI=0;}else{HJ=5381;for(HK=0;HK<=HH.length-1;HK++){HJ=a.hashMix(HJ,HH.charCodeAt(HK)<<0);}HI=HJ;}return HI;}},Util:{addListener:function(HL,HM){HL.Subscribe(G.observer(HM));},observer:function(HN){return{OnCompleted:function(){},OnError:function(){},OnNext:HN};},subscribeTo:function(HQ,HR){return HQ.Subscribe(G.observer(HR));}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Unchecked);b=$.Safe($$.Array);c=$.Safe($$.WebSharper.Arrays);d=$.Safe($$.WebSharper.Operators);e=$.Safe($$.WebSharper.List);f=$.Safe($$.WebSharper.Enumerator);g=$.Safe(f.T);h=$.Safe($$.WebSharper.Enumerable);i=$.Safe($$.WebSharper.Seq);j=$.Safe($$.Seq);k=$.Safe($$.Arrays);l=$.Safe($$.WebSharper.Ref);m=$.Safe($$.WebSharper.Activator);n=$.Safe($$.document);o=$.Safe($$.jQuery);p=$.Safe($$.WebSharper.Json);q=$.Safe($$.JSON);r=$.Safe($$.WebSharper.JavaScript);s=$.Safe(r.JSModule);t=$.Safe($$.WebSharper.AggregateException);u=$.Safe($$.WebSharper.Exception);v=$.Safe($$.WebSharper.ArgumentException);w=$.Safe($$.Number);x=$.Safe($$.WebSharper.IndexOutOfRangeException);y=$.Safe($$.List);z=$.Safe($$.WebSharper.Arrays2D);A=$.Safe($$.WebSharper.Concurrency);B=$.Safe($$.WebSharper.Option);C=$.Safe($$.clearTimeout);D=$.Safe($$.setTimeout);E=$.Safe($$.WebSharper.CancellationTokenSource);F=$.Safe($$.WebSharper.Char);G=$.Safe($$.WebSharper.Util);H=$.Safe($$.WebSharper.Lazy);I=$.Safe($$.WebSharper.OperationCanceledException);J=$.Safe($$.Date);K=$.Safe($$.console);L=$.Safe($$.WebSharper.TimeoutException);M=$.Safe(A.Scheduler);N=$.Safe($$.WebSharper.HtmlContentExtensions);O=$.Safe(N.SingleNode);P=$.Safe($$.WebSharper.InvalidOperationException);Q=$.Safe(e.T);R=$.Safe($$.WebSharper.MatchFailureException);S=$.Safe($$.Math);T=$.Safe($$.WebSharper.Strings);U=$.Safe($$.WebSharper.PrintfHelpers);V=$.Safe($$.WebSharper.Remoting);W=$.Safe(V.XhrProvider);X=$.Safe($$.WebSharper.AsyncProxy);Y=$.Safe(V.AjaxRemotingProvider);Z=$.Safe($$.window);_0=$.Safe($$.String);return _1=$.Safe($$.RegExp);});$.OnLoad(function(){$.Inherit(t,u);$.Inherit(v,u);$.Inherit(x,u);$.Inherit(P,u);$.Inherit(R,u);$.Inherit(I,u);$.Inherit(L,u);V.EndPoint();V.AjaxProvider();A.scheduler();A.defCTS();A.GetCT();m.Activate();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;$.Define($$,{WebSharper:{Collections:{BalancedTree:{Add:function(D,E){return b.Put(function(){return function(G){return G;};},D,E);},Branch:function(H,I,J){return{Node:H,Left:I,Right:J,Height:1+c.Max(I==null?0:I.Height,J==null?0:J.Height),Count:1+(I==null?0:I.Count)+(J==null?0:J.Count)};},Build:function(K,L,M){var N,O,P,Q,R;N=M-L+1;if(N<=0){O=null;}else{P=(L+M)/2>>0;Q=b.Build(K,L,P-1);R=b.Build(K,P+1,M);O=b.Branch(d.get(K,P),Q,R);}return O;},Contains:function(S,T){return!((b.Lookup(S,T))[0]==null);},Enumerate:function(U,V){var W;W=function(X){var Y,Z,_0,_1,_2,_3,_4;Y=X[0];Z=X[1];if(Y==null){if(Z.$==1){_2=Z.$0[0];_3=Z.$1;_4=Z.$0[1];_1={$:1,$0:[_2,[_4,_3]]};}else{_1={$:0};}_0=_1;}else{_0=U?W([Y.Right,$.New(g,{$:1,$0:[Y.Node,Y.Left],$1:Z})]):W([Y.Left,$.New(g,{$:1,$0:[Y.Node,Y.Right],$1:Z})]);}return _0;};return e.unfold(W,[V,$.New(g,{$:0})]);},Lookup:function(_5,_6){var _7,_8,_9,_,ba,bb;_7=[];_8=_6;_9=true;while(_9){if(_8==null){_=_9=false;}else{ba=c.Compare(_5,_8.Node);if(ba===0){bb=_9=false;}else{if(ba===1){_7.unshift([true,_8.Node,_8.Left]);bb=_8=_8.Right;}else{_7.unshift([false,_8.Node,_8.Right]);bb=_8=_8.Left;}}_=bb;}}return[_8,_7];},OfSeq:function(bb){var bc;bc=d.sort(h.toArray(e.distinct(bb)));return b.Build(bc,0,bc.length-1);},Put:function(bd,be,bf){var bg,bh,bi;bg=b.Lookup(be,bf);bh=bg[0];bi=bg[1];return bh==null?b.Rebuild(bi,b.Branch(be,null,null)):b.Rebuild(bi,b.Branch((bd(bh.Node))(be),bh.Left,bh.Right));},Rebuild:function(bj,bk){var bl,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA;bl=function(bm){return bm==null?0:bm.Height;};bn=bk;for(bo=0;bo<=d.length(bj)-1;bo++){bp=d.get(bj,bo);if(bp[0]){br=bp[1];bs=bp[2];if(bl(bn)>bl(bs)+1){if(bl(bn.Left)===bl(bn.Right)+1){bv=bn.Left;bu=b.Branch(bv.Node,b.Branch(br,bs,bv.Left),b.Branch(bn.Node,bv.Right,bn.Right));}else{bu=b.Branch(bn.Node,b.Branch(br,bs,bn.Left),bn.Right);}bt=bu;}else{bt=b.Branch(br,bs,bn);}bq=bt;}else{bw=bp[1];bx=bp[2];if(bl(bn)>bl(bx)+1){if(bl(bn.Right)===bl(bn.Left)+1){bA=bn.Right;bz=b.Branch(bA.Node,b.Branch(bn.Node,bn.Left,bA.Left),b.Branch(bw,bA.Right,bx));}else{bz=b.Branch(bn.Node,bn.Left,b.Branch(bw,bn.Right,bx));}by=bz;}else{by=b.Branch(bw,bn,bx);}bq=by;}bn=bq;}return bn;},Remove:function(bB,bC){var bD,bE,bF,bG,bH,bI,bJ,bK,bL;bD=b.Lookup(bB,bC);bE=bD[0];bF=bD[1];if(bE==null){bG=bC;}else{if(bE.Right==null){bH=b.Rebuild(bF,bE.Left);}else{if(bE.Left==null){bI=b.Rebuild(bF,bE.Right);}else{bJ=h.append(b.Enumerate(false,bE.Left),b.Enumerate(false,bE.Right));bK=h.toArray(bJ);bL=b.Build(bK,0,bK.length-1);bI=b.Rebuild(bF,bL);}bH=bI;}bG=bH;}return bG;},TryFind:function(bM,bN){var bO;bO=(b.Lookup(bM,bN))[0];return bO==null?{$:0}:{$:1,$0:bO.Node};}},Dictionary:$.Class({Add:function(bP,bQ){var bR,bS;bR=this.hash.call(null,bP);if(this.data.hasOwnProperty(bR)){bS=c.FailWith("An item with the same key has already been added.");}else{this.data[bR]={K:bP,V:bQ};bS=void(this.count=this.count+1);}return bS;},Clear:function(){this.data={};this.count=0;return;},ContainsKey:function(bT){return this.data.hasOwnProperty(this.hash.call(null,bT));},GetEnumerator:function(){var bU;bU=j.GetFieldValues(this.data);return k.Get(bU);},Remove:function(bV){var bW,bX;bW=this.hash.call(null,bV);if(this.data.hasOwnProperty(bW)){j.Delete(this.data,bW);this.count=this.count-1;bX=true;}else{bX=false;}return bX;},get_Item:function(bY){var bZ,b0,b1;bZ=this.hash.call(null,bY);if(this.data.hasOwnProperty(bZ)){b1=this.data[bZ];b0=b1.V;}else{b0=l.notPresent();}return b0;},set_Item:function(b2,b3){var b4;b4=this.hash.call(null,b2);!this.data.hasOwnProperty(b4)?void(this.count=this.count+1):null;this.data[b4]={K:b2,V:b3};return;}},{New:function(b5){return $.New(this,m.New4(b5,function(b6){return function(b7){return n.Equals(b6,b7);};},function(b8){return n.Hash(b8);}));},New1:function(b9,b_){return $.New(this,m.New4(b9,function(b$){return function(ca){return b_.Equals(b$,ca);};},function(cb){return b_.GetHashCode(cb);}));},New11:function(cc,cd){return $.New(this,m.New3(cd));},New12:function(){return $.New(this,m.New4([],function(ce){return function(cf){return n.Equals(ce,cf);};},function(cg){return n.Hash(cg);}));},New2:function(){return $.New(this,m.New12());},New3:function(ci){return $.New(this,m.New4([],function(cj){return function(ck){return ci.Equals(cj,ck);};},function(cl){return ci.GetHashCode(cl);}));},New4:function(cm,cn,co){var cp,cq,cr,cs,ct;cp=$.New(this,{});cp.hash=co;cp.count=0;cp.data={};cq=k.Get(cm);try{while(cq.MoveNext()){cs=cq.get_Current();ct=cs.K;cp.data[cp.hash.call(null,ct)]=cs.V;}}finally{cq.Dispose!=undefined?cq.Dispose():null;}return cp;}}),DictionaryUtil:{notPresent:function(){return c.FailWith("The given key was not present in the dictionary.");}},FSharpMap:$.Class({Add:function(cu,cv){var cw,cx;cw=this.tree;cx=$.New(p,{Key:cu,Value:cv});return o.New(b.Add(cx,cw));},CompareTo:function(cy){return e.compareWith(function(cz){return function(cA){return c.Compare(cz,cA);};},this,cy);},ContainsKey:function(cB){var cC,cD;cC=this.tree;cD=$.New(p,{Key:cB,Value:undefined});return b.Contains(cD,cC);},Equals:function(cE){return this.get_Count()===cE.get_Count()?h.forall2(function(cF){return function(cG){return n.Equals(cF,cG);};},this,cE):false;},GetEnumerator:function(){var cH,cJ,cK;cH=function(cI){return{K:cI.Key,V:cI.Value};};cJ=b.Enumerate(false,this.tree);cK=h.map(cH,cJ);return k.Get(cK);},GetHashCode:function(){return n.Hash(h.toArray(this));},Remove:function(cL){var cM,cN;cM=this.tree;cN=$.New(p,{Key:cL,Value:undefined});return o.New(b.Remove(cN,cM));},TryFind:function(cO){var cP,cQ,cR,cT;cP=this.tree;cQ=$.New(p,{Key:cO,Value:undefined});cR=function(cS){return cS.Value;};cT=b.TryFind(cQ,cP);return q.map(cR,cT);},get_Count:function(){var cU;cU=this.tree;return cU==null?0:cU.Count;},get_IsEmpty:function(){return this.tree==null;},get_Item:function(cV){var cW,cX,cY;cW=this.TryFind(cV);if(cW.$==0){cX=c.FailWith("The given key was not present in the dictionary.");}else{cY=cW.$0;cX=cY;}return cX;},get_Tree:function(){return this.tree;}},{New:function(cZ){var c0;c0=$.New(this,{});c0.tree=cZ;return c0;},New1:function(c1){return $.New(this,o.New(r.fromSeq(c1)));}}),FSharpSet:$.Class({Add:function(c2){return s.New1(b.Add(c2,this.tree));},CompareTo:function(c3){return e.compareWith(function(c4){return function(c5){return c.Compare(c4,c5);};},this,c3);},Contains:function(c6){return b.Contains(c6,this.tree);},Equals:function(c7){return this.get_Count()===c7.get_Count()?h.forall2(function(c8){return function(c9){return n.Equals(c8,c9);};},this,c7):false;},GetEnumerator:function(){return k.Get(b.Enumerate(false,this.tree));},GetHashCode:function(){return-1741749453+n.Hash(h.toArray(this));},IsProperSubsetOf:function(c_){return this.IsSubsetOf(c_)?this.get_Count()<c_.get_Count():false;},IsProperSupersetOf:function(c$){return this.IsSupersetOf(c$)?this.get_Count()>c$.get_Count():false;},IsSubsetOf:function(da){return h.forall(function(db){return da.Contains(db);},this);},IsSupersetOf:function(dc){var de=this;return h.forall(function(dd){return de.Contains(dd);},dc);},Remove:function(df){return s.New1(b.Remove(df,this.tree));},add:function(dg){return s.New1(b.OfSeq(h.append(this,dg)));},get_Count:function(){var dh;dh=this.tree;return dh==null?0:dh.Count;},get_IsEmpty:function(){return this.tree==null;},get_MaximumElement:function(){return h.head(b.Enumerate(true,this.tree));},get_MinimumElement:function(){return h.head(b.Enumerate(false,this.tree));},get_Tree:function(){return this.tree;},sub:function(di){return t.Filter(function(dj){return!di.Contains(dj);},this);}},{New:function(dk){return $.New(this,s.New1(u.ofSeq(dk)));},New1:function(dl){var dm;dm=$.New(this,{});dm.tree=dl;return dm;}}),HashSetProxy:$.Class({Add:function(dn){return this.add(dn);},Clear:function(){this.data=v.prototype.constructor.apply(v,[]);this.count=0;return;},Contains:function(_do){var dp;dp=this.data[this.hash.call(null,_do)];return dp==null?false:this.arrContains(_do,dp);},CopyTo:function(dq){var dr,ds,dt;dr=0;ds=w.concat(this.data);for(dt=0;dt<=ds.length-1;dt++){d.set(dq,dt,ds[dt]);}return;},ExceptWith:function(du){var dv,dw,dx,dy;dv=k.Get(du);try{while(dv.MoveNext()){dx=dv.get_Current();dy=this.Remove(dx);}}finally{dv.Dispose!=undefined?dv.Dispose():null;}return dw;},GetEnumerator:function(){return k.Get(w.concat(this.data));},IntersectWith:function(dz){var dA,dB,dC,dD,dE,dF,dG;dA=x.New3(dz,this.equals,this.hash);dB=w.concat(this.data);for(dC=0;dC<=dB.length-1;dC++){dD=dB[dC];dE=dA.Contains(dD);if(!dE){dG=this.Remove(dD);dF=void dG;}else{dF=null;}}return;},IsProperSubsetOf:function(dH){var dI;dI=d.ofSeq(dH);return this.count<d.length(dI)?this.IsSubsetOf(dI):false;},IsProperSupersetOf:function(dJ){var dK;dK=d.ofSeq(dJ);return this.count>d.length(dK)?this.IsSupersetOf(dK):false;},IsSubsetOf:function(dL){var dM,dN,dP;dM=x.New3(dL,this.equals,this.hash);dN=function(dO){return dM.Contains(dO);};dP=w.concat(this.data);return h.forall(dN,dP);},IsSupersetOf:function(dQ){var dR,dT=this;dR=function(dS){return dT.Contains(dS);};return h.forall(dR,dQ);},Overlaps:function(dU){var dV,dX=this;dV=function(dW){return dX.Contains(dW);};return h.exists(dV,dU);},Remove:function(dY){var dZ,d0,d1,d2;dZ=this.hash.call(null,dY);d0=this.data[dZ];if(d0==null){d1=false;}else{if(this.arrRemove(dY,d0)){this.count=this.count-1;d2=true;}else{d2=false;}d1=d2;}return d1;},RemoveWhere:function(d3){var d4,d5,d6,d7,d8;d4=w.concat(this.data);for(d5=0;d5<=d4.length-1;d5++){d6=d4[d5];if(d3(d6)){d8=this.Remove(d6);d7=void d8;}else{d7=null;}}return;},SetEquals:function(d9){var d_;d_=x.New3(d9,this.equals,this.hash);return this.get_Count()===d_.get_Count()?this.IsSupersetOf(d_):false;},SymmetricExceptWith:function(d$){var ea,eb,ec,ed,ee,ef;ea=k.Get(d$);try{while(ea.MoveNext()){ec=ea.get_Current();if(this.Contains(ec)){ee=this.Remove(ec);ed=void ee;}else{ef=this.Add(ec);ed=void ef;}}}finally{ea.Dispose!=undefined?ea.Dispose():null;}return eb;},UnionWith:function(eg){var eh,ei,ej,ek;eh=k.Get(eg);try{while(eh.MoveNext()){ej=eh.get_Current();ek=this.Add(ej);}}finally{eh.Dispose!=undefined?eh.Dispose():null;}return ei;},add:function(el){var em,en,eo,ep,eq;em=this.hash.call(null,el);en=this.data[em];if(en==null){this.data[em]=[el];this.count=this.count+1;eo=true;}else{if(this.arrContains(el,en)){ep=false;}else{eq=en.push(el);this.count=this.count+1;ep=true;}eo=ep;}return eo;},arrContains:function(er,es){var et,eu,ev;et=true;eu=0;ev=es.length;while(et?eu<ev:false){(this.equals.call(null,es[eu]))(er)?et=false:eu=eu+1;}return!et;},arrRemove:function(ew,ex){var ey,ez,eA,eB,eC,eD,eE;ey=true;ez=0;eA=ex.length;while(ey?ez<eA:false){if((this.equals.call(null,ex[ez]))(ew)){eC=ez;eD=[];eE=ex.splice.apply(ex,[eC,1].concat(eD));eB=ey=false;}else{eB=ez=ez+1;}}return!ey;},get_Count:function(){return this.count;}},{New:function(eF){return $.New(this,x.New3(eF,function(eG){return function(eH){return n.Equals(eG,eH);};},function(eI){return n.Hash(eI);}));},New1:function(eJ){return $.New(this,x.New3(h.empty(),function(eK){return function(eL){return eJ.Equals(eK,eL);};},function(eM){return eJ.GetHashCode(eM);}));},New11:function(){return $.New(this,x.New3(h.empty(),function(eN){return function(eO){return n.Equals(eN,eO);};},function(eP){return n.Hash(eP);}));},New2:function(eQ,eR){return $.New(this,x.New3(eQ,function(eS){return function(eT){return eR.Equals(eS,eT);};},function(eU){return eR.GetHashCode(eU);}));},New3:function(eV,eW,eX){var eY,eZ,e0,e1,e2;eY=$.New(this,{});eY.equals=eW;eY.hash=eX;eY.data=v.prototype.constructor.apply(v,[]);eY.count=0;eZ=k.Get(eV);try{while(eZ.MoveNext()){e1=eZ.get_Current();e2=eY.add(e1);}}finally{eZ.Dispose!=undefined?eZ.Dispose():null;}return eY;}}),HashSetUtil:{concat:function($o){var $0=this,$this=this;var r=[];for(var k in $o){r.push.apply(r,$o[k]);};return r;}},LinkedList:{E:$.Class({Dispose:function(){return null;},MoveNext:function(){this.c=this.c.n;return!n.Equals(this.c,null);},get_Current:function(){return this.c.v;}},{New:function(e3){var e4;e4=$.New(this,{});e4.c=e3;return e4;}}),T:$.Class({AddAfter:function(e5,e6){var e7,e8,e9;e7=e5.n;e8={p:e5,n:e7,v:e6};n.Equals(e5.n,null)?void(this.p=e8):null;e5.n=e8;if(!n.Equals(e7,null)){e7.p=e8;e9=e8;}else{e9=null;}this.c=this.c+1;return e8;},AddBefore:function(e_,e$){var fa,fb,fc;fa=e_.p;fb={p:fa,n:e_,v:e$};n.Equals(e_.p,null)?void(this.n=fb):null;e_.p=fb;if(!n.Equals(fa,null)){fa.n=fb;fc=fb;}else{fc=null;}this.c=this.c+1;return fb;},AddFirst:function(fd){var fe,ff;if(this.c===0){ff={p:null,n:null,v:fd};this.n=ff;this.p=this.n;this.c=1;fe=ff;}else{fe=this.AddBefore(this.n,fd);}return fe;},AddLast:function(fg){var fh,fi;if(this.c===0){fi={p:null,n:null,v:fg};this.n=fi;this.p=this.n;this.c=1;fh=fi;}else{fh=this.AddAfter(this.p,fg);}return fh;},Clear:function(){this.c=0;this.n=null;this.p=null;return;},Contains:function(fj){var fk,fl;fk=false;fl=this.n;while(!n.Equals(fl,null)?!fk:false){fl.v==fj?fk=true:fl=fl.n;}return fk;},Find:function(fm){var fn,fo;fn=this.n;fo=true;while(fo?!n.Equals(fn,null):false){fn.v==fm?fo=false:fn=fn.n;}return fo?null:fn;},FindLast:function(fp){var fq,fr;fq=this.p;fr=true;while(fr?!n.Equals(fq,null):false){fq.v==fp?fr=false:fq=fq.p;}return fr?null:fq;},GetEnumerator:function(){return z.New(this);},Remove:function(fs){var ft,fu,fv,fw;ft=fs.p;fu=fs.n;if(n.Equals(ft,null)){fv=void(this.n=fu);}else{ft.n=fu;fv=fu;}if(n.Equals(fu,null)){fw=void(this.p=ft);}else{fu.p=ft;fw=ft;}this.c=this.c-1;return;},Remove1:function(fx){var fy,fz;fy=this.Find(fx);if(n.Equals(fy,null)){fz=false;}else{this.Remove(fy);fz=true;}return fz;},RemoveFirst:function(){return this.Remove(this.n);},RemoveLast:function(){return this.Remove(this.p);},get_Count:function(){return this.c;},get_First:function(){return this.n;},get_Last:function(){return this.p;}},{New:function(){return $.New(this,A.New1(h.empty()));},New1:function(fA){var fB,fC,fD,fE;fB=$.New(this,{});fB.c=0;fB.n=null;fB.p=null;fC=k.Get(fA);if(fC.MoveNext()){fB.n={p:null,n:null,v:fC.get_Current()};fB.p=fB.n;fD=void(fB.c=1);}else{fD=null;}while(fC.MoveNext()){fE={p:fB.p,n:null,v:fC.get_Current()};fB.p.n=fE;fB.p=fE;fB.c=fB.c+1;}return fB;}})},MapModule:{Exists:function(fF,fG){var fH;fH=function(fI){return(fF(fI.K))(fI.V);};return h.exists(fH,fG);},Filter:function(fJ,fK){var fL,fN,fO,fP,fQ;fL=function(fM){return(fJ(fM.Key))(fM.Value);};fN=b.Enumerate(false,fK.get_Tree());fO=h.filter(fL,fN);fP=h.toArray(fO);fQ=b.Build(fP,0,fP.length-1);return o.New(fQ);},FindKey:function(fR,fS){var fT;fT=function(fU){return(fR(fU.K))(fU.V)?{$:1,$0:fU.K}:{$:0};};return h.pick(fT,fS);},Fold:function(fV,fW,fX){var fY,f1;fY=function(fZ){return function(f0){return((fV(fZ))(f0.Key))(f0.Value);};};f1=b.Enumerate(false,fX.get_Tree());return h.fold(fY,fW,f1);},FoldBack:function(f2,f3,f4){var f5,f8;f5=function(f6){return function(f7){return((f2(f7.Key))(f7.Value))(f6);};};f8=b.Enumerate(true,f3.get_Tree());return h.fold(f5,f4,f8);},ForAll:function(f9,f_){var f$;f$=function(ga){return(f9(ga.K))(ga.V);};return h.forall(f$,f_);},Iterate:function(gb,gc){var gd;gd=function(ge){return(gb(ge.K))(ge.V);};return h.iter(gd,gc);},Map:function(gf,gg){var gh,gj,gk,gl;gh=function(gi){return $.New(p,{Key:gi.Key,Value:(gf(gi.Key))(gi.Value)});};gj=b.Enumerate(false,gg.get_Tree());gk=h.map(gh,gj);gl=b.OfSeq(gk);return o.New(gl);},OfArray:function(gm){var gn,gr,gs;gn=function(go){var gp,gq;gp=go[0];gq=go[1];return $.New(p,{Key:gp,Value:gq});};gr=h.map(gn,gm);gs=b.OfSeq(gr);return o.New(gs);},Partition:function(gt,gu){var gv,gx,gy,gz,gA;gv=function(gw){return(gt(gw.Key))(gw.Value);};gx=h.toArray(b.Enumerate(false,gu.get_Tree()));gy=d.partition(gv,gx);gz=gy[1];gA=gy[0];return[o.New(b.Build(gA,0,gA.length-1)),o.New(b.Build(gz,0,gz.length-1))];},Pick:function(gB,gC){var gD;gD=function(gE){return(gB(gE.K))(gE.V);};return h.pick(gD,gC);},ToSeq:function(gF){var gG,gI;gG=function(gH){return[gH.Key,gH.Value];};gI=b.Enumerate(false,gF.get_Tree());return h.map(gG,gI);},TryFind:function(gJ,gK){return gK.TryFind(gJ);},TryFindKey:function(gL,gM){var gN;gN=function(gO){return(gL(gO.K))(gO.V)?{$:1,$0:gO.K}:{$:0};};return h.tryPick(gN,gM);},TryPick:function(gP,gQ){var gR;gR=function(gS){return(gP(gS.K))(gS.V);};return h.tryPick(gR,gQ);}},MapUtil:{fromSeq:function(gT){var gU;gU=h.toArray(h.delay(function(){return h.collect(function(gW){var gX,gY;gX=gW[1];gY=gW[0];return[$.New(p,{Key:gY,Value:gX})];},e.distinctBy(function(gZ){return gZ[0];},gT));}));d.sortInPlace(gU);return b.Build(gU,0,gU.length-1);}},Pair:$.Class({CompareTo:function(g0){return c.Compare(this.Key,g0.Key);},Equals:function(g1){return n.Equals(this.Key,g1.Key);},GetHashCode:function(){return n.Hash(this.Key);}}),ResizeArray:{ResizeArrayProxy:$.Class({Add:function(g2){return this.arr.push(g2);},AddRange:function(g3){var g5=this;return h.iter(function(g4){return g5.Add(g4);},g3);},Clear:function(){var g6;g6=B.splice(this.arr,0,d.length(this.arr),[]);return;},CopyTo:function(g7){return this.CopyTo1(g7,0);},CopyTo1:function(g8,g9){return this.CopyTo2(0,g8,g9,this.get_Count());},CopyTo2:function(g_,g$,ha,hb){return d.blit(this.arr,g_,g$,ha,hb);},GetEnumerator:function(){return k.Get(this.arr);},GetRange:function(hc,hd){return C.New11(d.sub(this.arr,hc,hd));},Insert:function(he,hf){var hg;hg=B.splice(this.arr,he,0,[hf]);return;},InsertRange:function(hh,hi){var hj;hj=B.splice(this.arr,hh,0,h.toArray(hi));return;},RemoveAt:function(hk){var hl;hl=B.splice(this.arr,hk,1,[]);return;},RemoveRange:function(hm,hn){var ho;ho=B.splice(this.arr,hm,hn,[]);return;},Reverse:function(){return this.arr.reverse();},Reverse1:function(hp,hq){return d.reverse(this.arr,hp,hq);},ToArray:function(){return this.arr.slice();},get_Count:function(){return d.length(this.arr);},get_Item:function(hr){return d.get(this.arr,hr);},set_Item:function(hs,ht){return d.set(this.arr,hs,ht);}},{New:function(hu){return $.New(this,C.New11(h.toArray(hu)));},New1:function(){return $.New(this,C.New11([]));},New11:function(hw){var hx;hx=$.New(this,{});hx.arr=hw;return hx;},New2:function(){return $.New(this,C.New11([]));}}),splice:function($arr,$index,$howMany,$items){var $0=this,$this=this;return $$.Array.prototype.splice.apply($arr,[$index,$howMany].concat($items));}},SetModule:{Filter:function(hy,hz){var hA;hA=h.toArray(h.filter(hy,hz));return s.New1(b.Build(hA,0,hA.length-1));},FoldBack:function(hB,hC,hD){return h.fold(function(hE){return function(hF){return(hB(hF))(hE);};},hD,b.Enumerate(true,hC.get_Tree()));},Partition:function(hG,hH){var hI,hJ,hK;hI=d.partition(hG,h.toArray(hH));hJ=hI[1];hK=hI[0];return[s.New1(b.OfSeq(hK)),s.New1(b.OfSeq(hJ))];}},SetUtil:{ofSeq:function(hL){var hM;hM=h.toArray(hL);d.sortInPlace(hM);return b.Build(hM,0,hM.length-1);}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Collections);b=$.Safe(a.BalancedTree);c=$.Safe($$.WebSharper.Operators);d=$.Safe($$.WebSharper.Arrays);e=$.Safe($$.Seq);f=$.Safe($$.WebSharper.List);g=$.Safe(f.T);h=$.Safe($$.WebSharper.Seq);i=$.Safe($$.WebSharper.JavaScript);j=$.Safe(i.JSModule);k=$.Safe($$.WebSharper.Enumerator);l=$.Safe(a.DictionaryUtil);m=$.Safe(a.Dictionary);n=$.Safe($$.WebSharper.Unchecked);o=$.Safe(a.FSharpMap);p=$.Safe(a.Pair);q=$.Safe($$.WebSharper.Option);r=$.Safe(a.MapUtil);s=$.Safe(a.FSharpSet);t=$.Safe(a.SetModule);u=$.Safe(a.SetUtil);v=$.Safe($$.Array);w=$.Safe(a.HashSetUtil);x=$.Safe(a.HashSetProxy);y=$.Safe(a.LinkedList);z=$.Safe(y.E);A=$.Safe(y.T);B=$.Safe(a.ResizeArray);return C=$.Safe(B.ResizeArrayProxy);});$.OnLoad(function(){return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;$.Define($$,{WebSharper:{Json:{Internals:{Provider:$.Field(function(){return b.New();})},Provider:$.Class({DecodeArray:function(t){return this.EncodeArray(t);},DecodeDateTime:function(){return function(){return function(v){return(new c(v)).getTime();};};},DecodeList:function(w){return function(){return function(y){var z;z=w(null);return d.init(e.length(y),function(A){return z(e.get(y,A));});};};},DecodeRecord:function(B,C){return function(){return function(E){var F,G;F=B===undefined?{}:new B();G=function(H){var I,J,K;I=H[0];J=H[1];K=H[2];return f.Equals(K,0)?void(F[I]=(J(null))(E[I])):f.Equals(K,1)?void(F[I]=E.hasOwnProperty(I)?{$:1,$0:(J(null))(E[I])}:{$:0}):f.Equals(K,2)?E.hasOwnProperty(I)?void(F[I]=(J(null))(E[I])):null:g.FailWith("Invalid field option kind");};e.iter(G,C);return F;};};},DecodeSet:function(L){return function(){return function(N){var O;O=L(null);return i.New1(j.OfSeq(e.map(O,N)));};};},DecodeStringDictionary:function(P){return function(){return function(R){var S;S=k.New12();P(null);m.ForEach(R,function(T){S.set_Item(T,R[T]);return false;});return S;};};},DecodeStringMap:function(U){return function(){return function(W){var X;X=[n.New1([])];U(null);m.ForEach(W,function(Y){X[0]=X[0].Add(Y,W[Y]);return false;});return X[0];};};},DecodeTuple:function(Z){return this.EncodeTuple(Z);},DecodeUnion:function(_0,_1,_2){return function(){return function(_4){var _5,_6,_7,_8,_9,_,bc,bf,bg,bh;if(typeof _4==="object"){_6=_0===undefined?{}:new _0();if(f.Equals(typeof _1,"string")){_9=_4[_1];_=function(ba){var bb;bb=ba[0];ba[1];return bb===_9;};_8=e.findINdex(_,_2);}else{bc=[undefined];m.ForEach(_1,function(bd){var be;if(_4.hasOwnProperty(bd)){bc[0]=_1[bd];be=true;}else{be=false;}return be;});_8=bc[0];}_7=_8;_6.$=_7;bf=e.get(_2,_7);bg=bf[1];bh=function(bi){var bj,bk,bl,bm;bj=bi[0];bk=bi[1];bl=bi[2];bm=bi[3];return bj===null?void(_6.$0=(bl(null))(_4)):f.Equals(bm,0)?void(_6[bj]=(bl(null))(_4[bk])):f.Equals(bm,1)?void(_6[bj]=_4.hasOwnProperty(bk)?{$:1,$0:(bl(null))(_4[bk])}:{$:0}):g.FailWith("Invalid field option kind");};e.iter(bh,bg);_5=_6;}else{_5=_4;}return _5;};};},EncodeArray:function(bm){return function(){return function(bo){var bp;bp=bm(null);return e.map(bp,bo);};};},EncodeDateTime:function(){return function(){return function(br){return(new c(br)).toISOString();};};},EncodeList:function(bs){return function(){return function(bu){var bv,bw,bx;bv=[];bw=bs(null);bx=function(by){var bz;bz=bv.push(bw(by));return;};o.iter(bx,bu);return bv;};};},EncodeRecord:function(bA,bB){return function(){return function(bD){var bE,bF;bE={};bF=function(bG){var bH,bI,bJ,bK,bL,bM,bN;bH=bG[0];bI=bG[1];bJ=bG[2];if(f.Equals(bJ,0)){bK=void(bE[bH]=(bI(null))(bD[bH]));}else{if(f.Equals(bJ,1)){bL=bD[bH];if(bL.$==0){bM=null;}else{bN=bL.$0;bM=void(bE[bH]=(bI(null))(bN));}bK=bM;}else{bK=f.Equals(bJ,2)?bD.hasOwnProperty(bH)?void(bE[bH]=(bI(null))(bD[bH])):null:g.FailWith("Invalid field option kind");}}return bK;};e.iter(bF,bB);return bE;};};},EncodeSet:function(bO){return function(){return function(bQ){var bR,bS,bT;bR=[];bS=bO(null);bT=function(bU){var bV;bV=bR.push(bS(bU));return;};o.iter(bT,bQ);return bR;};};},EncodeStringDictionary:function(bW){return function(){return function(bY){var bZ,b0,b1,b2,b3,b4,b5,b6;bZ={};b0=bW(null);b1=p.Get(bY);try{while(b1.MoveNext()){b3=b1.get_Current();b4=g.KeyValue(b3);b5=b4[1];b6=b4[0];bZ[b6]=b0(b5);}}finally{b1.Dispose!=undefined?b1.Dispose():null;}return bZ;};};},EncodeStringMap:function(b7){return function(){return function(b9){var b_,b$,ca;b_={};b$=b7(null);ca=function(cb){return function(cc){b_[cb]=b$(cc);};};q.Iterate(ca,b9);return b_;};};},EncodeTuple:function(cd){return function(){return function(cf){return e.map2(function(cg){return function(ch){return(cg(null))(ch);};},cd,cf);};};},EncodeUnion:function(ci,cj,ck){return function(){return function(cm){var cn,co,cp,cq,cr,cs,ct;if(typeof cm==="object"){co={};cp=cm.$;cq=e.get(ck,cp);cr=cq[0];cs=cq[1];f.Equals(typeof cj,"string")?void(co[cj]=cr):null;ct=function(cu){var cv,cw,cx,cy,cz,cA,cC,cD,cE,cF;cv=cu[0];cw=cu[1];cx=cu[2];cy=cu[3];if(cv===null){cA=(cx(null))(cm.$0);cz=m.ForEach(cA,function(cB){co[cB]=cA[cB];return false;});}else{if(f.Equals(cy,0)){cC=void(co[cw]=(cx(null))(cm[cv]));}else{if(f.Equals(cy,1)){cD=cm[cv];if(cD.$==0){cE=null;}else{cF=cD.$0;cE=void(co[cw]=(cx(null))(cF));}cC=cE;}else{cC=g.FailWith("Invalid field option kind");}}cz=cC;}return cz;};e.iter(ct,cs);cn=co;}else{cn=cm;}return cn;};};}},{Id:function(){return function(cG){return cG;};},New:function(){return $.New(this,{});},get_Default:function(){return r.Provider();}})},Web:{InlineControl:$.Class({get_Body:function(){var cH;cH=e.fold(function(cI){return function(cJ){return cI[cJ];};},s,this.funcName);return cH.apply(null,this.args);}})}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Json);b=$.Safe(a.Provider);c=$.Safe($$.Date);d=$.Safe($$.WebSharper.List);e=$.Safe($$.WebSharper.Arrays);f=$.Safe($$.WebSharper.Unchecked);g=$.Safe($$.WebSharper.Operators);h=$.Safe($$.WebSharper.Collections);i=$.Safe(h.FSharpSet);j=$.Safe(h.BalancedTree);k=$.Safe(h.Dictionary);l=$.Safe($$.WebSharper.JavaScript);m=$.Safe(l.JSModule);n=$.Safe(h.FSharpMap);o=$.Safe($$.WebSharper.Seq);p=$.Safe($$.WebSharper.Enumerator);q=$.Safe(h.MapModule);r=$.Safe(a.Internals);return s=$.Safe($$.window);});$.OnLoad(function(){r.Provider();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt;$.Define($$,{WebSharper:{UI:{Next:{Abbrev:{Async:{Schedule:function(bu){var bv;bv=a.Delay(function(){return a.Return(bu(null));});return a.Start(bv,{$:0});},StartTo:function(bw,bx){return a.StartWithContinuations(bw,bx,function(){},function(){},{$:0});}},Dict:{ToKeyArray:function(bA){var bB,bC;bB=b(bA.count);bC=function(bD){return function(bE){return c.set(bB,bD,bE.K);};};d.iteri(bC,bA);return bB;},ToValueArray:function(bF){var bG,bH;bG=b(bF.count);bH=function(bI){return function(bJ){return c.set(bG,bI,bJ.V);};};d.iteri(bH,bF);return bG;}},Fresh:{Id:function(){var bK;bK=h.counter()+1;h.counter=function(){return bK;};return"uid"+$$.String(h.counter());},Int:function(){var bL;bL=h.counter()+1;h.counter=function(){return bL;};return h.counter();},counter:$.Field(function(){return 0;})},HashSet:{Except:function(bM,bN){var bO;bO=j.New(k.ToArray(bN));bO.ExceptWith(k.ToArray(bM));return bO;},Filter:function(bP,bQ){var bR;bR=k.ToArray(bQ);return j.New(c.filter(bP,bR));},Intersect:function(bS,bT){var bU;bU=j.New(k.ToArray(bS));bU.IntersectWith(k.ToArray(bT));return bU;},ToArray:function(bV){var bW;bW=b(bV.get_Count());bV.CopyTo(bW);return bW;}},Mailbox:{StartProcessor:function(bX){var bY,bZ,b0,b7,b_;bY=[];bZ=[false];b0=a.Delay(function(){return a.Combine(a.While(function(){return bY.length>0;},a.Delay(function(){var b4;b4=bY.shift();return a.Bind(bX(b4),function(){return a.Return(null);});})),a.Delay(function(){return a.Return(void(bZ[0]=false));}));});b7=function(){var b9;if(!bZ[0]){bZ[0]=true;b9=a.Start(b0,{$:0});}else{b9=null;}return b9;};b_=function(b$){bY.push(b$);return b7(null);};return b_;}},Slot1:$.Class({Equals:function(ca){return l.Equals(this.key.call(null,this.value),this.key.call(null,ca.get_Value()));},GetHashCode:function(){return l.Hash(this.key.call(null,this.value));},get_Value:function(){return this.value;}},{Create:function(cb,cc){return m.New(cb,cc);},New:function(cd,ce){var cf;cf=$.New(this,{});cf.key=cd;cf.value=ce;return cf;}})},An:$.Class({},{Append:function(cg,ch){var ci,cj;ci=cg.$0;cj=ch.$0;return $.New(n,{$:0,$0:o.Append(ci,cj)});},Concat:function(ck){var cl,cn;cl=d.map(function(cm){return p.List(cm);},ck);cn=o.Concat(cl);return $.New(n,{$:0,$0:cn});},Const:function(co){return p.Const(co);},Delayed:function(cp,cq,cr,cs,ct,cu){var cv;cv=cr+cs;return{Compute:function(cw){var cx,cy;if(cw<=cs){cx=ct;}else{cy=cq.TransformTime.call(null,(cw-cs)/cr);cx=cp.Interpolate(cy,ct,cu);}return cx;},Duration:cv};},Map:function(cz,cA){var cB;cB=cA.Compute;return p.Def(cA.Duration,function(cC){return cz(cB(cC));});},Pack:function(cD){return $.New(n,{$:0,$0:o.Single({$:1,$0:cD})});},Play:function(cE){return a.Delay(function(){var cG,cI;cG=function(){};cI=p.Actions(cE);return a.Bind(n.Run(cG,cI),function(){return a.Return(p.Finalize(cE));});});},Run:function(cK,cL){var cM,cN;cM=cL.Duration;cN=function(cO){var cP,cQ,cR,cS,cZ;cP=cO[0];cQ=cO[1];cR=cO[2];cS=function(cT,cU){var cV,cW,cX;cV=cU-cT;cK(cL.Compute.call(null,cV));if(cV<=cM){cX=q(function(cY){return cS(cT,cY);});cW=void cX;}else{cW=cP(null);}return cW;};cZ=q(function(c0){return cS(c0,c0);});return;};return a.FromContinuations(cN);},Simple:function(c1,c2,c3,c4,c5){return{Compute:function(c6){var c7;c7=c2.TransformTime.call(null,c6/c3);return c1.Interpolate(c7,c4,c5);},Duration:c3};},WhenDone:function(c8,c9){var c_;c_=$.New(n,{$:0,$0:o.Single({$:0,$0:c8})});return n.Append(c_,c9);},get_Empty:function(){return $.New(n,{$:0,$0:o.Empty()});}}),AnimatedAttrNode:$.Class({GetChangeAnim:function(c$){var da,db,dd=this,de,df,dg,dh,di,dj,dk,dl,dn,_do;da=[this.visible,this.logical];db=function(){return dd.sync(c$);};if(da[0].$==1){if(da[1].$==1){da[0].$0;da[1].$0;if(dd.dirty){di=da[1].$0;dj=da[0].$0;dk=dd.tr;dl=function(dm){return dd.pushVisible(c$,dm);};dn=r.AnimateChange(dk,dj,di);_do=n.Map(dl,dn);dh=n.Pack(_do);}else{dh=n.get_Empty();}dg=dh;}else{dg=n.get_Empty();}df=dg;}else{df=n.get_Empty();}de=df;return n.WhenDone(db,de);},GetEnterAnim:function(dp){var dq,dr,dt=this,du,dv,dw,dx,dy,dz,dA,dB,dD,dE,dF,dG,dH,dI,dJ,dL,dM,dN,dO,dP,dQ,dR,dT,dU,dV,dW,dX,dY,dZ,d1,d2;dq=[this.visible,this.logical];dr=function(){return dt.sync(dp);};if(dq[0].$==1){if(dq[1].$==1){dq[0].$0;dq[1].$0;if(dt.dirty){dy=dq[1].$0;dz=dq[0].$0;dA=dt.tr;dB=function(dC){return dt.pushVisible(dp,dC);};dD=r.AnimateChange(dA,dz,dy);dE=n.Map(dB,dD);dx=n.Pack(dE);}else{if(dq[0].$==0){if(dq[1].$==1){dH=dq[1].$0;dI=dt.tr;dJ=function(dK){return dt.pushVisible(dp,dK);};dL=r.AnimateEnter(dI,dH);dM=n.Map(dJ,dL);dG=n.Pack(dM);}else{dG=n.get_Empty();}dF=dG;}else{dF=n.get_Empty();}dx=dF;}dw=dx;}else{if(dq[0].$==0){if(dq[1].$==1){dP=dq[1].$0;dQ=dt.tr;dR=function(dS){return dt.pushVisible(dp,dS);};dT=r.AnimateEnter(dQ,dP);dU=n.Map(dR,dT);dO=n.Pack(dU);}else{dO=n.get_Empty();}dN=dO;}else{dN=n.get_Empty();}dw=dN;}dv=dw;}else{if(dq[0].$==0){if(dq[1].$==1){dX=dq[1].$0;dY=dt.tr;dZ=function(d0){return dt.pushVisible(dp,d0);};d1=r.AnimateEnter(dY,dX);d2=n.Map(dZ,d1);dW=n.Pack(d2);}else{dW=n.get_Empty();}dV=dW;}else{dV=n.get_Empty();}dv=dV;}du=dv;return n.WhenDone(dr,du);},GetExitAnim:function(d3){var d4,d5,d7=this,d8,d9,d_,d$,ea,ec,ed;d4=this.visible;d5=function(){d7.dirty=true;d7.visible={$:0};return;};if(d4.$==1){d_=d4.$0;d$=d7.tr;ea=function(eb){return d7.pushVisible(d3,eb);};ec=r.AnimateExit(d$,d_);ed=n.Map(ea,ec);d9=n.Pack(ed);}else{d9=n.get_Empty();}d8=d9;return n.WhenDone(d5,d8);},Init:function(){return null;},Sync:function(){return null;},get_Changed:function(){return this.updates;},pushVisible:function(eg,eh){this.visible={$:1,$0:eh};this.dirty=true;return(this.push.call(null,eg))(eh);},sync:function(ei){var ej;if(this.dirty){s.iter(this.push.call(null,ei),this.logical);this.visible=this.logical;ej=void(this.dirty=false);}else{ej=null;}return ej;}},{New:function(ek,el,em){var en,eo;en=$.New(this,{});en.tr=ek;en.push=em;en.logical={$:0};en.visible={$:0};en.dirty=true;eo=function(ep){en.logical={$:1,$0:ep};en.dirty=true;return;};en.updates=t.Map(eo,el);return en;}}),Anims:{Actions:function(eq){var er,es,ew,ex;er=eq.$0;es=function(et){var eu,ev;if(et.$==1){ev=et.$0;eu={$:1,$0:ev};}else{eu={$:0};}return eu;};ew=o.ToArray(er);ex=c.choose(es,ew);return p.ConcatActions(ex);},ConcatActions:function(ey){var ez,eA,eB,eC,eE,eF,eG;ez=d.toArray(ey);eA=c.length(ez);if(eA===0){eB=p.Const(null);}else{if(eA===1){eB=c.get(ez,0);}else{eC=function(eD){return eD.Duration;};eE=d.map(eC,ez);eF=d.max(eE);eG=c.map(function(eH){return p.Prolong(eF,eH);},ez);eB=p.Def(eF,function(eI){return c.iter(function(eJ){return eJ.Compute.call(null,eI);},eG);});}}return eB;},Const:function(eK){return p.Def(0,function(){return eK;});},Def:function(eM,eN){return{Compute:eN,Duration:eM};},Finalize:function(eO){var eP,eQ,eU;eP=eO.$0;eQ=function(eR){var eS,eT;if(eR.$==0){eT=eR.$0;eS=eT(null);}else{eS=null;}return eS;};eU=o.ToArray(eP);return c.iter(eQ,eU);},List:function(eV){var eW;eW=eV.$0;return eW;},Prolong:function(eX,eY){var eZ,e0,e1,e3;eZ=eY.Compute;e0=eY.Duration;e1=u.Create(function(){return eY.Compute.call(null,eY.Duration);});e3=function(e4){return e4>=e0?e1.eval():eZ(e4);};return{Compute:e3,Duration:eX};}},AppendList1:{Append:function(e5,e6){var e7,e8,e9,e_,e$;e7=[e5,e6];if(e7[0].$==0){e9=e7[1];e8=e9;}else{if(e7[1].$==0){e$=e7[0];e_=e$;}else{e_={$:2,$0:e5,$1:e6};}e8=e_;}return e8;},Concat:function(fa){var fb,fc,fe,ff;fb=d.toArray(fa);fc=function(fd){return fd;};fe=o.Empty();ff=function(fg){return function(fh){return o.Append(fg,fh);};};return v.MapReduce(fc,fe,ff,fb);},Empty:function(){return{$:0};},FromArray:function(fi){var fj;fj=fi.length;return fj===0?{$:0}:fj===1?{$:1,$0:c.get(fi,0)}:{$:3,$0:fi.slice()};},Single:function(fk){return{$:1,$0:fk};},ToArray:function(fl){var fm,fn;fm=[];fn=function(fo){var fp,fq,fr,fs,ft;if(fo.$==1){fq=fo.$0;fp=fm.push(fq);}else{if(fo.$==2){fr=fo.$1;fs=fo.$0;fn(fs);fp=fn(fr);}else{if(fo.$==3){ft=fo.$0;fp=c.iter(function(fu){return fm.push(fu);},ft);}else{fp=null;}}}return fp;};fn(fl);return fm.slice(0);}},Array:{MapReduce:function(fv,fw,fx,fy){var fz;fz=function(fA,fB){var fC,fD,fE,fF,fG,fH,fI,fJ,fK;if(fB<=0){fC=fw;}else{if(fB===1){if(fA>=0?fA<c.length(fy):false){fE=fv(c.get(fy,fA));}else{fF=fB/2>>0;fG=fz(fA,fF);fH=fz(fA+fF,fB-fF);fE=(fx(fG))(fH);}fD=fE;}else{fI=fB/2>>0;fJ=fz(fA,fI);fK=fz(fA+fI,fB-fI);fD=(fx(fJ))(fK);}fC=fD;}return fC;};return fz(0,c.length(fy));}},AttrModule:{Animated:function(fL,fM,fN,fO){return w.Animated(fM,fN,function(fP){return function(fQ){return x.SetAttr(fP,fL,fO(fQ));};});},AnimatedStyle:function(fR,fS,fT,fU){return w.Animated(fS,fT,function(fV){return function(fW){return x.SetStyle(fV,fR,fU(fW));};});},Class:function(fX){return w.Static(function(fY){return x.AddClass(fY,fX);});},ContentEditableHtml:function(fZ){var f0,f4;f0=y.CustomVar(fZ,function(f1){return function(f2){f1.innerHTML=f2;};},function(f3){return{$:1,$0:f3.innerHTML};});f4=z.Create("contenteditable","true");return z.Append(f4,f0);},ContentEditableText:function(f5){var f6,f_;f6=y.CustomVar(f5,function(f7){return function(f8){f7.textContent=f8;};},function(f9){return{$:1,$0:f9.textContent};});f_=z.Create("contenteditable","true");return z.Append(f_,f6);},CustomValue:function(f$,ga,gb){return y.CustomVar(f$,function(gc){return function(gd){gc.value=ga(gd);};},function(ge){return gb(ge.value);});},CustomVar:function(gf,gg,gh){var gi,gq;gi=function(gj){return function(){return gf.UpdateMaybe(function(gl){var gm,gn,go,gp;gm=gh(gj);if(gm.$==1){go=gm.$0;if(!l.Equals(go,gl)){gm.$0;gp=gm;}else{gp={$:0};}gn=gp;}else{gn={$:0};}return gn;});};};gq=function(gr){return function(gs){var gt,gu,gv,gw;gt=gh(gr);if(gt.$==1){gv=gt.$0;if(l.Equals(gv,gs)){gt.$0;gw=null;}else{gw=(gg(gr))(gs);}gu=gw;}else{gu=(gg(gr))(gs);}return gu;};};return z.Concat(A.ofArray([y.Handler("change",gi),y.Handler("input",gi),y.Handler("keypress",gi),y.DynamicCustom(gq,gf.get_View())]));},Dynamic:function(gx,gy){return w.Dynamic(gy,function(){},function(gA){return function(gB){return x.SetAttr(gA,gx,gB);};});},DynamicClass:function(gC,gD,gE){return w.Dynamic(gD,function(){},function(gG){return function(gH){return gE(gH)?x.AddClass(gG,gC):x.RemoveClass(gG,gC);};});},DynamicCustom:function(gI,gJ){return w.Dynamic(gJ,function(){},gI);},DynamicPred:function(gL,gM,gN){var gO,gT,gW;gO=function(gP){return function(gQ){var gR,gS;gR=gQ[0];gS=gQ[1];return gR?x.SetAttr(gP,gL,gS):x.RemoveAttr(gP,gL);};};gT=function(gU){return function(gV){return[gU,gV];};};gW=t.Map2(gT,gM,gN);return w.Dynamic(gW,function(){},gO);},DynamicProp:function(gY,gZ){return w.Dynamic(gZ,function(){},function(g1){return function(g2){g1[gY]=g2;};});},DynamicStyle:function(g3,g4){return w.Dynamic(g4,function(){},function(g6){return function(g7){return x.SetStyle(g6,g3,g7);};});},Handler:function(g8,g9){return w.Static(function(g_){return g_.addEventListener(g8,g9(g_),false);});},HandlerView:function(g$,ha,hb){var hc,hd,hh;hc=h.Id();hd=function(he){var hf;hf=hb(he);return he.addEventListener(g$,function(hg){return(hf(hg))(he[hc]);},false);};hh=function(hi){return function(hj){hi[hc]=hj;};};return w.Dynamic(ha,hd,hh);},OnAfterRender:function(hk){return w.Mk(0,{$:4,$0:hk});},Style:function(hl,hm){return w.Static(function(hn){return x.SetStyle(hn,hl,hm);});},ValidateForm:function(){return y.OnAfterRender(function(ho){return $$.H5F?$$.H5F.setup(ho):undefined;});},Value:function(hp){return y.CustomValue(hp,function(hq){return hq;},function(hr){return{$:1,$0:hr};});}},AttrProxy:$.Class({},{Append:function(hs,ht){return w.Mk(hs.Flags|ht.Flags,w.AppendTree(hs.Tree,ht.Tree));},Concat:function(hu){var hv,hw,hy,hz;hv=d.toArray(hu);hw=function(hx){return hx;};hy=z.get_Empty();hz=function(hA){return function(hB){return z.Append(hA,hB);};};return v.MapReduce(hw,hy,hz,hv);},Create:function(hC,hD){return w.Static(function(hE){return x.SetAttr(hE,hC,hD);});},Handler:function(hF,hG){return w.Static(function(hH){return hH.addEventListener(hF,hG(hH),false);});},get_Empty:function(){return w.EmptyAttr();}}),Attrs:{Animated:function(hI,hJ,hK){var hL,hM;hL=B.New(hI,hJ,hK);hM=4;r.CanAnimateEnter(hI)?hM=hM|1:null;r.CanAnimateExit(hI)?hM=hM|2:null;return w.Mk(hM,{$:1,$0:hL});},AppendTree:function(hN,hO){var hP,hQ,hR,hS,hT;hP=[hN,hO];if(hP[0].$==0){hR=hP[1];hQ=hR;}else{if(hP[1].$==0){hT=hP[0];hS=hT;}else{hS={$:2,$0:hN,$1:hO};}hQ=hS;}return hQ;},Dynamic:function(hU,hV,hW){var hX;hX={$:1,$0:C.New(hU,hV,hW)};return w.Mk(0,hX);},EmptyAttr:$.Field(function(){return w.Mk(0,{$:0});}),GetAnim:function(hY,hZ){var h0,h2,h3;h0=function(h1){return(hZ(h1))(hY.DynElem);};h2=hY.DynNodes;h3=c.map(h0,h2);return n.Concat(h3);},GetChangeAnim:function(h4){return w.GetAnim(h4,function(h5){return function(h6){return h5.GetChangeAnim(h6);};});},GetEnterAnim:function(h7){return w.GetAnim(h7,function(h8){return function(h9){return h8.GetEnterAnim(h9);};});},GetExitAnim:function(h_){return w.GetAnim(h_,function(h$){return function(ia){return h$.GetExitAnim(ia);};});},HasChangeAnim:function(ib){return(ib.DynFlags&4)!==0;},HasEnterAnim:function(ic){return(ic.DynFlags&1)!==0;},HasExitAnim:function(id){return(id.DynFlags&2)!==0;},Insert:function(ie,_if){var ig,ih,ii,iq;ig=[];ih=[];ii=function(ij){var ik,il,im,_in,io,ip;if(ij.$==1){il=ij.$0;il.Init(ie);ik=ig.push(il);}else{if(ij.$==2){im=ij.$1;_in=ij.$0;ii(_in);ik=ii(im);}else{if(ij.$==3){io=ij.$0;ik=io(ie);}else{if(ij.$==4){ip=ij.$0;ik=ih.push(ip);}else{ik=null;}}}}return ik;};ii(_if.Tree);iq=ig.slice(0);return $.DeleteEmptyFields({DynElem:ie,DynFlags:_if.Flags,DynNodes:iq,OnAfterRender:(ih.length===0?{$:0}:{$:1,$0:function(ir){return d.iter(function(is){return is(ir);},ih);}}).$0},["OnAfterRender"]);},Mk:function(it,iu){return $.New(z,{Flags:it,Tree:iu});},Static:function(iv){return w.Mk(0,{$:3,$0:iv});},Sync:function(iw,ix){var iy,iA;iy=function(iz){return iz.Sync(iw);};iA=ix.DynNodes;return c.iter(iy,iA);},Updates:function(iB){var iC,iI,iJ,iL;iC=function(iD){return function(iE){var iF;iF=function(){return function(){return null;};};return t.Map2(iF,iD,iE);};};iI=iB.DynNodes;iJ=function(iK){return iK.get_Changed();};iL=D.Const(null);return v.MapReduce(iJ,iL,iC,iI);}},CheckedInput:$.Class({get_Input:function(){var iM,iN,iO,iP;if(this.$==1){iN=this.$0;iM=iN;}else{if(this.$==2){iO=this.$0;iM=iO;}else{iP=this.$1;iM=iP;}}return iM;}}),Doc:$.Class({ReplaceInDom:function(iQ){var iR,iS;iR=E.createTextNode("");iS=iQ.parentNode.replaceChild(iR,iQ);return F.RunBefore(iR,this);},get_DocNode:function(){return this.docNode;},get_Updates:function(){return this.updates;}},{Append:function(iT,iU){var iV,iY,iZ,i0,i1;iV=function(){return function(){return null;};};iY=iT.get_Updates();iZ=iU.get_Updates();i0=t.Map2(iV,iY,iZ);i1={$:0,$0:iT.get_DocNode(),$1:iU.get_DocNode()};return F.Mk(i1,i0);},Async:function(i2){var i3,i5,i6;i3=function(i4){return i4;};i5=D.Const(i2);i6=t.MapAsync(i3,i5);return F.EmbedView(i6);},BindView:function(i7,i8){return F.EmbedView(t.Map(i7,i8));},Button:function(i9,i_,i$){var ja,jb,jc;ja=z.Concat(i_);jb=F.Clickable("button",i$);jc=F.TextNode(i9);return G.New(jb,ja,jc);},ButtonView:function(jd,je,jf,jg){var jh,jk,jl,jm;jh=y.HandlerView("click",jf,function(){return function(){return jg;};});jk=z.Concat(d.append([jh],je));jl=x.CreateElement("button");jm=F.TextNode(jd);return G.New(jl,jk,jm);},CheckBox:function(jn,jo){var jp,jq,js,jw;jp=x.CreateElement("input");jq=function(){return jo.Set(jp.checked);};jp.addEventListener("click",jq,false);js=z.Concat(d.toList(d.delay(function(){return d.append(jn,d.delay(function(){return d.append([z.Create("type","checkbox")],d.delay(function(){return[y.DynamicProp("checked",jo.get_View())];}));}));})));jw=F.get_Empty();return G.New(jp,js,jw);},CheckBoxGroup:function(jx,jy,jz){var jA,jB,jH,jJ,jL,jM,jN,jO,jP,jQ,jR,jU;jA=jz.get_View();jB=function(jC){return jz.Update(function(jD){var jE,jG;jE=jC?A.append(jD,A.ofArray([jy])):A.filter(function(jF){return!l.Equals(jF,jy);},jD);jG=H.distinct(jE);return d.toList(jG);});};jH=function(jI){return l.Equals(jI,jy);};jJ=function(jK){return d.exists(jH,jK);};jL=t.Map(jJ,jA);jN=jz.get_Id();jO=h.Id();jM=A.append(A.ofArray([z.Create("type","checkbox"),z.Create("name",jN),z.Create("value",jO),y.DynamicProp("checked",jL)]),A.ofSeq(jx));jP=z.Concat(jM);jQ=x.CreateElement("input");jR=function(){var jT;jT=jQ.checked;return jB(jT);};jQ.addEventListener("click",jR,false);jU=F.get_Empty();return G.New(jQ,jP,jU);},Clickable:function(jV,jW){var jX;jX=x.CreateElement(jV);jX.addEventListener("click",function(jY){jY.preventDefault();return jW(null);},false);return jX;},Concat:function(jZ){var j0,j1,j3,j4;j0=d.toArray(jZ);j1=function(j2){return j2;};j3=F.get_Empty();j4=function(j5){return function(j6){return F.Append(j5,j6);};};return v.MapReduce(j1,j3,j4,j0);},Convert:function(j7,j8){var j9;j9=t.MapSeqCached(j7,j8);return F.Flatten(j9);},ConvertBy:function(j_,j$,ka){var kb;kb=t.MapSeqCachedBy(j_,j$,ka);return F.Flatten(kb);},ConvertSeq:function(kc,kd){var ke;ke=t.MapSeqCachedView(kc,kd);return F.Flatten(ke);},ConvertSeqBy:function(kf,kg,kh){var ki;ki=t.MapSeqCachedViewBy(kf,kg,kh);return F.Flatten(ki);},Element:function(kj,kk,kl){var km,kn,ko;km=z.Concat(kk);kn=F.Concat(kl);ko=x.CreateElement(kj);return G.New(ko,km,kn);},EmbedView:function(kp){var kq,kr,kt,kv,kw,kx;kq=I.CreateEmbedNode();kr=function(ks){I.UpdateEmbedNode(kq,ks.get_DocNode());return ks.get_Updates();};kt=function(){};kv=D.Bind(kr,kp);kw=t.Map(kt,kv);kx={$:2,$0:kq};return F.Mk(kx,kw);},Flatten:function(ky){var kz,kB;kz=function(kA){return F.Concat(kA);};kB=t.Map(kz,ky);return F.EmbedView(kB);},FloatInput:function(kC,kD){var kE,kK;kE=function(kF){return function(kG){var kH,kI,kJ;if(J.isBlank(kG)){kI=(kF.checkValidity?kF.checkValidity():true)?$.New(K,{$:2,$0:kG}):$.New(K,{$:1,$0:kG});}else{kJ=+kG;kI=$$.isNaN(kJ)?$.New(K,{$:1,$0:kG}):$.New(K,{$:0,$0:kJ,$1:kG});}kH=kI;return{$:1,$0:kH};};};kK=function(kL){return d.append(kC,[y.CustomValue(kD,function(kM){return kM.get_Input();},kE(kL)),z.Create("type","number")]);};return F.InputInternal("input",kK);},FloatInputUnchecked:function(kN,kO){var kP,kT;kP=function(kQ){var kR,kS;if(J.isBlank(kQ)){kR={$:1,$0:0};}else{kS=+kQ;kR=$$.isNaN(kS)?{$:0}:{$:1,$0:kS};}return kR;};kT=function(){return d.append(kN,[kO.Get()===0?z.Create("value","0"):z.get_Empty(),y.CustomValue(kO,function(kV){return $$.String(kV);},kP),z.Create("type","number")]);};return F.InputInternal("input",kT);},Input:function(kW,kX){var kY;kY=function(){return d.append(kW,[y.Value(kX)]);};return F.InputInternal("input",kY);},InputArea:function(k0,k1){var k2;k2=function(){return d.append(k0,[y.Value(k1)]);};return F.InputInternal("textarea",k2);},InputInternal:function(k4,k5){var k6,k7,k8;k6=x.CreateElement(k4);k7=z.Concat(k5(k6));k8=F.get_Empty();return G.New(k6,k7,k8);},IntInput:function(k9,k_){var k$,lf;k$=function(la){return function(lb){var lc,ld,le;if(J.isBlank(lb)){ld=(la.checkValidity?la.checkValidity():true)?$.New(K,{$:2,$0:lb}):$.New(K,{$:1,$0:lb});}else{le=+lb;ld=$$.isNaN(le)?$.New(K,{$:1,$0:lb}):$.New(K,{$:0,$0:le,$1:lb});}lc=ld;return{$:1,$0:lc};};};lf=function(lg){return d.append(k9,[y.CustomValue(k_,function(lh){return lh.get_Input();},k$(lg)),z.Create("type","number"),z.Create("step","1")]);};return F.InputInternal("input",lf);},IntInputUnchecked:function(li,lj){var lk,lo;lk=function(ll){var lm,ln;if(J.isBlank(ll)){lm={$:1,$0:0};}else{ln=+ll;lm=ln!==ln>>0?{$:0}:{$:1,$0:ln};}return lm;};lo=function(){return d.append(li,[lj.Get()===0?z.Create("value","0"):z.get_Empty(),y.CustomValue(lj,function(lq){return $$.String(lq);},lk),z.Create("type","number"),z.Create("step","1")]);};return F.InputInternal("input",lo);},Link:function(lr,ls,lt){var lu,lv,lw,lx,ly;lu=z.Concat(ls);lv=z.Create("href","#");lw=z.Append(lv,lu);lx=F.Clickable("a",lt);ly=F.TextNode(lr);return G.New(lx,lw,ly);},LinkView:function(lz,lA,lB,lC){var lD,lG,lH,lI;lD=y.HandlerView("click",lB,function(){return function(){return lC;};});lG=z.Concat(d.append([lD,z.Create("href","#")],lA));lH=x.CreateElement("a");lI=F.TextNode(lz);return G.New(lH,lG,lI);},Mk:function(lJ,lK){return F.New(lJ,lK);},New:function(lL,lM){var lN;lN=$.New(this,{});lN.docNode=lL;lN.updates=lM;return lN;},PasswordBox:function(lO,lP){var lQ;lQ=function(){return d.append(lO,[y.Value(lP),z.Create("type","password")]);};return F.InputInternal("input",lQ);},Radio:function(lS,lT,lU){var lV,lX,lZ,l0,l1,l2,l5,l6,l7;lV=x.CreateElement("input");lV.addEventListener("click",function(){return lU.Set(lT);},false);lX=function(lY){return l.Equals(lY,lT);};lZ=lU.get_View();l0=t.Map(lX,lZ);l1=y.DynamicProp("checked",l0);l2=function(l3,l4){return z.Create(l3,l4);};l5=A.append(A.ofArray([l2("type","radio"),l2("name",lU.get_Id()),l1]),A.ofSeq(lS));l6=z.Concat(l5);l7=F.get_Empty();return G.New(lV,l6,l7);},Run:function(l8,l9){var l_,l$,ma,mc;l_=l9.get_DocNode();I.LinkElement(l8,l_);l$=I.CreateRunState(l8,l_);ma=L.StartProcessor(function(){return I.PerformAnimatedUpdate(l$,l_);});mc=l9.get_Updates();return D.Sink(ma,mc);},RunAfter:function(md,me){var mf,mg;mf=E.createTextNode("");mg=md.parentNode.insertBefore(mf,md.nextSibling);return F.RunBetween(md,mf,me);},RunAfterById:function(mh,mi){var mj;mj=x.Doc().getElementById(mh);return l.Equals(mj,null)?M.FailWith("invalid id: "+mh):F.RunAfter(mj,mi);},RunAppend:function(mk,ml){var mm,mn;mm=E.createTextNode("");mn=mk.appendChild(mm);return F.RunBefore(mm,ml);},RunAppendById:function(mo,mp){var mq;mq=x.Doc().getElementById(mo);return l.Equals(mq,null)?M.FailWith("invalid id: "+mo):F.RunAppend(mq,mp);},RunBefore:function(mr,ms){var mt,mu;mt=E.createTextNode("");mu=mr.parentNode.insertBefore(mt,mr);return F.RunBetween(mt,mr,ms);},RunBeforeById:function(mv,mw){var mx;mx=x.Doc().getElementById(mv);return l.Equals(mx,null)?M.FailWith("invalid id: "+mv):F.RunBefore(mx,mw);},RunBetween:function(my,mz,mA){var mB,mC,mE;I.LinkPrevElement(mz,mA.get_DocNode());mB=I.CreateDelimitedRunState(my,mz,mA.get_DocNode());mC=L.StartProcessor(function(){return I.PerformAnimatedUpdate(mB,mA.get_DocNode());});mE=mA.get_Updates();return D.Sink(mC,mE);},RunById:function(mF,mG){var mH;mH=x.Doc().getElementById(mF);return l.Equals(mH,null)?M.FailWith("invalid id: "+mF):F.Run(mH,mG);},RunPrepend:function(mI,mJ){var mK,mL;mK=E.createTextNode("");mL=mI.insertBefore(mK,mI.firstChild);return F.RunBefore(mK,mJ);},RunPrependById:function(mM,mN){var mO;mO=x.Doc().getElementById(mM);return l.Equals(mO,null)?M.FailWith("invalid id: "+mM):F.RunPrepend(mO,mN);},Select:function(mP,mQ,mR,mS){var mT;mT=D.Const(mR);return F.SelectDyn(mP,mQ,mT,mS);},SelectDyn:function(mU,mV,mW,mX){var mY,mZ,m1,m4,m7,m$,na,nb,nc,ng,nl,nm,nu,nv,nw,nx,nz;mY=[$.New(N,{$:0})];mZ=function(m0){return m0.selectedIndex;};m1=function(m2){var m3;m3=mZ(m2);return mY[0].get_Item(m3);};m4=function(m5){return d.findIndex(function(m6){return l.Equals(m5,m6);},mY[0]);};m7=function(m8){return function(m9){var m_;m_=m4(m9);m8.selectedIndex=m_;return;};};m$=x.CreateElement("select");na=mX.get_View();nb=y.DynamicCustom(m7,na);nc=function(){return mX.UpdateMaybe(function(ne){var nf;nf=m1(m$);return l.Equals(ne,nf)?{$:0}:{$:1,$0:nf};});};m$.addEventListener("change",nc,false);ng=function(nh){var ni;mY[0]=nh;ni=function(nj){return function(nk){return[nj,nk];};};return d.mapi(ni,nh);};nl=t.Map(ng,mW);nm=function(nn){var no,np,nq,nr,ns,nt;no=nn[0];np=nn[1];nq=F.TextNode(mV(np));ns=$$.String(no);nr=A.ofArray([z.Create("value",ns)]);nt=A.ofArray([nq]);return F.Element("option",nr,nt);};nu=F.Convert(nm,nl);nv=z.Concat(mU);nw=z.Append(nb,nv);nx=y.OnAfterRender(function(ny){return(m7(ny))(mX.Get());});nz=z.Append(nx,nw);return G.New(m$,nz,nu);},SelectDynOptional:function(nA,nB,nC,nD,nE){var nF,nJ,nM;nF=function(nG){var nH,nI;if(nG.$==1){nI=nG.$0;nH=nC(nI);}else{nH=nB;}return nH;};nJ=function(nK){return $.New(N,{$:1,$0:{$:0},$1:A.map(function(nL){return{$:1,$0:nL};},nK)});};nM=t.Map(nJ,nD);return F.SelectDyn(nA,nF,nM,nE);},SelectOptional:function(nN,nO,nP,nQ,nR){var nS,nW;nS=function(nT){var nU,nV;if(nT.$==1){nV=nT.$0;nU=nP(nV);}else{nU=nO;}return nU;};nW=$.New(N,{$:1,$0:{$:0},$1:A.map(function(nX){return{$:1,$0:nX};},nQ)});return F.Select(nN,nS,nW,nR);},Static:function(nY){var nZ,n0;nZ=z.get_Empty();n0=F.get_Empty();return G.New(nY,nZ,n0);},SvgElement:function(n1,n2,n3){var n4,n5,n6;n4=z.Concat(n2);n5=F.Concat(n3);n6=x.CreateSvgElement(n1);return G.New(n6,n4,n5);},TextNode:function(n7){var n8,n9;n8={$:5,$0:x.CreateText(n7)};n9=D.Const(null);return F.Mk(n8,n9);},TextView:function(n_){var n$,oa,oc,od;n$=I.CreateTextNode();oa=function(ob){return I.UpdateTextNode(n$,ob);};oc=t.Map(oa,n_);od={$:4,$0:n$};return F.Mk(od,oc);},Verbatim:function(oe){var of,og,oh,oj,om,on;of=O.parseHTML(oe);og=l.Equals(of,null)?[]:of;oh=function(oi){return{$:1,$0:I.CreateElemNode(oi,z.get_Empty(),{$:3})};};oj=function(ok){return function(ol){return{$:0,$0:ok,$1:ol};};};om=v.MapReduce(oh,{$:3},oj,og);on=D.Const(null);return F.Mk(om,on);},get_Empty:function(){var oo,op;oo={$:3};op=D.Const(null);return F.Mk(oo,op);}}),DocElemNode:$.Class({Equals:function(oq){return this.ElKey===oq.ElKey;},GetHashCode:function(){return this.ElKey;}}),Docs:{ComputeChangeAnim:function(or,os){var ot,ov,ox,oy,oz,oA,oC,oD;ot=function(ou){return w.HasChangeAnim(ou.Attr);};ov=function(ow){return P.Filter(ot,ow);};ox=ov(or.PreviousNodes);oy=ov(os);oz=P.Intersect(ox,oy);oA=function(oB){return w.GetChangeAnim(oB.Attr);};oC=P.ToArray(oz);oD=c.map(oA,oC);return n.Concat(oD);},ComputeEnterAnim:function(oE,oF){var oG,oI,oJ,oK,oL,oN,oO;oG=function(oH){return w.HasEnterAnim(oH.Attr);};oI=oE.PreviousNodes;oJ=P.Filter(oG,oF);oK=P.Except(oI,oJ);oL=function(oM){return w.GetEnterAnim(oM.Attr);};oN=P.ToArray(oK);oO=c.map(oL,oN);return n.Concat(oO);},ComputeExitAnim:function(oP,oQ){var oR,oT,oV,oW,oX,oY,oZ;oR=function(oS){return w.HasExitAnim(oS.Attr);};oT=function(oU){return w.GetExitAnim(oU.Attr);};oV=oP.PreviousNodes;oW=P.Filter(oR,oV);oX=P.Except(oQ,oW);oY=P.ToArray(oX);oZ=c.map(oT,oY);return n.Concat(oZ);},CreateDelimitedElemNode:function(o0,o1,o2,o3){var o4,o5;o4=o0.parentNode;I.LinkPrevElement(o1,o3);o5=w.Insert(o4,o2);return $.New(Q,$.DeleteEmptyFields({Attr:o5,Children:o3,Delimiters:[o0,o1],El:o4,ElKey:h.Int(),Render:$.GetOptional(o5.OnAfterRender).$0},["Render"]));},CreateDelimitedRunState:function(o6,o7,o8){return{PreviousNodes:P.get_Empty(),Top:I.CreateDelimitedElemNode(o6,o7,z.get_Empty(),o8)};},CreateElemNode:function(o9,o_,o$){var pa;I.LinkElement(o9,o$);pa=w.Insert(o9,o_);return $.New(Q,$.DeleteEmptyFields({Attr:pa,Children:o$,El:o9,ElKey:h.Int(),Render:$.GetOptional(pa.OnAfterRender).$0},["Render"]));},CreateEmbedNode:function(){return{Current:{$:3},Dirty:false};},CreateRunState:function(pb,pc){return{PreviousNodes:P.get_Empty(),Top:I.CreateElemNode(pb,z.get_Empty(),pc)};},CreateTextNode:function(){return{Text:x.CreateText(""),Dirty:false,Value:""};},DoSyncElement:function(pd){var pe,pf,pq,pr,ps,pt,pu,pv,px,py,pz,pA,pB,pC;pe=pd.El;pf=function(pg,ph){var pi,pj,pk,pl,pm,pn,po,pp;if(pg.$==1){pj=pg.$0;pi={$:1,$0:pj.El};}else{if(pg.$==2){pk=pg.$0;if(pk.Dirty){pk.Dirty=false;pl=I.InsertDoc(pe,pk.Current,ph);}else{pl=pf(pk.Current,ph);}pi=pl;}else{if(pg.$==3){pi=ph;}else{if(pg.$==4){pm=pg.$0;pi={$:1,$0:pm.Text};}else{if(pg.$==5){pn=pg.$0;pi={$:1,$0:pn};}else{po=pg.$1;pp=pg.$0;pi=pf(pp,pf(po,ph));}}}}}return pi;};pq=R.DocChildren(pd);pr=pd.El;ps=$.GetOptional(pd.Delimiters);pt=R.Children(pr,ps);pu=pd.El;pv=function(pw){return x.RemoveNode(pu,pw);};px=R.Except(pq,pt);R.Iter(pv,px);py=$.GetOptional(pd.Delimiters);if(py.$==1){pB=py.$0[1];pA={$:1,$0:pB};}else{pA={$:0};}pz=pA;pC=pf(pd.Children,pz);return;},DomNodes:$.Class({},{Children:function(pD,pE){var pF,pG,pH,pI,pJ,pK,pL;if(pE.$==1){pG=pE.$0[1];pH=pE.$0[0];pI=b.prototype.constructor.apply(b,[]);pJ=pH.nextSibling;while(pJ!==pG){pK=pI.push(pJ);pJ=pJ.nextSibling;}pF=$.New(R,{$:0,$0:pI});}else{pL=pD.childNodes;pF=$.New(R,{$:0,$0:c.init(pD.childNodes.length,function(pM){return pL[pM];})});}return pF;},DocChildren:function(pN){var pO,pP;pO=[];pP=function(pQ){var pR,pS,pT,pU,pV,pW,pX;if(pQ.$==2){pS=pQ.$0;pR=pP(pS.Current);}else{if(pQ.$==1){pT=pQ.$0;pR=pO.push(pT.El);}else{if(pQ.$==3){pR=null;}else{if(pQ.$==5){pU=pQ.$0;pR=pO.push(pU);}else{if(pQ.$==4){pV=pQ.$0;pR=pO.push(pV.Text);}else{pW=pQ.$1;pX=pQ.$0;pP(pX);pR=pP(pW);}}}}}return pR;};pP(pN.Children);return $.New(R,{$:0,$0:pO.slice(0)});},Except:function(pY,pZ){var p0,p1,p2,p6;p0=pY.$0;p1=pZ.$0;p2=function(p3){var p4;p4=function(p5){return!(p3===p5);};return d.forall(p4,p0);};p6=c.filter(p2,p1);return $.New(R,{$:0,$0:p6});},FoldBack:function(p7,p8,p9){var p_;p_=p8.$0;return c.foldBack(p7,p_,p9);},Iter:function(p$,qa){var qb;qb=qa.$0;return c.iter(p$,qb);}}),InsertDoc:function(qc,qd,qe){var qf,qg,qh,qi,qj,qk,ql;if(qd.$==1){qg=qd.$0;qf=I.InsertNode(qc,qg.El,qe);}else{if(qd.$==2){qh=qd.$0;qh.Dirty=false;qf=I.InsertDoc(qc,qh.Current,qe);}else{if(qd.$==3){qf=qe;}else{if(qd.$==4){qi=qd.$0;qf=I.InsertNode(qc,qi.Text,qe);}else{if(qd.$==5){qj=qd.$0;qf=I.InsertNode(qc,qj,qe);}else{qk=qd.$1;ql=qd.$0;qf=I.InsertDoc(qc,ql,I.InsertDoc(qc,qk,qe));}}}}}return qf;},InsertNode:function(qm,qn,qo){x.InsertAt(qm,qo,qn);return{$:1,$0:qn};},LinkElement:function(qp,qq){var qr;qr=I.InsertDoc(qp,qq,{$:0});return;},LinkPrevElement:function(qs,qt){var qu;qu=I.InsertDoc(qs.parentNode,qt,{$:1,$0:qs});return;},NodeSet:$.Class({},{Except:function(qv,qw){var qx,qy;qx=qv.$0;qy=qw.$0;return $.New(P,{$:0,$0:k.Except(qx,qy)});},Filter:function(qz,qA){var qB;qB=qA.$0;return $.New(P,{$:0,$0:k.Filter(qz,qB)});},FindAll:function(qC){var qD,qE;qD=[];qE=function(qF){var qG,qH,qI,qJ,qK;if(qF.$==0){qH=qF.$1;qI=qF.$0;qE(qI);qG=qE(qH);}else{if(qF.$==1){qJ=qF.$0;qD.push(qJ);qG=qE(qJ.Children);}else{if(qF.$==2){qK=qF.$0;qG=qE(qK.Current);}else{qG=null;}}}return qG;};qE(qC);return $.New(P,{$:0,$0:j.New(qD.slice(0))});},Intersect:function(qL,qM){var qN,qO;qN=qL.$0;qO=qM.$0;return $.New(P,{$:0,$0:k.Intersect(qN,qO)});},IsEmpty:function(qP){var qQ;qQ=qP.$0;return qQ.get_Count()===0;},ToArray:function(qR){var qS;qS=qR.$0;return k.ToArray(qS);},get_Empty:function(){return $.New(P,{$:0,$0:j.New11()});}}),PerformAnimatedUpdate:function(qT,qU){return a.Delay(function(){var qW,qX,qY,qZ;qW=P.FindAll(qU);qX=I.ComputeChangeAnim(qT,qW);qY=I.ComputeEnterAnim(qT,qW);qZ=I.ComputeExitAnim(qT,qW);return a.Bind(n.Play(n.Append(qX,qZ)),function(){I.SyncElemNode(qT.Top);return a.Bind(n.Play(qY),function(){return a.Return(void(qT.PreviousNodes=qW));});});});},Sync:function(q2){var q3;q3=function(q4){var q5,q6,q7,q8,q9,q_,q$;if(q4.$==1){q6=q4.$0;I.SyncElement(q6);q5=q3(q6.Children);}else{if(q4.$==2){q7=q4.$0;q5=q3(q7.Current);}else{if(q4.$==3){q5=null;}else{if(q4.$==5){q5=null;}else{if(q4.$==4){q8=q4.$0;if(q8.Dirty){q8.Text.nodeValue=q8.Value;q9=void(q8.Dirty=false);}else{q9=null;}q5=q9;}else{q_=q4.$1;q$=q4.$0;q3(q$);q5=q3(q_);}}}}}return q5;};return q3(q2);},SyncElemNode:function(ra){I.SyncElement(ra);return I.Sync(ra.Children);},SyncElement:function(rb){var rc,rk,rl,rm;rc=function(rd){var re;re=function(rf){var rg,rh,ri,rj;if(rf.$==0){rh=rf.$1;ri=rf.$0;rg=re(ri)?true:re(rh);}else{if(rf.$==2){rj=rf.$0;rg=rj.Dirty?true:re(rj.Current);}else{rg=false;}}return rg;};return re(rd.Children);};w.Sync(rb.El,rb.Attr);rc(rb)?I.DoSyncElement(rb):null;rk=$.GetOptional(rb.Render);if(rk.$==1){rm=rk.$0;rm(rb.El);rl=void(delete rb.Render);}else{rl=null;}return rl;},UpdateEmbedNode:function(rn,ro){rn.Current=ro;rn.Dirty=true;return;},UpdateTextNode:function(rp,rq){rp.Value=rq;rp.Dirty=true;return;}},DomUtility:{AddClass:function(rr,rs){var rt;rt=O(rr).addClass(rs);return;},AppendTo:function(ru,rv){var rw;rw=ru.appendChild(rv);return;},Clear:function(rx){var ry;while(rx.hasChildNodes()){ry=rx.removeChild(rx.firstChild);}return;},ClearAttrs:function(rz){var rA;while(rz.hasAttributes()){rA=rz.removeAttributeNode(rz.attributes.item(0));}return;},CreateAttr:function(rB,rC){var rD;rD=x.Doc().createAttribute(rB);rD.value=rC;return rD;},CreateElement:function(rE){return x.Doc().createElement(rE);},CreateSvgElement:function(rF){return x.Doc().createElementNS("http://www.w3.org/2000/svg",rF);},CreateText:function(rG){return x.Doc().createTextNode(rG);},Doc:$.Field(function(){return E;}),InsertAt:function(rH,rI,rJ){var rK,rN,rO,rP,rQ,rR,rS,rT,rU,rV,rW,rX,rY,rZ;rK=function(rL){var rM;rM=rL.nextSibling;return l.Equals(rM,null)?{$:0}:{$:1,$0:rM};};if(rJ.parentNode===rH){rP=rK(rJ);rQ=[rI,rP];if(rQ[0].$==1){if(rQ[1].$==1){rT=rQ[0].$0;rU=rQ[1].$0;rS=rT===rU;}else{rS=false;}rR=rS;}else{rR=rQ[1].$==0?true:false;}rO=rR;}else{rO=false;}rN=rO;if(!rN){if(rI.$==1){rX=rI.$0;rY=rH.insertBefore(rJ,rX);rW=void rY;}else{rZ=rH.appendChild(rJ);rW=void rZ;}rV=rW;}else{rV=null;}return rV;},RemoveAttr:function(r0,r1){return r0.removeAttribute(r1);},RemoveClass:function(r2,r3){var r4;r4=O(r2).removeClass(r3);return;},RemoveNode:function(r5,r6){var r7,r8;if(r6.parentNode===r5){r8=r5.removeChild(r6);r7=void r8;}else{r7=null;}return r7;},SetAttr:function(r9,r_,r$){return r9.setAttribute(r_,r$);},SetProperty:function($target,$name,$value){var $0=this,$this=this;return $target.setProperty($name,$value);},SetStyle:function(sa,sb,sc){return x.SetProperty(sa.style,sb,sc);}},DoubleInterpolation:$.Class({Interpolate:function(sd,se,sf){return se+sd*(sf-se);}}),DynamicAttrNode:$.Class({GetChangeAnim:function(){return n.get_Empty();},GetEnterAnim:function(){return n.get_Empty();},GetExitAnim:function(){return n.get_Empty();},Init:function(sj){return this.init.call(null,sj);},Sync:function(sk){var sl;if(this.dirty){(this.push.call(null,sk))(this.value);sl=void(this.dirty=false);}else{sl=null;}return sl;},get_Changed:function(){return this.updates;}},{New:function(sm,sn,so){var sp,sq;sp=$.New(this,{});sp.init=sn;sp.push=so;sp.value=undefined;sp.dirty=true;sq=function(sr){sp.value=sr;sp.dirty=true;return;};sp.updates=t.Map(sq,sm);return sp;}}),Easing:$.Class({},{Custom:function(ss){return $.New(S,{TransformTime:ss});},get_CubicInOut:function(){return T.CubicInOut();}}),Easings:{CubicInOut:$.Field(function(){var st;st=function(su){var sv,sw;sv=su*su;sw=sv*su;return 3*sv-2*sw;};return $.New(S,{TransformTime:st});})},Elt:$.Class({AddClass:function($cls){var $this=this;return $this.elt.className+=" "+$cls;},Append:function(sx){var sy,sz,sA,sD,sE,sF;sy=this.get_DocElemNode();sy.Children={$:0,$0:sy.Children,$1:sx.get_DocNode()};sz=this.rvUpdates;sA=function(){return function(){return null;};};sD=U.Get(this.rvUpdates);sE=sx.get_Updates();U.Set(sz,t.Map2(sA,sD,sE));sF=I.InsertDoc(this.elt,sx.get_DocNode(),{$:0});return;},Clear:function(){var sG;this.get_DocElemNode().Children={$:3};U.Set(this.rvUpdates,D.Const(null));while(this.elt.hasChildNodes()){sG=this.elt.removeChild(this.elt.firstChild);}return;},GetAttribute:function(sH){return this.elt.getAttribute(sH);},GetProperty:function(sI){return this.elt[sI];},GetText:function(){return this.elt.textContent;},GetValue:function(){return this.elt.value;},HasAttribute:function(sJ){return this.elt.hasAttribute(sJ);},HasClass:function(sK){return(new V("(\\s|^)"+sK+"(\\s|$)")).test(this.elt.className);},Html:function(){return this.elt.outerHTML;},Id:function(){return this.elt.id;},OnAfterRender:function(sL){var sM,sN,sO;sM=$.GetOptional(this.get_DocElemNode().Render);if(sM.$==1){sO=sM.$0;sN={$:1,$0:function(sP){sO(sP);return sL(sP);}};}else{sN={$:1,$0:sL};}$.SetOptional(this.get_DocElemNode(),"Render",sN);return this;},Prepend:function(sQ){var sR,sS,sT,sW,sX,sY,sZ,s0;sR=this.get_DocElemNode();sR.Children={$:0,$0:sQ.get_DocNode(),$1:sR.Children};sS=this.rvUpdates;sT=function(){return function(){return null;};};sW=U.Get(this.rvUpdates);sX=sQ.get_Updates();U.Set(sS,t.Map2(sT,sW,sX));sY=this.elt.firstChild;sZ=l.Equals(sY,null)?{$:0}:{$:1,$0:sY};s0=I.InsertDoc(this.elt,sQ.get_DocNode(),sZ);return;},RemoveAttribute:function(s1){return this.elt.removeAttribute(s1);},RemoveClass:function(s2){this.elt.className=this.elt.className.replace(new V("(\\s|^)"+s2+"(\\s|$)")," ");},SetAttribute:function(s3,s4){return this.elt.setAttribute(s3,s4);},SetProperty:function(s5,s6){this.elt[s5]=s6;},SetStyle:function(s7,s8){this.elt.style[s7]=s8;},SetText:function(s9){this.get_DocElemNode().Children={$:3};U.Set(this.rvUpdates,D.Const(null));this.elt.textContent=s9;return;},SetValue:function(s_){this.elt.value=s_;},get_DocElemNode:function(){var s$,ta,tb;s$=this.docNode1;if(s$.$==1){tb=s$.$0;ta=tb;}else{ta=M.FailWith("Elt: Invalid docNode");}return ta;},get_Element:function(){return this.elt;},on:function(tc,td){this.elt.addEventListener(tc,td(this.elt),false);return this;}},{New:function(te,tf,tg){var th,ti,tj,tk,tn,tp,tq;th=I.CreateElemNode(te,tf,tg.get_DocNode());ti=W.Create(tg.get_Updates());tj=w.Updates(th.Attr);tk=function(){return function(){return null;};};tn=function(to){return t.Map2(tk,tj,to);};tp=ti.get_View();tq=D.Bind(tn,tp);return G.New1({$:1,$0:th},tq,te,ti,tj);},New1:function(tr,ts,tt,tu){var tw;tw=$.New(this,F.New(tr,ts));tw.docNode1=tr;tw.elt=tt;tw.rvUpdates=tu;return tw;}}),Flow1:$.Class({},{Bind:function(tx,ty){return{Render:function(tz){return function(tA){return(tx.Render.call(null,tz))(function(tB){return(ty(tB).Render.call(null,tz))(tA);});};}};},Define:function(tC){return{Render:function(tD){return function(tE){var tF;tF=tC(tE);return U.Set(tD,tF);};}};},Embed:function(tG){var tH;tH=W.Create(F.get_Empty());(tG.Render.call(null,tH))(function(){});return F.EmbedView(tH.get_View());},Map:function(tJ,tK){return{Render:function(tL){return function(tM){return(tK.Render.call(null,tL))(function(tN){return tM(tJ(tN));});};}};},Return:function(tO){return{Render:function(){return function(tQ){return tQ(tO);};}};},Static:function(tR){return{Render:function(tS){return function(tT){U.Set(tS,tR);return tT(null);};}};},get_Do:function(){return X.New();}}),FlowBuilder:$.Class({Bind:function(tU,tV){return Y.Bind(tU,tV);},Return:function(tW){return Y.Return(tW);},ReturnFrom:function(tX){return tX;}},{New:function(){return $.New(this,{});}}),Html:{attr:$.Class({},{New:function(){return $.New(this,{});}})},Input:{ActivateButtonListener:$.Field(function(){var tY,t6;tY=function(tZ,t0){var t1,t2,t3,t4,t5;t1=tZ.button;if(t1===0){t3=Z.MouseBtnSt1().Left;t2=U.Set(t3,t0);}else{if(t1===1){t4=Z.MouseBtnSt1().Middle;t2=U.Set(t4,t0);}else{if(t1===2){t5=Z.MouseBtnSt1().Right;t2=U.Set(t5,t0);}else{t2=null;}}}return t2;};if(!Z.MouseBtnSt1().Active){Z.MouseBtnSt1().Active=true;E.addEventListener("mousedown",function(t7){return tY(t7,true);},false);t6=E.addEventListener("mouseup",function(t8){return tY(t8,false);},false);}else{t6=null;}return t6;}),ActivateKeyListener:$.Field(function(){var t9,t_,ue;if(!Z.KeyListenerState().KeyListenerActive){t_=O(E).keydown(function(t$){var ua,ub,uc;ua=t$.which;ub=Z.KeyListenerState().LastPressed;U.Set(ub,ua);uc=U.Get(Z.KeyListenerState().KeysPressed);return!d.exists(function(ud){return ud===ua;},uc)?U.Set(Z.KeyListenerState().KeysPressed,A.append(uc,A.ofArray([ua]))):null;});ue=O(E).keyup(function(uf){var ug,uh,ui,uk;ug=uf.which;uh=Z.KeyListenerState().KeysPressed;ui=function(uj){return uj!==ug;};uk=function(ul){return A.filter(ui,ul);};return U.Update(uh,uk);});t9=void ue;}else{t9=null;}return t9;}),KeyListenerState:$.Field(function(){return{KeysPressed:W.Create($.New(N,{$:0})),KeyListenerActive:false,LastPressed:W.Create(-1)};}),Keyboard:$.Class({},{IsPressed:function(um){var un;Z.ActivateKeyListener();un=function(uo){return uo===um;};return t.Map(function(up){return d.exists(un,up);},Z.KeyListenerState().KeysPressed.get_View());},get_KeysPressed:function(){Z.ActivateKeyListener();return Z.KeyListenerState().KeysPressed.get_View();},get_LastPressed:function(){Z.ActivateKeyListener();return Z.KeyListenerState().LastPressed.get_View();}}),Mouse:$.Class({},{get_LeftPressed:function(){Z.ActivateButtonListener();return Z.MouseBtnSt1().Left.get_View();},get_MiddlePressed:function(){Z.ActivateButtonListener();return Z.MouseBtnSt1().Middle.get_View();},get_MousePressed:function(){Z.ActivateButtonListener();return D.Apply(D.Apply(D.Apply(D.Const(function(uq){return function(ur){return function(us){return(uq?true:ur)?true:us;};};}),Z.MouseBtnSt1().Left.get_View()),Z.MouseBtnSt1().Middle.get_View()),Z.MouseBtnSt1().Right.get_View());},get_Position:function(){var ut,ux;ut=function(uu){var uv,uw;uv=Z.MousePosSt1().PosV;uw=[uu.clientX,uu.clientY];return U.Set(uv,uw);};if(!Z.MousePosSt1().Active){E.addEventListener("mousemove",ut,false);ux=void(Z.MousePosSt1().Active=true);}else{ux=null;}return Z.MousePosSt1().PosV.get_View();},get_RightPressed:function(){Z.ActivateButtonListener();return Z.MouseBtnSt1().Right.get_View();}}),MouseBtnSt1:$.Field(function(){return{Active:false,Left:W.Create(false),Middle:W.Create(false),Right:W.Create(false)};}),MousePosSt1:$.Field(function(){return{Active:false,PosV:W.Create([0,0])};})},Interpolation1:$.Class({},{get_Double:function(){return $.New(_0,{$:0});}}),Key:$.Class({},{Fresh:function(){return $.New(_1,{$:0,$0:h.Int()});}}),ListModel:$.Class({Add:function(uy){var uz,uA,uB,uC,uE=this,uF;uz=U.Get(this.Var);if(!_2.Contains(this.get_Key(),uy,uz)){uB=this.Storage;uA=U.Set(this.Var,uB.Add(uy,uz));}else{uC=c.findINdex(function(uD){return l.Equals((uE.get_Key())(uD),(uE.get_Key())(uy));},uz);uF=uE.Storage;uA=U.Set(uE.Var,uF.SetAt(uC,uy,uz));}return uA;},Clear:function(){return U.Set(this.Var,this.Storage.Set(d.empty()));},ContainsKey:function(uG){var uI=this;return d.exists(function(uH){return l.Equals(uI.key.call(null,uH),uG);},U.Get(uI.Var));},ContainsKeyAsView:function(uJ){var uK,uM=this,uN,uP;uK=function(uL){return l.Equals(uM.key.call(null,uL),uJ);};uN=function(uO){return d.exists(uK,uO);};uP=uM.Var.get_View();return t.Map(uN,uP);},Find:function(uQ){return c.find(uQ,U.Get(this.Var));},FindAsView:function(uR){var uS,uU;uS=function(uT){return c.find(uR,uT);};uU=this.Var.get_View();return t.Map(uS,uU);},FindByKey:function(uV){var uX=this;return c.find(function(uW){return l.Equals(uX.key.call(null,uW),uV);},U.Get(uX.Var));},FindByKeyAsView:function(uY){var uZ,u1=this,u2,u4;uZ=function(u0){return l.Equals(u1.key.call(null,u0),uY);};u2=function(u3){return c.find(uZ,u3);};u4=u1.Var.get_View();return t.Map(u2,u4);},Iter:function(u5){return c.iter(u5,U.Get(this.Var));},Lens:function(u6){var u7,u9;u7=function(u8){return u8;};u9=function(){return function(u$){return u$;};};return this.LensInto(u7,u9,u6);},LensInto:function(va,vb,vc){return _3.New(this,vc,va,vb);},Remove:function(vd){var ve,vf,vg,vh,vi,vj;ve=U.Get(this.Var);if(_2.Contains(this.key,vd,ve)){vg=this.key;vh=vg(vd);vi=this.Storage;vj=function(vk){return!l.Equals(vg(vk),vh);};vf=U.Set(this.Var,vi.RemoveIf(vj,ve));}else{vf=null;}return vf;},RemoveBy:function(vl){var vm,vn,vo,vr;vm=this.Var;vn=this.Storage;vo=function(vp){var vq;vq=vl(vp);return!vq;};vr=U.Get(this.Var);return U.Set(vm,vn.RemoveIf(vo,vr));},RemoveByKey:function(vs){var vt,vu,vv,vx=this,vy;vt=this.Var;vu=this.Storage;vv=function(vw){return!l.Equals((vx.get_Key())(vw),vs);};vy=U.Get(vx.Var);return U.Set(vt,vu.RemoveIf(vv,vy));},Set:function(vz){return U.Set(this.Var,this.Storage.Set(vz));},TryFind:function(vA){return c.tryFind(vA,U.Get(this.Var));},TryFindAsView:function(vB){var vC,vE;vC=function(vD){return c.tryFind(vB,vD);};vE=this.Var.get_View();return t.Map(vC,vE);},TryFindByKey:function(vF){var vH=this;return c.tryFind(function(vG){return l.Equals(vH.key.call(null,vG),vF);},U.Get(vH.Var));},TryFindByKeyAsView:function(vI){var vJ,vL=this,vM,vO;vJ=function(vK){return l.Equals(vL.key.call(null,vK),vI);};vM=function(vN){return c.tryFind(vJ,vN);};vO=vL.Var.get_View();return t.Map(vM,vO);},UpdateAll:function(vP){var vQ,vR,vZ=this;vQ=this.Var;vR=function(vS){var vT;vT=function(vU){return function(vV){var vW,vY;vW=function(vX){return c.set(vS,vU,vX);};vY=vP(vV);return s.iter(vW,vY);};};c.iteri(vT,vS);return vZ.Storage.Set(vS);};return U.Update(vQ,vR);},UpdateBy:function(v0,v1){var v2,v3,v5=this,v6,v7,v8,v9,v_,v$;v2=U.Get(this.Var);v3=c.tryFindIndex(function(v4){return l.Equals(v5.key.call(null,v4),v1);},v2);if(v3.$==1){v7=v3.$0;v8=v0(c.get(v2,v7));if(v8.$==1){v_=v8.$0;v$=v5.Storage;v9=U.Set(v5.Var,v$.SetAt(v7,v_,v2));}else{v9=null;}v6=v9;}else{v6=null;}return v6;},get_Key:function(){return this.key;},get_Length:function(){return c.length(U.Get(this.Var));},get_LengthAsView:function(){var wa,wc;wa=function(wb){return c.length(wb);};wc=this.Var.get_View();return t.Map(wa,wc);},get_View:function(){return this.view;}},{Create:function(wd,we){var wf,wg;wf=d.toArray(we);wg=_4.InMemory(wf);return _5.CreateWithStorage(wd,wg);},CreateWithStorage:function(wh,wi){var wj,wk,wl,wm,wp,wq;wj=H.distinctBy(wh,wi.Init());wk=d.toArray(wj);wl=W.Create(wk);wm=function(wn){var wo;wo=wi.Set(wn);return wn.slice();};wp=wl.get_View();wq=t.Map(wm,wp);return $.New(_5,{key:wh,Var:wl,Storage:wi,view:wq});}}),ListModel1:$.Class({},{FromSeq:function(wr){var ws;ws=function(wt){return wt;};return _5.Create(ws,wr);},Key:function(wu){return wu.key;},View:function(wv){return wv.view;}}),ListModels:{Contains:function(ww,wx,wy){var wz;wz=ww(wx);return d.exists(function(wA){return l.Equals(ww(wA),wz);},wy);}},Model:$.Class({get_View:function(){return _6.View(this);}},{Create:function(wB,wC){var wD,wE,wF;wD=W.Create(wC);wE=wD.get_View();wF=t.Map(wB,wE);return $.New(_7,{$:0,$0:wD,$1:wF});},Update:function(wG,wH){var wI,wJ;wI=wH.$0;wJ=function(wK){wG(wK);return wK;};return U.Update(wI,wJ);}}),Model1:$.Class({},{View:function(wL){var wM;wM=wL.$1;return wM;}}),ReactiveExtensions:$.Class({},{New:function(){return $.New(this,{});}}),RefImpl:$.Class({Get:function(){return this.get.call(null,this.baseRef.Get());},Set:function(wN){var wP=this;return this.baseRef.Update(function(wO){return(wP.update.call(null,wO))(wN);});},Update:function(wQ){var wS=this;return this.baseRef.Update(function(wR){return(wS.update.call(null,wR))(wQ(wS.get.call(null,wR)));});},UpdateMaybe:function(wT){var wV=this;return this.baseRef.UpdateMaybe(function(wU){return s.map(wV.update.call(null,wU),wT(wV.get.call(null,wU)));});},get_Id:function(){return this.id;},get_View:function(){var wW,wX;wW=this.get;wX=this.baseRef.get_View();return t.Map(wW,wX);}},{New:function(wY,wZ,w0){var w1;w1=$.New(this,{});w1.baseRef=wY;w1.get=wZ;w1.update=w0;w1.id=h.Id();return w1;}}),RefImpl1:$.Class({Get:function(){return this.get.call(null,this.m.FindByKey(this.key));},Set:function(w2){var w3,w4,w6=this,w7;w3=this.m;w4=function(w5){return{$:1,$0:(w6.update.call(null,w5))(w2)};};w7=w6.key;return w3.UpdateBy(w4,w7);},Update:function(w8){var w9,w_,xa=this,xb;w9=this.m;w_=function(w$){return{$:1,$0:(xa.update.call(null,w$))(w8(xa.get.call(null,w$)))};};xb=xa.key;return w9.UpdateBy(w_,xb);},UpdateMaybe:function(xc){var xd,xe,xg=this,xh;xd=this.m;xe=function(xf){return s.map(xg.update.call(null,xf),xc(xg.get.call(null,xf)));};xh=xg.key;return xd.UpdateBy(xe,xh);},get_Id:function(){return this.id;},get_View:function(){var xi,xj;xi=this.get;xj=this.m.FindByKeyAsView(this.key);return t.Map(xi,xj);}},{New:function(xk,xl,xm,xn){var xo;xo=$.New(this,{});xo.m=xk;xo.key=xl;xo.get=xm;xo.update=xn;xo.id=h.Id();return xo;}}),Route:{Append:function(xp,xq){var xr,xs;xr=xp.$0;xs=xq.$0;return{$:0,$0:o.Append(xr,xs)};},FromList:function(xt){var xu,xv;xu=c.ofSeq(xt);xv=o.FromArray(xu);return{$:0,$0:xv};},MakeHash:function(xw){var xx,xy,xz;xx=xw.$0;xy=o.ToArray(xx);xz=c.map(function(xA){return _8(xA);},xy);return _9.concat("/",xz);},NoHash:function(xB){return _9.StartsWith(xB,"#")?xB.substring(1):xB;},ParseHash:function(xC){var xD,xE,xG;xD=_9.SplitChars(_.NoHash(xC),[47],1);xE=c.map(function(xF){return ba(xF);},xD);xG=o.FromArray(xE);return{$:0,$0:xG};},SameHash:function(xH,xI){return _.NoHash(xH)===_.NoHash(xI);},ToList:function(xJ){var xK,xL;xK=xJ.$0;xL=o.ToArray(xK);return A.ofArray(xL);}},RouteMap:$.Class({},{Create:function(xM,xN){return{Des:xN,Ser:xM};},Install:function(xO){return bb.InstallMap(xO);}}),Router1:$.Class({},{Dir:function(xP,xQ){var xR;xR=bc.Merge(xQ);return bc.Prefix(xP,xR);},Install:function(xS,xT){return bb.Install(xS,xT);},Merge:function(xU){return bb.MergeRouters(xU);},Prefix:function(xV,xW){var xX,xY;xX=xW.$0;xY=xW.$1;return{$:0,$0:xX,$1:bd.Prefix(xV,xY)};},Route:function(xZ,x0,x1){return bb.DefineRoute(xZ,x0,x1);}}),Routing:{ComputeBodies:function(x2){var x3,x4,x6;x3=be.New12();x4=function(x5){return x3.set_Item(x5.RouteId,x5);};x6=bd.ToArray(x2);c.iter(x4,x6);return x3;},DefineRoute:function(x7,x8,x9){var x_,x$,ya,yb;x_=W.Create(x8);x$=h.Int();ya=(x9({$:0,$0:x$}))(x_);yb=bd.Leaf({$:0,$0:x$,$1:function(yc){var yd,yf;yd=function(ye){return yc.UpdateRoute.call(null,bb.DoLink(x7,ye));};yf=x_.get_View();D.Sink(yd,yf);return{OnRouteChanged:function(yg){return U.Set(x_,bb.DoRoute(x7,yg));},OnSelect:function(){return yc.UpdateRoute.call(null,bb.DoLink(x7,U.Get(x_)));},RouteId:x$,RouteValue:ya};}});return{$:0,$0:{$:1,$0:ya},$1:yb};},DoLink:function(yi,yj){return _.FromList(yi.Ser.call(null,yj));},DoRoute:function(yk,yl){return yk.Des.call(null,_.ToList(yl));},Install:function(ym,yn){var yo,yp,yq,yt,yu,yA,yB,yD,yE,yF,yG,yH,yI,yJ,yK,yM,yN,yU;yo=yn.$0;yp=yn.$1;yq=bb.InstallMap({Des:function(yr){return _.FromList(yr);},Ser:function(ys){return _.ToList(ys);}});yt={Bodies:undefined,CurrentRoute:yq,CurrentSite:0,Selection:undefined};yu=function(yv){return function(yw){var yx,yy;yx=yw.$1;yy=yw.$0;return yx({UpdateRoute:function(yz){return bb.OnInternalSiteUpdate(yt,yy,yv,yz);}});};};yA=bd.Map(yu,yp);yt.Bodies=bb.ComputeBodies(yA);yB=function(yC){return bd.Lookup(yA,_.ToList(yC));};yD=yB(U.Get(yq));if(yD.$==0){yG=yD.$0;yD.$1;yt.CurrentSite=yG.RouteId;yF=W.Create(yG.RouteValue);}else{if(yo.$==1){yJ=yo.$0;yI=yJ;}else{yI=M.FailWith("Site.Install fails on empty site");}yH=yI;yF=W.Create(yH);}yE=yF;yt.Selection=yE;yK=function(yL){return bb.OnSelectSite(yt,ym(yL));};yM=yE.get_View();D.Sink(yK,yM);yN=function(yO){var yP,yQ,yR,yS,yT;yP=yB(yO);if(yP.$==1){yQ=null;}else{yR=yP.$0;yS=yP.$1;yT=_.FromList(yS);yQ=bb.OnGlobalRouteChange(yt,yR,yT);}return yQ;};yN(U.Get(yq));yU=yq.get_View();D.Sink(yN,yU);return yE;},InstallMap:function(yV){var yW,yZ,y0,y3,y5,y8;yW=function(){var yY;yY=_.ParseHash(bf.location.hash);return yV.Des.call(null,_.ToList(yY));};yZ=W.Create(yW(null));y0=function(y1){var y2;y2=U.Get(yZ);return!l.Equals(yV.Ser.call(null,y2),yV.Ser.call(null,y1))?U.Set(yZ,y1):null;};y3=function(){return y0(yW(null));};bf.onpopstate=y3;bf.onhashchange=y3;y5=function(y6){var y7;y7=_.MakeHash(_.FromList(yV.Ser.call(null,y6)));return!_.SameHash(bf.location.hash,y7)?void(bf.location.hash=y7):null;};y8=yZ.get_View();D.Sink(y5,y8);return yZ;},MergeRouters:function(y9){var y_,y$,zc,zd,ze,zh,zi,zj;y_=d.toArray(y9);y$=function(za){var zb;zb=za.$1;return zb;};zc=d.map(y$,y_);zd=bd.Merge(zc);ze=function(zf){var zg;zg=zf.$0;return zg;};zh=d.tryPick(ze,y_);if(zd.$==1){zj=zd.$0;zi={$:0,$0:zh,$1:zj};}else{zi=M.FailWith("Invalid Site.Merge: need more prefix disambiguation");}return zi;},OnGlobalRouteChange:function(zk,zl,zm){var zn;if(zk.CurrentSite!==zl.RouteId){zk.CurrentSite=zl.RouteId;zn=U.Set(zk.Selection,zl.RouteValue);}else{zn=null;}return zl.OnRouteChanged.call(null,zm);},OnInternalSiteUpdate:function(zo,zp,zq,zr){var zs,zt;if(zo.CurrentSite===zp){zt=_.Append(_.FromList(zq),zr);zs=bb.SetCurrentRoute(zo,zt);}else{zs=null;}return zs;},OnSelectSite:function(zu,zv){var zw,zx;zw=zv.$0;if(zu.CurrentSite!==zw){zu.CurrentSite=zw;zx=zu.Bodies.get_Item(zw).OnSelect.call(null,null);}else{zx=null;}return zx;},SetCurrentRoute:function(zy,zz){return!l.Equals(U.Get(zy.CurrentRoute),zz)?U.Set(zy.CurrentRoute,zz):null;}},Snap1:{Bind:function(zA,zB){var zC,zD,zF;zC=bg.Create();zD=function(){return bg.MarkObsolete(zC);};zF=function(zG){var zH;zH=zA(zG);return bg.When(zH,function(zI){return(bg.IsForever(zH)?bg.IsForever(zB):false)?bg.MarkForever(zC,zI):bg.MarkReady(zC,zI);},zD);};bg.When(zB,zF,zD);return zC;},Create:function(){return bg.Make({$:3,$0:[],$1:[]});},CreateForever:function(zJ){return bg.Make({$:0,$0:zJ});},CreateWithValue:function(zK){return bg.Make({$:2,$0:zK,$1:[]});},IsForever:function(zL){var zM;zM=zL.State;return zM.$==0?true:false;},IsObsolete:function(zN){var zO;zO=zN.State;return zO.$==1?true:false;},Make:function(zP){return{State:zP};},Map:function(zQ,zR){var zS,zT,zU,zV;zS=zR.State;if(zS.$==0){zU=zS.$0;zT=bg.CreateForever(zQ(zU));}else{zV=bg.Create();bg.When(zR,function(zW){var zX;zX=zQ(zW);return bg.MarkDone(zV,zR,zX);},function(){return bg.MarkObsolete(zV);});zT=zV;}return zT;},Map2:function(zZ,z0,z1){var z2,z3,z4,z5,z6,z7,z8,z9,z$,Aa,Ab,Ac,Ae;z2=[z0.State,z1.State];if(z2[0].$==0){if(z2[1].$==0){z5=z2[0].$0;z6=z2[1].$0;z4=bg.CreateForever((zZ(z5))(z6));}else{z7=z2[0].$0;z4=bg.Map(zZ(z7),z1);}z3=z4;}else{if(z2[1].$==0){z9=z2[1].$0;z8=bg.Map(function(z_){return(zZ(z_))(z9);},z0);}else{z$=bg.Create();Aa=[{$:0}];Ab=[{$:0}];Ac=function(){Aa[0]={$:0};Ab[0]={$:0};return bg.MarkObsolete(z$);};Ae=function(){var Ag,Ah,Ai,Aj,Ak;Ag=[Aa[0],Ab[0]];if(Ag[0].$==1){if(Ag[1].$==1){Aj=Ag[0].$0;Ak=Ag[1].$0;Ai=(bg.IsForever(z0)?bg.IsForever(z1):false)?bg.MarkForever(z$,(zZ(Aj))(Ak)):bg.MarkReady(z$,(zZ(Aj))(Ak));}else{Ai=null;}Ah=Ai;}else{Ah=null;}return Ah;};bg.When(z0,function(Al){Aa[0]={$:1,$0:Al};return Ae(null);},Ac);bg.When(z1,function(Am){Ab[0]={$:1,$0:Am};return Ae(null);},Ac);z8=z$;}z3=z8;}return z3;},Map3:function(An,Ao,Ap,Aq){var Ar,As,At,Au,Av,Aw,Ax,Ay,Az,AB,AC,AD,AF,AI,AJ,AK,AL,AN,AQ,AR,AU,AV,AW,AX,AY,A0;Ar=[Ao.State,Ap.State,Aq.State];if(Ar[0].$==0){if(Ar[1].$==0){if(Ar[2].$==0){Av=Ar[0].$0;Aw=Ar[1].$0;Ax=Ar[2].$0;Au=bg.CreateForever(((An(Av))(Aw))(Ax));}else{Ay=Ar[0].$0;Az=Ar[1].$0;Au=bg.Map(function(AA){return((An(Ay))(Az))(AA);},Aq);}At=Au;}else{if(Ar[2].$==0){AC=Ar[0].$0;AD=Ar[2].$0;AB=bg.Map(function(AE){return((An(AC))(AE))(AD);},Ap);}else{AF=Ar[0].$0;AB=bg.Map2(function(AG){return function(AH){return((An(AF))(AG))(AH);};},Ap,Aq);}At=AB;}As=At;}else{if(Ar[1].$==0){if(Ar[2].$==0){AK=Ar[1].$0;AL=Ar[2].$0;AJ=bg.Map(function(AM){return((An(AM))(AK))(AL);},Ao);}else{AN=Ar[1].$0;AJ=bg.Map2(function(AO){return function(AP){return((An(AO))(AN))(AP);};},Ao,Aq);}AI=AJ;}else{if(Ar[2].$==0){AR=Ar[2].$0;AQ=bg.Map2(function(AS){return function(AT){return((An(AS))(AT))(AR);};},Ao,Ap);}else{AU=bg.Create();AV=[{$:0}];AW=[{$:0}];AX=[{$:0}];AY=function(){AV[0]={$:0};AW[0]={$:0};AX[0]={$:0};return bg.MarkObsolete(AU);};A0=function(){var A2,A3,A4,A5,A6,A7,A8;A2=[AV[0],AW[0],AX[0]];if(A2[0].$==1){if(A2[1].$==1){if(A2[2].$==1){A6=A2[0].$0;A7=A2[1].$0;A8=A2[2].$0;A5=((bg.IsForever(Ao)?bg.IsForever(Ap):false)?bg.IsForever(Aq):false)?bg.MarkForever(AU,((An(A6))(A7))(A8)):bg.MarkReady(AU,((An(A6))(A7))(A8));}else{A5=null;}A4=A5;}else{A4=null;}A3=A4;}else{A3=null;}return A3;};bg.When(Ao,function(A9){AV[0]={$:1,$0:A9};return A0(null);},AY);bg.When(Ap,function(A_){AW[0]={$:1,$0:A_};return A0(null);},AY);bg.When(Aq,function(A$){AX[0]={$:1,$0:A$};return A0(null);},AY);AQ=AU;}AI=AQ;}As=AI;}return As;},MapAsync:function(Ba,Bb){var Bc;Bc=bg.Create();bg.When(Bb,function(Bd){return bh.StartTo(Ba(Bd),function(Be){return bg.MarkDone(Bc,Bb,Be);});},function(){return bg.MarkObsolete(Bc);});return Bc;},MapCached:function(Bg,Bh,Bi){var Bj;Bj=function(Bk){var Bl,Bm,Bn,Bo,Bp,Bq,Br;Bl=Bg[0];if(Bl.$==1){Bl.$0[1];Bn=Bl.$0[0];if(l.Equals(Bk,Bn)){Bl.$0[0];Bp=Bl.$0[1];Bo=Bp;}else{Bq=Bh(Bk);Bg[0]={$:1,$0:[Bk,Bq]};Bo=Bq;}Bm=Bo;}else{Br=Bh(Bk);Bg[0]={$:1,$0:[Bk,Br]};Bm=Br;}return Bm;};return bg.Map(Bj,Bi);},MarkDone:function(Bs,Bt,Bu){return bg.IsForever(Bt)?bg.MarkForever(Bs,Bu):bg.MarkReady(Bs,Bu);},MarkForever:function(Bv,Bw){var Bx,By,Bz;Bx=Bv.State;if(Bx.$==3){Bz=Bx.$0;Bv.State={$:0,$0:Bw};By=d.iter(function(BA){return BA(Bw);},Bz);}else{By=null;}return By;},MarkObsolete:function(BB){var BC,BD,BE,BG;BC=BB.State;if(BC.$==1){BD=null;}else{if(BC.$==2){BE=BC.$1;BB.State={$:1};BD=d.iter(function(BF){return BF(null);},BE);}else{if(BC.$==3){BG=BC.$1;BB.State={$:1};BD=d.iter(function(BH){return BH(null);},BG);}else{BD=null;}}}return BD;},MarkReady:function(BI,BJ){var BK,BL,BM,BN;BK=BI.State;if(BK.$==3){BM=BK.$1;BN=BK.$0;BI.State={$:2,$0:BJ,$1:BM};BL=d.iter(function(BO){return BO(BJ);},BN);}else{BL=null;}return BL;},Sequence:function(BP){var BQ,BR,BS,BT,BU,BV,BW,BY,B1;if(d.isEmpty(BP)){BQ=bg.CreateForever(d.empty());}else{BR=bg.Create();BS=c.ofSeq(BP);BT=c.length(BS);BU=[0];BV=[[]];BW=function(){BU[0]=0;BV[0]=[];return bg.MarkObsolete(BR);};BY=function(){return BU[0]===BT?d.forall(function(B0){return bg.IsForever(B0);},BS)?bg.MarkForever(BR,BV[0]):bg.MarkReady(BR,BV[0]):null;};B1=function(B2){return function(B3){return bg.When(B3,function(B4){BV[0][B2]=B4;bi.incr(BU);return BY(null);},BW);};};c.iteri(B1,BS);BQ=BR;}return BQ;},SnapshotOn:function(B5,B6){var B7,B8,B9,B_,B$,Ca,Cb,Cd;B7=[B5.State,B6.State];if(B7[1].$==0){B9=B7[1].$0;B8=bg.CreateForever(B9);}else{B_=bg.Create();B$=[{$:0}];Ca=[false];Cb=function(){B$[0]={$:0};return bg.MarkObsolete(B_);};Cd=function(){var Cf,Cg,Ch,Ci,Cj,Ck,Cl,Cm,Cn;if(Ca[0]){Cg=B$[0];if(Cg.$==1){Cg.$0;if(bg.IsForever(B6)){Cj=Cg.$0;Ci=bg.MarkForever(B_,Cj);}else{if(Cg.$==1){Cl=Cg.$0;Ck=bg.MarkReady(B_,Cl);}else{Ck=null;}Ci=Ck;}Ch=Ci;}else{if(Cg.$==1){Cn=Cg.$0;Cm=bg.MarkReady(B_,Cn);}else{Cm=null;}Ch=Cm;}Cf=Ch;}else{Cf=null;}return Cf;};bg.When(B5,function(){Ca[0]=true;return Cd(null);},Cb);bg.When(B6,function(Cp){B$[0]={$:1,$0:Cp};return Cd(null);},function(){});B8=B_;}return B8;},When:function(Cr,Cs,Ct){var Cu,Cv,Cw,Cx,Cy,Cz,CA;Cu=Cr.State;if(Cu.$==1){Cv=Ct(null);}else{if(Cu.$==2){Cw=Cu.$0;Cx=Cu.$1;Cx.push(Ct);Cv=Cs(Cw);}else{if(Cu.$==3){Cy=Cu.$1;Cz=Cu.$0;Cz.push(Cs);Cv=Cy.push(Ct);}else{CA=Cu.$0;Cv=Cs(CA);}}}return Cv;}},Storage1:{ArrayStorage:$.Class({Add:function(CB,CC){var CD;CD=CC.push(CB);return CC;},Init:function(){return this.init;},RemoveIf:function(CE,CF){return c.filter(CE,CF);},Set:function(CG){return d.toArray(CG);},SetAt:function(CH,CI,CJ){c.set(CJ,CH,CI);return CJ;}},{New:function(CK){var CL;CL=$.New(this,{});CL.init=CK;return CL;}}),InMemory:function(CM){return bj.New(CM);},LocalStorage:function(CN,CO){return bk.New(CN,CO);},LocalStorageBackend:$.Class({Add:function(CP,CQ){var CR;CR=CQ.push(CP);return this.set(CQ);},Init:function(){var CS,CT,CU,CV,CW,CX;CS=this.storage.getItem(this.id);if(CS===null){CT=[];}else{try{CV=bl.parse(CS);CW=this.serializer.Decode;CU=c.map(CW,CV);}catch(CX){CU=[];}CT=CU;}return CT;},RemoveIf:function(CY,CZ){var C0;C0=c.filter(CY,CZ);return this.set(C0);},Set:function(C1){var C2;C2=d.toArray(C1);return this.set(C2);},SetAt:function(C3,C4,C5){c.set(C5,C3,C4);return this.set(C5);},clear:function(){return this.storage.removeItem(this.id);},set:function(C6){var C7,C8;C7=this.serializer.Encode;C8=c.map(C7,C6);this.storage.setItem(this.id,bl.stringify(C8));return C6;}},{New:function(C9,C_){var C$;C$=$.New(this,{});C$.id=C9;C$.serializer=C_;C$.storage=bf.localStorage;return C$;}})},String:{isBlank:function(Da){return _9.forall(function(Db){return bm.IsWhiteSpace(Db);},Da);}},Submitter:$.Class({Trigger:function(){return U.Set(this["var"],null);},get_Input:function(){return this.input;},get_View:function(){return this.view;}},{Create:function(Dc,Dd){return bn.New(Dc,Dd);},CreateOption:function(De){var Df;Df=function(Dg){return{$:1,$0:Dg};};return bn.New(t.Map(Df,De),{$:0});},New:function(Dh,Di){var Dj,Dk,Dl;Dj=$.New(this,{});Dj.input=Dh;Dj["var"]=W.Create(null);Dk=Dj["var"].get_View();Dl=Dj.input;Dj.view=t.SnapshotOn(Di,Dk,Dl);return Dj;},View:function(Dm){return Dm.get_View();}}),Submitter1:$.Class({},{Input:function(Dn){return Dn.get_Input();},Trigger:function(Do){return Do.Trigger();}}),Trans:$.Class({},{AnimateChange:function(Dp,Dq,Dr){return(Dp.TChange.call(null,Dq))(Dr);},AnimateEnter:function(Ds,Dt){return Ds.TEnter.call(null,Dt);},AnimateExit:function(Du,Dv){return Du.TExit.call(null,Dv);},CanAnimateChange:function(Dw){return(Dw.TFlags&1)!==0;},CanAnimateEnter:function(Dx){return(Dx.TFlags&2)!==0;},CanAnimateExit:function(Dy){return(Dy.TFlags&4)!==0;},Trivial:function(){return{TChange:function(){return function(DA){return n.Const(DA);};},TEnter:function(DB){return n.Const(DB);},TExit:function(DC){return n.Const(DC);},TFlags:0};}}),Trans1:$.Class({},{Change:function(DD,DE){var DF;DF=DE.TFlags|1;return{TChange:DD,TEnter:DE.TEnter,TExit:DE.TExit,TFlags:DF};},Create:function(DG){return{TChange:DG,TEnter:function(DH){return n.Const(DH);},TExit:function(DI){return n.Const(DI);},TFlags:1};},Enter:function(DJ,DK){var DL;DL=DK.TFlags|2;return{TChange:DK.TChange,TEnter:DJ,TExit:DK.TExit,TFlags:DL};},Exit:function(DM,DN){var DO;DO=DN.TFlags|4;return{TChange:DN.TChange,TEnter:DN.TEnter,TExit:DM,TFlags:DO};}}),Trie1:{AllSome:function(DP){var DQ,DR,DS,DT,DU,DV;DQ=bo.Get(DP);DR=bq.New2();DS=true;while(DS?DQ.MoveNext():false){DT=DQ.get_Current();if(DT.$==1){DV=DT.$0;DU=DR.Add(DV);}else{DU=DS=false;}}return DS?{$:1,$0:DR.ToArray()}:{$:0};},Empty:function(){return{$:1};},IsLeaf:function(DW){return DW.$==2?true:false;},Leaf:function(DX){return{$:2,$0:DX};},Look:function(DY,DZ){var D0,D1,D2,D3,D4,D5,D6,D7,D8,D9;D0=[DZ,DY];if(D0[0].$==2){D2=D0[0].$0;D1={$:0,$0:D2,$1:DY};}else{if(D0[0].$==0){if(D0[1].$==1){D4=D0[1].$0;D5=D0[1].$1;D6=D0[0].$0;D7=br.TryFind(D4,D6);if(D7.$==0){D8={$:1};}else{D9=D7.$0;D8=bd.Look(D5,D9);}D3=D8;}else{D3={$:1};}D1=D3;}else{D1={$:1};}}return D1;},Lookup:function(D_,D$){return bd.Look(d.toList(D$),D_);},Map:function(Ea,Eb){return bd.MapLoop($.New(N,{$:0}),Ea,Eb);},MapLoop:function(Ec,Ed,Ee){var Ef,Eg,Eh,Ei,El;if(Ee.$==1){Ef={$:1};}else{if(Ee.$==2){Eg=Ee.$0;Ef={$:2,$0:(Ed(Ec))(Eg)};}else{Eh=Ee.$0;Ei=function(Ej){return function(Ek){return bd.MapLoop(A.append(Ec,A.ofArray([Ej])),Ed,Ek);};};El=br.Map(Ei,Eh);Ef=bd.TrieBranch(El);}}return Ef;},Mapi:function(Em,En){var Eo,Ep;Eo=[0];Ep=function(){var Er;Er=Eo[0];Eo[0]=Er+1;return Er;};return bd.Map(function(Es){return(Em(Ep(null)))(Es);},En);},Merge:function(Et){var Eu,Ev,Ew,Ey,Ez,ED,EF,EH,EI;Eu=d.toArray(Et);Ev=c.length(Eu);if(Ev===0){Ew={$:1,$0:{$:1}};}else{if(Ev===1){Ew={$:1,$0:c.get(Eu,0)};}else{if(d.exists(function(Ex){return bd.IsLeaf(Ex);},Eu)){Ey={$:0};}else{Ez=function(EA){var EB,EC;if(EA.$==0){EC=EA.$0;EB={$:1,$0:EC};}else{EB={$:0};}return EB;};ED=function(EE){return bd.Merge(EE);};EF=function(EG){return bd.TrieBranch(EG);};EH=d.choose(Ez,Eu);EI=bd.MergeMaps(ED,EH);Ey=s.map(EF,EI);}Ew=Ey;}}return Ew;},MergeMaps:function(EJ,EK){var EL,EN,ES,ET,EU,EV,E2,E3,E4;EL=d.collect(function(EM){return br.ToSeq(EM);},EK);EN=function(EO){return function(EP){var EQ,ER;EQ=EP[0];ER=EP[1];return bd.MultiAdd(EQ,ER,EO);};};ES=bs.New1([]);ET=d.fold(EN,ES,EL);EU=br.ToSeq(ET);EV=function(EW){var EX,EY,EZ,E1;EX=EW[0];EY=EW[1];EZ=function(E0){return[EX,E0];};E1=EJ(EY);return s.map(EZ,E1);};E2=d.map(EV,EU);E3=bd.AllSome(E2);E4=function(E5){return br.OfArray(d.toArray(E5));};return s.map(E4,E3);},MultiAdd:function(E6,E7,E8){return E8.Add(E6,$.New(N,{$:1,$0:E7,$1:bd.MultiFind(E6,E8)}));},MultiFind:function(E9,E_){return M.DefaultArg(br.TryFind(E9,E_),$.New(N,{$:0}));},Prefix:function(E$,Fa){return bd.TrieBranch(bs.New1(A.ofArray([[E$,Fa]])));},ToArray:function(Fb){var Fc,Fd;Fc=[];Fd=bd.Map(function(){return function(Ff){return Fc.push(Ff);};},Fb);return Fc.slice(0);},TrieBranch:function(Fg){return Fg.get_IsEmpty()?{$:1}:{$:0,$0:Fg};}},Var:$.Class({Get:function(){return U.Get(this);},Set:function(Fh){return U.Set(this,Fh);},Update:function(Fi){return U.Update(this,Fi);},UpdateMaybe:function(Fj){var Fk,Fl,Fm;Fk=Fj(U.Get(this));if(Fk.$==1){Fm=Fk.$0;Fl=U.Set(this,Fm);}else{Fl=null;}return Fl;},get_Id:function(){return"uinref"+$$.String(U.GetId(this));},get_View:function(){var Fo=this;return{$:0,$0:function(){return U.Observe(Fo);}};},get_View1:function(){return this.get_View();}},{Create:function(Fp){return $.New(W,{Const:false,Current:Fp,Snap:bg.CreateWithValue(Fp),Id:h.Int()});}}),Var1:$.Class({},{Get:function(Fq){return Fq.Current;},GetId:function(Fr){return Fr.Id;},Lens:function(Fs,Ft,Fu){return bt.New(Fs,Ft,Fu);},Observe:function(Fv){return Fv.Snap;},Set:function(Fw,Fx){var Fy;if(Fw.Const){Fy=null;}else{bg.MarkObsolete(Fw.Snap);Fw.Current=Fx;Fy=void(Fw.Snap=bg.CreateWithValue(Fx));}return Fy;},SetFinal:function(Fz,FA){var FB;if(Fz.Const){FB=null;}else{Fz.Const=true;Fz.Current=FA;FB=void(Fz.Snap=bg.CreateForever(FA));}return FB;},Update:function(FC,FD){var FE;FE=FD(U.Get(FC));return U.Set(FC,FE);}}),View:$.Class({},{ConvertSeqNode:function(FF,FG){var FH,FI;FH=W.Create(FG);FI=FH.get_View();return{NValue:FF(FI),NVar:FH,NView:FI};},CreateLazy:function(FJ){var FK,FL;FK=[{$:0}];FL=function(){var FN,FO,FP,FQ,FR,FS,FT;FN=FK[0];if(FN.$==1){FP=FN.$0;if(!bg.IsObsolete(FP)){FR=FN.$0;FQ=FR;}else{FS=FJ(null);FK[0]={$:1,$0:FS};FQ=FS;}FO=FQ;}else{FT=FJ(null);FK[0]={$:1,$0:FT};FO=FT;}return FO;};return{$:0,$0:FL};},CreateLazy2:function(FU,FV,FW){var FX,FY;FX=FV.$0;FY=FW.$0;return t.CreateLazy(function(){var F0,F1;F0=FX(null);F1=FY(null);return(FU(F0))(F1);});},Map:function(F2,F3){var F4;F4=F3.$0;return t.CreateLazy(function(){var F6;F6=F4(null);return bg.Map(F2,F6);});},Map2:function(F7,F8,F9){var F_;F_=function(F$){return function(Ga){return bg.Map2(F7,F$,Ga);};};return t.CreateLazy2(F_,F8,F9);},MapAsync:function(Gb,Gc){var Gd;Gd=Gc.$0;return t.CreateLazy(function(){var Gf;Gf=Gd(null);return bg.MapAsync(Gb,Gf);});},MapAsync2:function(Gg,Gh,Gi){var Gj,Gl;Gj=function(Gk){return Gk;};Gl=t.Map2(Gg,Gh,Gi);return t.MapAsync(Gj,Gl);},MapCached:function(Gm,Gn){var Go,Gp;Go=Gn.$0;Gp=[{$:0}];return t.CreateLazy(function(){var Gr;Gr=Go(null);return bg.MapCached(Gp,Gm,Gr);});},MapSeqCached:function(Gs,Gt){var Gu;Gu=function(Gv){return Gv;};return t.MapSeqCachedBy(Gu,Gs,Gt);},MapSeqCachedBy:function(Gw,Gx,Gy){var Gz,GA;Gz=[be.New12()];GA=function(GB){var GC,GD,GE,GI,GJ;GC=Gz[0];GD=be.New12();GE=function(GF){var GG,GH;GG=Gw(GF);GH=GC.ContainsKey(GG)?GC.get_Item(GG):Gx(GF);GD.set_Item(GG,GH);return GH;};GI=d.toArray(GB);GJ=c.map(GE,GI);Gz[0]=GD;return GJ;};return t.Map(GA,Gy);},MapSeqCachedView:function(GK,GL){var GM,GO;GM=function(GN){return GN;};GO=function(){return function(GQ){return GK(GQ);};};return t.MapSeqCachedViewBy(GM,GO,GL);},MapSeqCachedViewBy:function(GR,GS,GT){var GU,GV;GU=[be.New12()];GV=function(GW){var GX,GY,GZ,G0,G9;GX=GU[0];GY=be.New12();GZ=d.toArray(GW);G0=function(G1){var G2,G3,G4,G5,G6,G7;G2=GR(G1);if(GX.ContainsKey(G2)){G5=GX.get_Item(G2);G6=G5.NVar;U.Set(G6,G1);G4=G5;}else{G7=function(G8){return(GS(G2))(G8);};G4=t.ConvertSeqNode(G7,G1);}G3=G4;GY.set_Item(G2,G3);return G3.NValue;};G9=c.map(G0,GZ);GU[0]=GY;return G9;};return t.Map(GV,GT);},SnapshotOn:function(G_,G$,Ha){var Hb,Hc,Hd,He,Hf,Hi;Hb=G$.$0;Hc=Ha.$0;Hd=bg.CreateWithValue(G_);He=[false];Hf=function(){var Hh;if(!He[0]){He[0]=true;Hh=bg.MarkObsolete(Hd);}else{Hh=null;}return Hh;};Hi=function(){var Hk,Hl,Hm,Hn;Hk=Hb(null);Hl=Hc(null);if(He[0]){Hm=bg.SnapshotOn(Hk,Hl);}else{Hn=bg.SnapshotOn(Hk,Hl);bg.When(Hn,function(){return null;},function(){return Hf(null);});Hm=Hd;}return Hm;};return t.CreateLazy(Hi);},UpdateWhile:function(Hq,Hr,Hs){var Ht,Hu;Ht=[Hq];Hu=function(Hv){return function(Hw){Hv?void(Ht[0]=Hw):null;return Ht[0];};};return t.Map2(Hu,Hr,Hs);},get_Do:function(){return{$:0};}}),View1:$.Class({},{Apply:function(Hx,Hy){var Hz;Hz=function(HA){return function(HB){return HA(HB);};};return t.Map2(Hz,Hx,Hy);},Bind:function(HC,HD){return D.Join(t.Map(HC,HD));},Const:function(HE){var HF;HF=bg.CreateForever(HE);return{$:0,$0:function(){return HF;}};},Join:function(HH){var HI;HI=HH.$0;return t.CreateLazy(function(){var HK,HN;HK=function(HL){var HM;HM=HL.$0;return HM(null);};HN=HI(null);return bg.Bind(HK,HN);});},Sequence:function(HO){return t.CreateLazy(function(){var HQ,HT;HQ=function(HR){var HS;HS=HR.$0;return HS(null);};HT=d.map(HQ,HO);return bg.Sequence(HT);});},Sink:function(HU,HV){var HW,HX;HW=HV.$0;HX=function(){var HZ;HZ=HW(null);return bg.When(HZ,HU,function(){return bh.Schedule(HX);});};return bh.Schedule(HX);},TryFinally:function(H1,H2){var H3;H3=H2.$0;return t.CreateLazy(function(){var H5;try{H5=H3(null);}finally{H1(null);}return H5;});},TryWith:function(H6,H7){var H8;H8=H7.$0;return t.CreateLazy(function(){var H_,H$,Ia,Ib;try{H_=H8(null);}catch(H$){Ia=H6(H$);Ib=Ia.$0;H_=Ib(null);}return H_;});}})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Concurrency);b=$.Safe($$.Array);c=$.Safe($$.WebSharper.Arrays);d=$.Safe($$.WebSharper.Seq);e=$.Safe($$.WebSharper.UI);f=$.Safe(e.Next);g=$.Safe(f.Abbrev);h=$.Safe(g.Fresh);i=$.Safe($$.WebSharper.Collections);j=$.Safe(i.HashSetProxy);k=$.Safe(g.HashSet);l=$.Safe($$.WebSharper.Unchecked);m=$.Safe(g.Slot1);n=$.Safe(f.An);o=$.Safe(f.AppendList1);p=$.Safe(f.Anims);q=$.Safe($$.requestAnimationFrame);r=$.Safe(f.Trans);s=$.Safe($$.WebSharper.Option);t=$.Safe(f.View);u=$.Safe($$.WebSharper.Lazy);v=$.Safe(f.Array);w=$.Safe(f.Attrs);x=$.Safe(f.DomUtility);y=$.Safe(f.AttrModule);z=$.Safe(f.AttrProxy);A=$.Safe($$.WebSharper.List);B=$.Safe(f.AnimatedAttrNode);C=$.Safe(f.DynamicAttrNode);D=$.Safe(f.View1);E=$.Safe($$.document);F=$.Safe(f.Doc);G=$.Safe(f.Elt);H=$.Safe($$.Seq);I=$.Safe(f.Docs);J=$.Safe(f.String);K=$.Safe(f.CheckedInput);L=$.Safe(g.Mailbox);M=$.Safe($$.WebSharper.Operators);N=$.Safe(A.T);O=$.Safe($$.jQuery);P=$.Safe(I.NodeSet);Q=$.Safe(f.DocElemNode);R=$.Safe(I.DomNodes);S=$.Safe(f.Easing);T=$.Safe(f.Easings);U=$.Safe(f.Var1);V=$.Safe($$.RegExp);W=$.Safe(f.Var);X=$.Safe(f.FlowBuilder);Y=$.Safe(f.Flow1);Z=$.Safe(f.Input);_0=$.Safe(f.DoubleInterpolation);_1=$.Safe(f.Key);_2=$.Safe(f.ListModels);_3=$.Safe(f.RefImpl1);_4=$.Safe(f.Storage1);_5=$.Safe(f.ListModel);_6=$.Safe(f.Model1);_7=$.Safe(f.Model);_8=$.Safe($$.encodeURIComponent);_9=$.Safe($$.WebSharper.Strings);_=$.Safe(f.Route);ba=$.Safe($$.decodeURIComponent);bb=$.Safe(f.Routing);bc=$.Safe(f.Router1);bd=$.Safe(f.Trie1);be=$.Safe(i.Dictionary);bf=$.Safe($$.window);bg=$.Safe(f.Snap1);bh=$.Safe(g.Async);bi=$.Safe($$.WebSharper.Ref);bj=$.Safe(_4.ArrayStorage);bk=$.Safe(_4.LocalStorageBackend);bl=$.Safe($$.JSON);bm=$.Safe($$.WebSharper.Char);bn=$.Safe(f.Submitter);bo=$.Safe($$.WebSharper.Enumerator);bp=$.Safe(i.ResizeArray);bq=$.Safe(bp.ResizeArrayProxy);br=$.Safe(i.MapModule);bs=$.Safe(i.FSharpMap);return bt=$.Safe(f.RefImpl);});$.OnLoad(function(){$.Inherit(G,F);Z.MousePosSt1();Z.MouseBtnSt1();Z.KeyListenerState();Z.ActivateKeyListener();Z.ActivateButtonListener();T.CubicInOut();x.Doc();w.EmptyAttr();h.counter();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;$.Define($$,{WebSharper:{Control:{Disposable:{Of:function(F){return{Dispose:F};}},Event:{Event:$.Class({AddHandler:function(G){return this.Handlers.Add(G);},RemoveHandler:function(H){var I,K,L,N,O;I=function(J){return a.Equals(H,J);};K=this.Handlers;L=function(M){return K.RemoveAt(M);};N=this.Handlers;O=b.tryFindIndex(I,N);return c.iter(L,O);},Subscribe:function(P){var Q,T=this;Q=function(R){return P.OnNext(R);};this.AddHandler(Q);return e.Of(function(){return T.RemoveHandler(Q);});},Trigger:function(U){var V,W,X;V=this.Handlers.ToArray();for(W=0;W<=V.length-1;W++){X=f.get(V,W);X(U);}return;}})},EventModule:{Choose:function(Y,Z){var _0;_0=g.New();h.addListener(Z,function(_1){var _2,_3,_4;_2=Y(_1);if(_2.$==0){_3=null;}else{_4=_2.$0;_3=_0.event.Trigger(_4);}return _3;});return _0.event;},Filter:function(_5,_6){var _7;_7=$.New(j,{Handlers:m.New2()});h.addListener(_6,function(_8){return _5(_8)?_7.Trigger(_8):null;});return _7;},Map:function(_9,_){var ba;ba=$.New(j,{Handlers:m.New2()});h.addListener(_,function(bb){return ba.Trigger(_9(bb));});return ba;},Merge:function(bb,bc){var bd;bd=$.New(j,{Handlers:m.New2()});h.addListener(bb,function(be){return bd.Trigger(be);});h.addListener(bc,function(bf){return bd.Trigger(bf);});return bd;},Pairwise:function(bg){var bh,bi;bh=[{$:0}];bi=$.New(j,{Handlers:m.New2()});h.addListener(bg,function(bj){var bk,bl,bm;bk=bh[0];if(bk.$==1){bm=bk.$0;bh[0]={$:1,$0:bj};bl=bi.Trigger([bm,bj]);}else{bl=void(bh[0]={$:1,$0:bj});}return bl;});return bi;},Partition:function(bn,bo){return[n.Filter(bn,bo),n.Filter(function(bp){var bq;bq=bn(bp);return!bq;},bo)];},Scan:function(br,bs,bt){var bu,bv;bu=[bs];bv=function(bw){bu[0]=(br(bu[0]))(bw);return bu[0];};return n.Map(bv,bt);},Split:function(bx,by){var bz,bE;bz=function(bA){var bB,bC,bD;bB=bx(bA);if(bB.$==0){bD=bB.$0;bC={$:1,$0:bD};}else{bC={$:0};}return bC;};bE=function(bF){var bG,bH,bI;bG=bx(bF);if(bG.$==1){bI=bG.$0;bH={$:1,$0:bI};}else{bH={$:0};}return bH;};return[n.Choose(bz,by),n.Choose(bE,by)];}},FSharpEvent:$.Class({},{New:function(){var bJ;bJ=$.New(this,{});bJ.event=$.New(j,{Handlers:m.New2()});return bJ;}}),HotStream:{HotStream:$.Class({Subscribe:function(bK){var bL;this.Latest[0].$==1?bK.OnNext(this.Latest[0].$0):null;bL=h.subscribeTo(this.Event.event,function(bM){return bK.OnNext(bM);});return bL;},Trigger:function(bN){this.Latest[0]={$:1,$0:bN};return this.Event.event.Trigger(bN);}},{New:function(){return $.New(p,{Latest:[{$:0}],Event:g.New()});}})},MailboxProcessor:$.Class({PostAndAsyncReply:function(bO,bP){var bR=this;return q.Delay(function(){return q.Bind(bR.PostAndTryAsyncReply(bO,bP),function(bS){var bT,bU;if(bS.$==1){bU=bS.$0;bT=bU;}else{bT=r.Raise(s.New());}return q.Return(bT);});});},PostAndTryAsyncReply:function(bV,bW){var bX,bY,b6=this;bX=r.DefaultArg(bW,this.get_DefaultTimeout());bY=function(bZ){var b0,b1,b2,b3,b4,b7,b8,b$;b0=bZ[0];b1=bZ[1];b2=bZ[2];if(bX<0){b4=bV(function(b5){return b0({$:1,$0:b5});});b6.mailbox.AddLast(b4);b3=b6.resume();}else{b7=[true];b8=bV(function(b9){var b_;if(b7[0]){b7[0]=false;b_=b0({$:1,$0:b9});}else{b_=null;}return b_;});b6.mailbox.AddLast(b8);b6.resume();b$=t(function(){var cb;if(b7[0]){b7[0]=false;cb=b0({$:0});}else{cb=null;}return cb;},bX);b3=void b$;}return b3;};return q.FromContinuations(bY);},Receive:function(cc){var ce=this;return q.Delay(function(){return q.Bind(ce.TryReceive(cc),function(cf){var cg,ch;if(cf.$==1){ch=cf.$0;cg=ch;}else{cg=r.Raise(s.New());}return q.Return(cg);});});},Scan:function(ci,cj){var cl=this;return q.Delay(function(){return q.Bind(cl.TryScan(ci,cj),function(cm){var cn,co;if(cm.$==1){co=cm.$0;cn=co;}else{cn=r.Raise(s.New());}return q.Return(cn);});});},Start:function(){var cp,cq,ct=this;if(this.started){cp=r.FailWith("The MailboxProcessor has already been started.");}else{this.started=true;cq=q.Delay(function(){return q.TryWith(q.Delay(function(){return q.Bind(ct.initial.call(null,ct),function(){return q.Return(null);});}),function(cv){ct.errorEvent.event.Trigger(cv);return q.Return(null);});});cp=ct.startAsync(cq);}return cp;},TryReceive:function(cw){var cx,cy,cD=this;cx=r.DefaultArg(cw,this.get_DefaultTimeout());cy=function(cz){var cA,cB,cC,cE,cF,cG,cJ,cK,cN,cR;cA=cz[0];cB=cz[1];cC=cz[2];if(a.Equals(cD.mailbox.get_First(),null)){if(cx<0){cG=q.Delay(function(){var cI;cI=cD.dequeue();cA({$:1,$0:cI});return q.Return(null);});cF=void(cD.savedCont={$:1,$0:cG});}else{cJ=[true];cK=t(function(){var cM;if(cJ[0]){cJ[0]=false;cD.savedCont={$:0};cM=cA({$:0});}else{cM=null;}return cM;},cx);cN=q.Delay(function(){var cP,cQ;if(cJ[0]){cJ[0]=false;u(cK);cQ=cD.dequeue();cA({$:1,$0:cQ});cP=q.Return(null);}else{cP=q.Return(null);}return cP;});cF=void(cD.savedCont={$:1,$0:cN});}cE=cF;}else{cR=cD.dequeue();cE=cA({$:1,$0:cR});}return cE;};return q.FromContinuations(cy);},TryScan:function(cS,cT){var cU,cZ=this;cU=r.DefaultArg(cT,this.get_DefaultTimeout());return q.Delay(function(){var cW,c3,c4,c5,c7;cW=function(){var cY,c0,c1,c2;cY=cZ.mailbox.get_First();c0={$:0};while(!a.Equals(cY,null)){c1=cS(cY.v);if(c1.$==0){c2=cY=cY.n;}else{cZ.mailbox.Remove(cY);cY=null;c2=c0=c1;}}return c0;};c3=cW(null);if(c3.$==1){c5=c3.$0;c4=q.Bind(c5,function(c6){return q.Return({$:1,$0:c6});});}else{c7=function(c8){var c9,c_,c$,da,db,dj,dk,dn;c9=c8[0];c_=c8[1];c$=c8[2];if(cU<0){db=function(){var dd;dd=q.Delay(function(){var df,dg,dh;df=cS(cZ.mailbox.get_First().v);if(df.$==1){dh=df.$0;cZ.mailbox.RemoveFirst();dg=q.Bind(dh,function(di){c9({$:1,$0:di});return q.Return(null);});}else{db(null);dg=q.Return(null);}return dg;});cZ.savedCont={$:1,$0:dd};return;};da=db(null);}else{dj=[true];dk=t(function(){var dm;if(dj[0]){dj[0]=false;cZ.savedCont={$:0};dm=c9({$:0});}else{dm=null;}return dm;},cU);dn=function(){var dp;dp=q.Delay(function(){var dr,ds,dt;dr=cS(cZ.mailbox.get_First().v);if(dr.$==1){dt=dr.$0;cZ.mailbox.RemoveFirst();ds=q.Bind(dt,function(du){var dv;if(dj[0]){dj[0]=false;u(dk);c9({$:1,$0:du});dv=q.Return(null);}else{dv=q.Return(null);}return dv;});}else{dn(null);ds=q.Return(null);}return ds;});cZ.savedCont={$:1,$0:dp};return;};da=dn(null);}return da;};c4=q.FromContinuations(c7);}return c4;});},dequeue:function(){var dw;dw=this.mailbox.get_First().v;this.mailbox.RemoveFirst();return dw;},get_CurrentQueueLength:function(){return this.mailbox.get_Count();},get_DefaultTimeout:function(){return this["DefaultTimeout@"];},get_Error:function(){return this.errorEvent.event;},resume:function(){var dx,dy,dz;dx=this.savedCont;if(dx.$==1){dz=dx.$0;this.savedCont={$:0};dy=this.startAsync(dz);}else{dy=null;}return dy;},set_DefaultTimeout:function(dA){this["DefaultTimeout@"]=dA;return;},startAsync:function(dB){return q.Start(dB,this.token);}},{New:function(dC,dD){var dE,dF,dG,dH,dI;dE=$.New(this,{});dE.initial=dC;dE.token=dD;dE.started=false;dE.errorEvent=g.New();dE.mailbox=w.New();dE.savedCont={$:0};dF=dE.token;if(dF.$==0){dG=null;}else{dH=dF.$0;dI=q.Register(dH,function(){return function(){return dE.resume();}();});dG=void dI;}dE["DefaultTimeout@"]=-1;return dE;},Start:function(dL,dM){var dN;dN=x.New(dL,dM);dN.Start();return dN;}}),Observable:{Aggregate:function(dO,dP,dQ){var dR;dR=function(dS){var dT,dU,dZ;dT=[dP];dU=function(dV){return y.Protect(function(){return(dQ(dT[0]))(dV);},function(dX){dT[0]=dX;return dS.OnNext(dX);},function(dY){return dS.OnError(dY);});};dZ=z.New(dU,function(d0){return dS.OnError(d0);},function(){return dS.OnCompleted();});return dO.Subscribe(dZ);};return y.New(dR);},Choose:function(d2,d3){var d4;d4=function(d5){var d6,eb;d6=function(d7){var d9;d9=function(d_){return d5.OnNext(d_);};return y.Protect(function(){return d2(d7);},function(d$){return c.iter(d9,d$);},function(ea){return d5.OnError(ea);});};eb=z.New(d6,function(ec){return d5.OnError(ec);},function(){return d5.OnCompleted();});return d3.Subscribe(eb);};return y.New(d4);},CombineLatest:function(ee,ef,eg){var eh;eh=function(ei){var ej,ek,el,ev,ex,eA,eC,eF,eG;ej=[{$:0}];ek=[{$:0}];el=function(){var en,eo,ep,eq,er;en=[ej[0],ek[0]];if(en[0].$==1){if(en[1].$==1){eq=en[0].$0;er=en[1].$0;ep=y.Protect(function(){return(eg(eq))(er);},function(et){return ei.OnNext(et);},function(eu){return ei.OnError(eu);});}else{ep=null;}eo=ep;}else{eo=null;}return eo;};ev=function(ew){ej[0]={$:1,$0:ew};return el(null);};ex=z.New(ev,function(){},function(){});eA=function(eB){ek[0]={$:1,$0:eB};return el(null);};eC=z.New(eA,function(){},function(){});eF=ee.Subscribe(ex);eG=ef.Subscribe(eC);return e.Of(function(){eF.Dispose();return eG.Dispose();});};return y.New(eh);},Concat:function(eI,eJ){var eK;eK=function(eL){var eM,eN,eS;eM=[{$:0}];eN=eI.Subscribe(z.New(function(eO){return eL.OnNext(eO);},function(){},function(){var eR;eR=eJ.Subscribe(eL);eM[0]={$:1,$0:eR};}));eS=function(){eM[0].$==1?eM[0].$0.Dispose():null;return eN.Dispose();};return e.Of(eS);};return y.New(eK);},Drop:function(eU,eV){var eW;eW=function(eX){var eY,eZ,e1;eY=[0];eZ=function(e0){A.incr(eY);return eY[0]>eU?eX.OnNext(e0):null;};e1=z.New(eZ,function(e2){return eX.OnError(e2);},function(){return eX.OnCompleted();});return eV.Subscribe(e1);};return y.New(eW);},Filter:function(e4,e5){var e6;e6=function(e7){var e8,fd;e8=function(e9){var e$;e$=function(fa){return e7.OnNext(fa);};return y.Protect(function(){return e4(e9)?{$:1,$0:e9}:{$:0};},function(fb){return c.iter(e$,fb);},function(fc){return e7.OnError(fc);});};fd=z.New(e8,function(fe){return e7.OnError(fe);},function(){return e7.OnCompleted();});return e5.Subscribe(fd);};return y.New(e6);},Map:function(fg,fh){var fi;fi=function(fj){var fk,fp;fk=function(fl){return y.Protect(function(){return fg(fl);},function(fn){return fj.OnNext(fn);},function(fo){return fj.OnError(fo);});};fp=z.New(fk,function(fq){return fj.OnError(fq);},function(){return fj.OnCompleted();});return fh.Subscribe(fp);};return y.New(fi);},Merge:function(fs,ft){var fu;fu=function(fv){var fw,fx,fy,fC,fD,fH;fw=[false];fx=[false];fy=z.New(function(fz){return fv.OnNext(fz);},function(){},function(){fw[0]=true;return(fw[0]?fx[0]:false)?fv.OnCompleted():null;});fC=fs.Subscribe(fy);fD=z.New(function(fE){return fv.OnNext(fE);},function(){},function(){fx[0]=true;return(fw[0]?fx[0]:false)?fv.OnCompleted():null;});fH=ft.Subscribe(fD);return e.Of(function(){fC.Dispose();return fH.Dispose();});};return y.New(fu);},Never:function(){return y.New(function(){return e.Of(function(){});});},New:function(fL){return $.New(B,{Subscribe1:fL});},Observable:$.Class({Subscribe:function(fM){return this.Subscribe1.call(null,fM);}}),Of:function(fN){return y.New(function(fO){return e.Of(fN(function(fP){return fO.OnNext(fP);}));});},Protect:function(fQ,fR,fS){var fT,fU,fV,fW,fX,fY;try{fU={$:0,$0:fQ(null)};}catch(fV){fU={$:1,$0:fV};}fT=fU;if(fT.$==1){fX=fT.$0;fW=fS(fX);}else{fY=fT.$0;fW=fR(fY);}return fW;},Range:function(fZ,f0){var f1;f1=function(f2){var f3;for(f3=fZ;f3<=fZ+f0;f3++){f2.OnNext(f3);}return e.Of(function(){});};return y.New(f1);},Return:function(f5){var f6;f6=function(f7){f7.OnNext(f5);f7.OnCompleted();return e.Of(function(){});};return y.New(f6);},SelectMany:function(f9){return y.New(function(f_){var f$,gb;f$=[function(){}];gb=h.subscribeTo(f9,function(gc){var gd;gd=h.subscribeTo(gc,function(ge){return f_.OnNext(ge);});f$[0]=function(){f$[0].call(null,null);return gd.Dispose();};return;});return e.Of(function(){f$[0].call(null,null);return gb.Dispose();});});},Sequence:function(gh){var gi;gi=function(gj){var gk,gl,gm,gn;if(gj.$==1){gl=gj.$1;gm=gj.$0;gn=gi(gl);gk=y.CombineLatest(gm,gn,function(go){return function(gp){return $.New(D,{$:1,$0:go,$1:gp});};});}else{gk=y.Return($.New(D,{$:0}));}return gk;};return gi(C.ofSeq(gh));},Switch:function(gq){return y.New(function(gr){var gs,gt,gu;gs=[0];gt=[{$:0}];gu=h.subscribeTo(gq,function(gv){var gw,gx,gz;A.incr(gs);gt[0].$==1?gt[0].$0.Dispose():null;gw=gs[0];gx=h.subscribeTo(gv,function(gy){return gw===gs[0]?gr.OnNext(gy):null;});gz={$:1,$0:gx};gt[0]=gz;return;});return gu;});}},ObservableModule:{Pairwise:function(gA){var gB;gB=function(gC){var gD,gE,gJ;gD=[{$:0}];gE=function(gF){var gG,gH,gI;gG=gD[0];if(gG.$==1){gI=gG.$0;gH=gC.OnNext([gI,gF]);}else{gH=null;}gD[0]={$:1,$0:gF};return;};gJ=z.New(gE,function(gK){return gC.OnError(gK);},function(){return gC.OnCompleted();});return gA.Subscribe(gJ);};return y.New(gB);},Partition:function(gM,gN){return[y.Filter(gM,gN),y.Filter(function(gO){var gP;gP=gM(gO);return!gP;},gN)];},Scan:function(gQ,gR,gS){var gT;gT=function(gU){var gV,gW,g1;gV=[gR];gW=function(gX){return y.Protect(function(){return(gQ(gV[0]))(gX);},function(gZ){gV[0]=gZ;return gU.OnNext(gZ);},function(g0){return gU.OnError(g0);});};g1=z.New(gW,function(g2){return gU.OnError(g2);},function(){return gU.OnCompleted();});return gS.Subscribe(g1);};return y.New(gT);},Split:function(g4,g5){var g6,g$,ha,hf;g6=function(g7){var g8,g9,g_;g8=g4(g7);if(g8.$==0){g_=g8.$0;g9={$:1,$0:g_};}else{g9={$:0};}return g9;};g$=y.Choose(g6,g5);ha=function(hb){var hc,hd,he;hc=g4(hb);if(hc.$==1){he=hc.$0;hd={$:1,$0:he};}else{hd={$:0};}return hd;};hf=y.Choose(ha,g5);return[g$,hf];}},Observer:{New:function(hg,hh,hi){return $.New(E,{onNext:hg,onError:hh,onCompleted:hi});},Observer:$.Class({OnCompleted:function(){return this.onCompleted.call(null,null);},OnError:function(hj){return this.onError.call(null,hj);},OnNext:function(hk){return this.onNext.call(null,hk);}}),Of:function(hl){return $.New(E,{onNext:function(hm){return hl(hm);},onError:function(hn){return r.Raise(hn);},onCompleted:function(){return null;}});}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Unchecked);b=$.Safe($$.WebSharper.Seq);c=$.Safe($$.WebSharper.Option);d=$.Safe($$.WebSharper.Control);e=$.Safe(d.Disposable);f=$.Safe($$.WebSharper.Arrays);g=$.Safe(d.FSharpEvent);h=$.Safe($$.WebSharper.Util);i=$.Safe(d.Event);j=$.Safe(i.Event);k=$.Safe($$.WebSharper.Collections);l=$.Safe(k.ResizeArray);m=$.Safe(l.ResizeArrayProxy);n=$.Safe(d.EventModule);o=$.Safe(d.HotStream);p=$.Safe(o.HotStream);q=$.Safe($$.WebSharper.Concurrency);r=$.Safe($$.WebSharper.Operators);s=$.Safe($$.WebSharper.TimeoutException);t=$.Safe($$.setTimeout);u=$.Safe($$.clearTimeout);v=$.Safe(k.LinkedList);w=$.Safe(v.T);x=$.Safe(d.MailboxProcessor);y=$.Safe(d.Observable);z=$.Safe(d.Observer);A=$.Safe($$.WebSharper.Ref);B=$.Safe(y.Observable);C=$.Safe($$.WebSharper.List);D=$.Safe(C.T);return E=$.Safe(z.Observer);});$.OnLoad(function(){return;});}());

(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i;$.Define($$,{Test:{Client:{Main:$.Field(function(){var j,k,l,m,p,q,r,s,t,w,x,y,z,C,D,E;j=a.ofArray([d.Create("style","background : silver; height : 150px; text-align: center; font: 30px/150px Helvetica, Arial, sans-serif;")]);k=$.New(e,{$:0});l=f.Element("div",j,k);m=new g(l.elt);m.on("panleft panright tap press",function(n){var o;l.Clear();o=a.ofArray([f.TextNode(n.type+"gesture detected")]);l.elt.appendChild(f.Element("div",[],o).elt);return;});p=a.ofArray([d.Create("style","background : silver; height : 150px; text-align: center; font: 30px/150px Helvetica, Arial, sans-serif;")]);q=$.New(e,{$:0});r=f.Element("div",p,q);s=new g.Manager(r.elt);t={direction:g.DIRECTION_ALL};s.add(new g.Swipe(t));s.on("swipeleft swiperight swipeup swipedown panleft panright tap press",function(u){var v;r.Clear();v=a.ofArray([f.TextNode(u.type+"gesture detected")]);r.elt.appendChild(f.Element("div",[],v).elt);return;});w=a.ofArray([d.Create("style","background : silver; height : 150px; text-align: center; font: 30px/150px Helvetica, Arial, sans-serif;")]);x=$.New(e,{$:0});y=f.Element("div",w,x);z=new g.Manager(y.elt);z.add(new g.Tap({event:"doubletap",taps:2}));z.add(new g.Tap({event:"singletap"}));z.get("doubletap").recognizeWith("singletap");z.get("singletap").requireFailure("doubletap");z.on("singletap doubletap panleft panright press",function(A){var B;y.Clear();B=a.ofArray([f.TextNode(A.type+"gesture detected")]);y.elt.appendChild(f.Element("div",[],B).elt);return;});C=a.ofArray([f.TextNode("Simple hammer class")]);D=a.ofArray([f.TextNode("This one only detects swipe")]);E=a.ofArray([f.TextNode("Doubletap will not trigger singletap")]);return f.RunById("main",f.Element("div",$.New(e,{$:0}),a.ofArray([f.Element("h2",[],C),l,f.Element("h2",[],D),r,f.Element("h2",[],E),y])));})}}});$.OnInit(function(){a=$.Safe($$.WebSharper.List);b=$.Safe($$.WebSharper.UI);c=$.Safe(b.Next);d=$.Safe(c.AttrProxy);e=$.Safe(a.T);f=$.Safe(c.Doc);g=$.Safe($$.Hammer);h=$.Safe($$.Test);return i=$.Safe(h.Client);});$.OnLoad(function(){i.Main();return;});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
